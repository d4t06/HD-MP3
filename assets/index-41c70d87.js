function qN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Wb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hb={exports:{}},mf={},qb={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=Symbol.for("react.element"),GN=Symbol.for("react.portal"),KN=Symbol.for("react.fragment"),XN=Symbol.for("react.strict_mode"),QN=Symbol.for("react.profiler"),YN=Symbol.for("react.provider"),JN=Symbol.for("react.context"),ZN=Symbol.for("react.forward_ref"),e4=Symbol.for("react.suspense"),t4=Symbol.for("react.memo"),n4=Symbol.for("react.lazy"),o1=Symbol.iterator;function r4(t){return t===null||typeof t!="object"?null:(t=o1&&t[o1]||t["@@iterator"],typeof t=="function"?t:null)}var Gb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kb=Object.assign,Xb={};function Ua(t,e,n){this.props=t,this.context=e,this.refs=Xb,this.updater=n||Gb}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qb(){}Qb.prototype=Ua.prototype;function Hy(t,e,n){this.props=t,this.context=e,this.refs=Xb,this.updater=n||Gb}var qy=Hy.prototype=new Qb;qy.constructor=Hy;Kb(qy,Ua.prototype);qy.isPureReactComponent=!0;var a1=Array.isArray,Yb=Object.prototype.hasOwnProperty,Gy={current:null},Jb={key:!0,ref:!0,__self:!0,__source:!0};function Zb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Yb.call(e,r)&&!Jb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Gc,type:t,key:s,ref:o,props:i,_owner:Gy.current}}function i4(t,e){return{$$typeof:Gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ky(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gc}function s4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var l1=/\/+/g;function np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?s4(""+t.key):e.toString(36)}function vd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Gc:case GN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+np(o,0):r,a1(i)?(n="",t!=null&&(n=t.replace(l1,"$&/")+"/"),vd(i,e,n,"",function(c){return c})):i!=null&&(Ky(i)&&(i=i4(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(l1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",a1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+np(s,a);o+=vd(s,e,n,l,i)}else if(l=r4(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+np(s,a++),o+=vd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ru(t,e,n){if(t==null)return t;var r=[],i=0;return vd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function o4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},xd={transition:null},a4={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:xd,ReactCurrentOwner:Gy};ye.Children={map:Ru,forEach:function(t,e,n){Ru(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ru(t,function(){e++}),e},toArray:function(t){return Ru(t,function(e){return e})||[]},only:function(t){if(!Ky(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Ua;ye.Fragment=KN;ye.Profiler=QN;ye.PureComponent=Hy;ye.StrictMode=XN;ye.Suspense=e4;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a4;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Yb.call(e,l)&&!Jb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Gc,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:JN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YN,_context:t},t.Consumer=t};ye.createElement=Zb;ye.createFactory=function(t){var e=Zb.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:ZN,render:t}};ye.isValidElement=Ky;ye.lazy=function(t){return{$$typeof:n4,_payload:{_status:-1,_result:t},_init:o4}};ye.memo=function(t,e){return{$$typeof:t4,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=xd.transition;xd.transition={};try{t()}finally{xd.transition=e}};ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ye.useCallback=function(t,e){return on.current.useCallback(t,e)};ye.useContext=function(t){return on.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return on.current.useDeferredValue(t)};ye.useEffect=function(t,e){return on.current.useEffect(t,e)};ye.useId=function(){return on.current.useId()};ye.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return on.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};ye.useRef=function(t){return on.current.useRef(t)};ye.useState=function(t){return on.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return on.current.useTransition()};ye.version="18.2.0";qb.exports=ye;var f=qb.exports;const ek=Wb(f),Xy=qN({__proto__:null,default:ek},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4=f,c4=Symbol.for("react.element"),u4=Symbol.for("react.fragment"),d4=Object.prototype.hasOwnProperty,h4=l4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f4={key:!0,ref:!0,__self:!0,__source:!0};function tk(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)d4.call(e,r)&&!f4.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:c4,type:t,key:s,ref:o,props:i,_owner:h4.current}}mf.Fragment=u4;mf.jsx=tk;mf.jsxs=tk;Hb.exports=mf;var u=Hb.exports;var Og={},nk={exports:{}},Ln={},rk={exports:{}},ik={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,$){var V=I.length;I.push($);e:for(;0<V;){var D=V-1>>>1,H=I[D];if(0<i(H,$))I[D]=$,I[V]=H,V=D;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var $=I[0],V=I.pop();if(V!==$){I[0]=V;e:for(var D=0,H=I.length,ee=H>>>1;D<ee;){var ie=2*(D+1)-1,De=I[ie],pe=ie+1,tt=I[pe];if(0>i(De,V))pe<H&&0>i(tt,De)?(I[D]=tt,I[pe]=V,D=pe):(I[D]=De,I[ie]=V,D=ie);else if(pe<H&&0>i(tt,V))I[D]=tt,I[pe]=V,D=pe;else break e}}return $}function i(I,$){var V=I.sortIndex-$.sortIndex;return V!==0?V:I.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,p=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(I){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=I)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function E(I){if(x=!1,w(I),!y)if(n(l)!==null)y=!0,G(S);else{var $=n(c);$!==null&&fe(E,$.startTime-I)}}function S(I,$){y=!1,x&&(x=!1,v(k),k=-1),p=!0;var V=m;try{for(w($),h=n(l);h!==null&&(!(h.expirationTime>$)||I&&!j());){var D=h.callback;if(typeof D=="function"){h.callback=null,m=h.priorityLevel;var H=D(h.expirationTime<=$);$=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&r(l),w($)}else r(l);h=n(l)}if(h!==null)var ee=!0;else{var ie=n(c);ie!==null&&fe(E,ie.startTime-$),ee=!1}return ee}finally{h=null,m=V,p=!1}}var T=!1,b=null,k=-1,R=5,O=-1;function j(){return!(t.unstable_now()-O<R)}function K(){if(b!==null){var I=t.unstable_now();O=I;var $=!0;try{$=b(!0,I)}finally{$?L():(T=!1,b=null)}}else T=!1}var L;if(typeof g=="function")L=function(){g(K)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=K,L=function(){q.postMessage(null)}}else L=function(){_(K,0)};function G(I){b=I,T||(T=!0,L())}function fe(I,$){k=_(function(){I(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,G(S))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var V=m;m=$;try{return I()}finally{m=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,$){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var V=m;m=I;try{return $()}finally{m=V}},t.unstable_scheduleCallback=function(I,$,V){var D=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?D+V:D):V=D,I){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=V+H,I={id:d++,callback:$,priorityLevel:I,startTime:V,expirationTime:H,sortIndex:-1},V>D?(I.sortIndex=V,e(c,I),n(l)===null&&I===n(c)&&(x?(v(k),k=-1):x=!0,fe(E,V-D))):(I.sortIndex=H,e(l,I),y||p||(y=!0,G(S))),I},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(I){var $=m;return function(){var V=m;m=$;try{return I.apply(this,arguments)}finally{m=V}}}})(ik);rk.exports=ik;var m4=rk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk=f,Dn=m4;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ok=new Set,Jl={};function po(t,e){pa(t,e),pa(t+"Capture",e)}function pa(t,e){for(Jl[t]=e,t=0;t<e.length;t++)ok.add(e[t])}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jg=Object.prototype.hasOwnProperty,p4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c1={},u1={};function g4(t){return jg.call(u1,t)?!0:jg.call(c1,t)?!1:p4.test(t)?u1[t]=!0:(c1[t]=!0,!1)}function y4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function v4(t,e,n,r){if(e===null||typeof e>"u"||y4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qy=/[\-:]([a-z])/g;function Yy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qy,Yy);jt[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qy,Yy);jt[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qy,Yy);jt[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jy(t,e,n,r){var i=jt.hasOwnProperty(e)?jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v4(e,n,i,r)&&(n=null),r||i===null?g4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gi=sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pu=Symbol.for("react.element"),$o=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),Mg=Symbol.for("react.profiler"),ak=Symbol.for("react.provider"),lk=Symbol.for("react.context"),ev=Symbol.for("react.forward_ref"),Lg=Symbol.for("react.suspense"),Fg=Symbol.for("react.suspense_list"),tv=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),ck=Symbol.for("react.offscreen"),d1=Symbol.iterator;function ll(t){return t===null||typeof t!="object"?null:(t=d1&&t[d1]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,rp;function El(t){if(rp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rp=e&&e[1]||""}return`
`+rp+t}var ip=!1;function sp(t,e){if(!t||ip)return"";ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ip=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?El(t):""}function x4(t){switch(t.tag){case 5:return El(t.type);case 16:return El("Lazy");case 13:return El("Suspense");case 19:return El("SuspenseList");case 0:case 2:case 15:return t=sp(t.type,!1),t;case 11:return t=sp(t.type.render,!1),t;case 1:return t=sp(t.type,!0),t;default:return""}}function $g(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bo:return"Fragment";case $o:return"Portal";case Mg:return"Profiler";case Zy:return"StrictMode";case Lg:return"Suspense";case Fg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lk:return(t.displayName||"Context")+".Consumer";case ak:return(t._context.displayName||"Context")+".Provider";case ev:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tv:return e=t.displayName||null,e!==null?e:$g(t.type)||"Memo";case Ti:e=t._payload,t=t._init;try{return $g(t(e))}catch{}}return null}function w4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $g(e);case 8:return e===Zy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ns(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _4(t){var e=uk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nu(t){t._valueTracker||(t._valueTracker=_4(t))}function dk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bg(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function h1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ns(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hk(t,e){e=e.checked,e!=null&&Jy(t,"checked",e,!1)}function zg(t,e){hk(t,e);var n=ns(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vg(t,e.type,ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function f1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vg(t,e,n){(e!=="number"||Wd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sl=Array.isArray;function ea(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ns(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ug(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function m1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Sl(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ns(n)}}function fk(t,e){var n=ns(e.value),r=ns(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function p1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Du,pk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Du=Du||document.createElement("div"),Du.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Du.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E4=["Webkit","ms","Moz","O"];Object.keys(Dl).forEach(function(t){E4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dl[e]=Dl[t]})});function gk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dl.hasOwnProperty(t)&&Dl[t]?(""+e).trim():e+"px"}function yk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var S4=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hg(t,e){if(e){if(S4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function qg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gg=null;function nv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kg=null,ta=null,na=null;function g1(t){if(t=Qc(t)){if(typeof Kg!="function")throw Error(M(280));var e=t.stateNode;e&&(e=xf(e),Kg(t.stateNode,t.type,e))}}function vk(t){ta?na?na.push(t):na=[t]:ta=t}function xk(){if(ta){var t=ta,e=na;if(na=ta=null,g1(t),e)for(t=0;t<e.length;t++)g1(e[t])}}function wk(t,e){return t(e)}function _k(){}var op=!1;function Ek(t,e,n){if(op)return t(e,n);op=!0;try{return wk(t,e,n)}finally{op=!1,(ta!==null||na!==null)&&(_k(),xk())}}function ec(t,e){var n=t.stateNode;if(n===null)return null;var r=xf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Xg=!1;if(oi)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Xg=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Xg=!1}function b4(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ol=!1,Hd=null,qd=!1,Qg=null,k4={onError:function(t){Ol=!0,Hd=t}};function T4(t,e,n,r,i,s,o,a,l){Ol=!1,Hd=null,b4.apply(k4,arguments)}function I4(t,e,n,r,i,s,o,a,l){if(T4.apply(this,arguments),Ol){if(Ol){var c=Hd;Ol=!1,Hd=null}else throw Error(M(198));qd||(qd=!0,Qg=c)}}function go(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function y1(t){if(go(t)!==t)throw Error(M(188))}function C4(t){var e=t.alternate;if(!e){if(e=go(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return y1(i),t;if(s===r)return y1(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function bk(t){return t=C4(t),t!==null?kk(t):null}function kk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kk(t);if(e!==null)return e;t=t.sibling}return null}var Tk=Dn.unstable_scheduleCallback,v1=Dn.unstable_cancelCallback,A4=Dn.unstable_shouldYield,R4=Dn.unstable_requestPaint,rt=Dn.unstable_now,P4=Dn.unstable_getCurrentPriorityLevel,rv=Dn.unstable_ImmediatePriority,Ik=Dn.unstable_UserBlockingPriority,Gd=Dn.unstable_NormalPriority,N4=Dn.unstable_LowPriority,Ck=Dn.unstable_IdlePriority,pf=null,Ar=null;function D4(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(pf,t,void 0,(t.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:M4,O4=Math.log,j4=Math.LN2;function M4(t){return t>>>=0,t===0?32:31-(O4(t)/j4|0)|0}var Ou=64,ju=4194304;function bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=bl(a):(s&=o,s!==0&&(r=bl(s)))}else o=n&~i,o!==0?r=bl(o):s!==0&&(r=bl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dr(e),i=1<<n,r|=t[n],e&=~i;return r}function L4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-dr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=L4(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ak(){var t=Ou;return Ou<<=1,!(Ou&4194240)&&(Ou=64),t}function ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dr(e),t[e]=n}function $4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-dr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function iv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function Rk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pk,sv,Nk,Dk,Ok,Jg=!1,Mu=[],zi=null,Vi=null,Ui=null,tc=new Map,nc=new Map,Ci=[],B4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x1(t,e){switch(t){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":tc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(e.pointerId)}}function ul(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qc(e),e!==null&&sv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function z4(t,e,n,r,i){switch(e){case"focusin":return zi=ul(zi,t,e,n,r,i),!0;case"dragenter":return Vi=ul(Vi,t,e,n,r,i),!0;case"mouseover":return Ui=ul(Ui,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return tc.set(s,ul(tc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,nc.set(s,ul(nc.get(s)||null,t,e,n,r,i)),!0}return!1}function jk(t){var e=Ns(t.target);if(e!==null){var n=go(e);if(n!==null){if(e=n.tag,e===13){if(e=Sk(n),e!==null){t.blockedOn=e,Ok(t.priority,function(){Nk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gg=r,n.target.dispatchEvent(r),Gg=null}else return e=Qc(n),e!==null&&sv(e),t.blockedOn=n,!1;e.shift()}return!0}function w1(t,e,n){wd(t)&&n.delete(e)}function V4(){Jg=!1,zi!==null&&wd(zi)&&(zi=null),Vi!==null&&wd(Vi)&&(Vi=null),Ui!==null&&wd(Ui)&&(Ui=null),tc.forEach(w1),nc.forEach(w1)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,Jg||(Jg=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,V4)))}function rc(t){function e(i){return dl(i,t)}if(0<Mu.length){dl(Mu[0],t);for(var n=1;n<Mu.length;n++){var r=Mu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zi!==null&&dl(zi,t),Vi!==null&&dl(Vi,t),Ui!==null&&dl(Ui,t),tc.forEach(e),nc.forEach(e),n=0;n<Ci.length;n++)r=Ci[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)jk(n),n.blockedOn===null&&Ci.shift()}var ra=gi.ReactCurrentBatchConfig,Xd=!0;function U4(t,e,n,r){var i=Te,s=ra.transition;ra.transition=null;try{Te=1,ov(t,e,n,r)}finally{Te=i,ra.transition=s}}function W4(t,e,n,r){var i=Te,s=ra.transition;ra.transition=null;try{Te=4,ov(t,e,n,r)}finally{Te=i,ra.transition=s}}function ov(t,e,n,r){if(Xd){var i=Zg(t,e,n,r);if(i===null)yp(t,e,r,Qd,n),x1(t,r);else if(z4(i,t,e,n,r))r.stopPropagation();else if(x1(t,r),e&4&&-1<B4.indexOf(t)){for(;i!==null;){var s=Qc(i);if(s!==null&&Pk(s),s=Zg(t,e,n,r),s===null&&yp(t,e,r,Qd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else yp(t,e,r,null,n)}}var Qd=null;function Zg(t,e,n,r){if(Qd=null,t=nv(r),t=Ns(t),t!==null)if(e=go(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qd=t,null}function Mk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P4()){case rv:return 1;case Ik:return 4;case Gd:case N4:return 16;case Ck:return 536870912;default:return 16}default:return 16}}var Mi=null,av=null,_d=null;function Lk(){if(_d)return _d;var t,e=av,n=e.length,r,i="value"in Mi?Mi.value:Mi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return _d=i.slice(t,1<r?1-r:void 0)}function Ed(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lu(){return!0}function _1(){return!1}function Fn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Lu:_1,this.isPropagationStopped=_1,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lu)},persist:function(){},isPersistent:Lu}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lv=Fn(Wa),Xc=Ge({},Wa,{view:0,detail:0}),H4=Fn(Xc),lp,cp,hl,gf=Ge({},Xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hl&&(hl&&t.type==="mousemove"?(lp=t.screenX-hl.screenX,cp=t.screenY-hl.screenY):cp=lp=0,hl=t),lp)},movementY:function(t){return"movementY"in t?t.movementY:cp}}),E1=Fn(gf),q4=Ge({},gf,{dataTransfer:0}),G4=Fn(q4),K4=Ge({},Xc,{relatedTarget:0}),up=Fn(K4),X4=Ge({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),Q4=Fn(X4),Y4=Ge({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),J4=Fn(Y4),Z4=Ge({},Wa,{data:0}),S1=Fn(Z4),e5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n5[t])?!!e[t]:!1}function cv(){return r5}var i5=Ge({},Xc,{key:function(t){if(t.key){var e=e5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ed(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(t){return t.type==="keypress"?Ed(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ed(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s5=Fn(i5),o5=Ge({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b1=Fn(o5),a5=Ge({},Xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),l5=Fn(a5),c5=Ge({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),u5=Fn(c5),d5=Ge({},gf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h5=Fn(d5),f5=[9,13,27,32],uv=oi&&"CompositionEvent"in window,jl=null;oi&&"documentMode"in document&&(jl=document.documentMode);var m5=oi&&"TextEvent"in window&&!jl,Fk=oi&&(!uv||jl&&8<jl&&11>=jl),k1=String.fromCharCode(32),T1=!1;function $k(t,e){switch(t){case"keyup":return f5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zo=!1;function p5(t,e){switch(t){case"compositionend":return Bk(e);case"keypress":return e.which!==32?null:(T1=!0,k1);case"textInput":return t=e.data,t===k1&&T1?null:t;default:return null}}function g5(t,e){if(zo)return t==="compositionend"||!uv&&$k(t,e)?(t=Lk(),_d=av=Mi=null,zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fk&&e.locale!=="ko"?null:e.data;default:return null}}var y5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y5[t.type]:e==="textarea"}function zk(t,e,n,r){vk(r),e=Yd(e,"onChange"),0<e.length&&(n=new lv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ml=null,ic=null;function v5(t){Jk(t,0)}function yf(t){var e=Wo(t);if(dk(e))return t}function x5(t,e){if(t==="change")return e}var Vk=!1;if(oi){var dp;if(oi){var hp="oninput"in document;if(!hp){var C1=document.createElement("div");C1.setAttribute("oninput","return;"),hp=typeof C1.oninput=="function"}dp=hp}else dp=!1;Vk=dp&&(!document.documentMode||9<document.documentMode)}function A1(){Ml&&(Ml.detachEvent("onpropertychange",Uk),ic=Ml=null)}function Uk(t){if(t.propertyName==="value"&&yf(ic)){var e=[];zk(e,ic,t,nv(t)),Ek(v5,e)}}function w5(t,e,n){t==="focusin"?(A1(),Ml=e,ic=n,Ml.attachEvent("onpropertychange",Uk)):t==="focusout"&&A1()}function _5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yf(ic)}function E5(t,e){if(t==="click")return yf(e)}function S5(t,e){if(t==="input"||t==="change")return yf(e)}function b5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:b5;function sc(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jg.call(e,i)||!fr(t[i],e[i]))return!1}return!0}function R1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function P1(t,e){var n=R1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R1(n)}}function Wk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hk(){for(var t=window,e=Wd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wd(t.document)}return e}function dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function k5(t){var e=Hk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wk(n.ownerDocument.documentElement,n)){if(r!==null&&dv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=P1(n,s);var o=P1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T5=oi&&"documentMode"in document&&11>=document.documentMode,Vo=null,e0=null,Ll=null,t0=!1;function N1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;t0||Vo==null||Vo!==Wd(r)||(r=Vo,"selectionStart"in r&&dv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ll&&sc(Ll,r)||(Ll=r,r=Yd(e0,"onSelect"),0<r.length&&(e=new lv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function Fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Uo={animationend:Fu("Animation","AnimationEnd"),animationiteration:Fu("Animation","AnimationIteration"),animationstart:Fu("Animation","AnimationStart"),transitionend:Fu("Transition","TransitionEnd")},fp={},qk={};oi&&(qk=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function vf(t){if(fp[t])return fp[t];if(!Uo[t])return t;var e=Uo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qk)return fp[t]=e[n];return t}var Gk=vf("animationend"),Kk=vf("animationiteration"),Xk=vf("animationstart"),Qk=vf("transitionend"),Yk=new Map,D1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(t,e){Yk.set(t,e),po(e,[t])}for(var mp=0;mp<D1.length;mp++){var pp=D1[mp],I5=pp.toLowerCase(),C5=pp[0].toUpperCase()+pp.slice(1);gs(I5,"on"+C5)}gs(Gk,"onAnimationEnd");gs(Kk,"onAnimationIteration");gs(Xk,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(Qk,"onTransitionEnd");pa("onMouseEnter",["mouseout","mouseover"]);pa("onMouseLeave",["mouseout","mouseover"]);pa("onPointerEnter",["pointerout","pointerover"]);pa("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A5=new Set("cancel close invalid load scroll toggle".split(" ").concat(kl));function O1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,I4(r,e,void 0,t),t.currentTarget=null}function Jk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;O1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;O1(i,a,c),s=l}}}if(qd)throw t=Qg,qd=!1,Qg=null,t}function Me(t,e){var n=e[o0];n===void 0&&(n=e[o0]=new Set);var r=t+"__bubble";n.has(r)||(Zk(e,t,2,!1),n.add(r))}function gp(t,e,n){var r=0;e&&(r|=4),Zk(n,t,r,e)}var $u="_reactListening"+Math.random().toString(36).slice(2);function oc(t){if(!t[$u]){t[$u]=!0,ok.forEach(function(n){n!=="selectionchange"&&(A5.has(n)||gp(n,!1,t),gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$u]||(e[$u]=!0,gp("selectionchange",!1,e))}}function Zk(t,e,n,r){switch(Mk(e)){case 1:var i=U4;break;case 4:i=W4;break;default:i=ov}n=i.bind(null,e,n,t),i=void 0,!Xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ns(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ek(function(){var c=s,d=nv(n),h=[];e:{var m=Yk.get(t);if(m!==void 0){var p=lv,y=t;switch(t){case"keypress":if(Ed(n)===0)break e;case"keydown":case"keyup":p=s5;break;case"focusin":y="focus",p=up;break;case"focusout":y="blur",p=up;break;case"beforeblur":case"afterblur":p=up;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=E1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=G4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=l5;break;case Gk:case Kk:case Xk:p=Q4;break;case Qk:p=u5;break;case"scroll":p=H4;break;case"wheel":p=h5;break;case"copy":case"cut":case"paste":p=J4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=b1}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?m!==null?m+"Capture":null:m;x=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=ec(g,v),E!=null&&x.push(ac(g,E,w)))),_)break;g=g.return}0<x.length&&(m=new p(m,y,null,n,d),h.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Gg&&(y=n.relatedTarget||n.fromElement)&&(Ns(y)||y[ai]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?Ns(y):null,y!==null&&(_=go(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(x=E1,E="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=b1,E="onPointerLeave",v="onPointerEnter",g="pointer"),_=p==null?m:Wo(p),w=y==null?m:Wo(y),m=new x(E,g+"leave",p,n,d),m.target=_,m.relatedTarget=w,E=null,Ns(d)===c&&(x=new x(v,g+"enter",y,n,d),x.target=w,x.relatedTarget=_,E=x),_=E,p&&y)t:{for(x=p,v=y,g=0,w=x;w;w=Co(w))g++;for(w=0,E=v;E;E=Co(E))w++;for(;0<g-w;)x=Co(x),g--;for(;0<w-g;)v=Co(v),w--;for(;g--;){if(x===v||v!==null&&x===v.alternate)break t;x=Co(x),v=Co(v)}x=null}else x=null;p!==null&&j1(h,m,p,x,!1),y!==null&&_!==null&&j1(h,_,y,x,!0)}}e:{if(m=c?Wo(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=x5;else if(I1(m))if(Vk)S=S5;else{S=_5;var T=w5}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=E5);if(S&&(S=S(t,c))){zk(h,S,n,d);break e}T&&T(t,m,c),t==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Vg(m,"number",m.value)}switch(T=c?Wo(c):window,t){case"focusin":(I1(T)||T.contentEditable==="true")&&(Vo=T,e0=c,Ll=null);break;case"focusout":Ll=e0=Vo=null;break;case"mousedown":t0=!0;break;case"contextmenu":case"mouseup":case"dragend":t0=!1,N1(h,n,d);break;case"selectionchange":if(T5)break;case"keydown":case"keyup":N1(h,n,d)}var b;if(uv)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zo?$k(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Fk&&n.locale!=="ko"&&(zo||k!=="onCompositionStart"?k==="onCompositionEnd"&&zo&&(b=Lk()):(Mi=d,av="value"in Mi?Mi.value:Mi.textContent,zo=!0)),T=Yd(c,k),0<T.length&&(k=new S1(k,t,null,n,d),h.push({event:k,listeners:T}),b?k.data=b:(b=Bk(n),b!==null&&(k.data=b)))),(b=m5?p5(t,n):g5(t,n))&&(c=Yd(c,"onBeforeInput"),0<c.length&&(d=new S1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=b))}Jk(h,e)})}function ac(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ec(t,n),s!=null&&r.unshift(ac(t,s,i)),s=ec(t,e),s!=null&&r.push(ac(t,s,i))),t=t.return}return r}function Co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function j1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ec(n,s),l!=null&&o.unshift(ac(n,l,a))):i||(l=ec(n,s),l!=null&&o.push(ac(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var R5=/\r\n?/g,P5=/\u0000|\uFFFD/g;function M1(t){return(typeof t=="string"?t:""+t).replace(R5,`
`).replace(P5,"")}function Bu(t,e,n){if(e=M1(e),M1(t)!==e&&n)throw Error(M(425))}function Jd(){}var n0=null,r0=null;function i0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var s0=typeof setTimeout=="function"?setTimeout:void 0,N5=typeof clearTimeout=="function"?clearTimeout:void 0,L1=typeof Promise=="function"?Promise:void 0,D5=typeof queueMicrotask=="function"?queueMicrotask:typeof L1<"u"?function(t){return L1.resolve(null).then(t).catch(O5)}:s0;function O5(t){setTimeout(function(){throw t})}function vp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),rc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);rc(e)}function Wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function F1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),_r="__reactFiber$"+Ha,lc="__reactProps$"+Ha,ai="__reactContainer$"+Ha,o0="__reactEvents$"+Ha,j5="__reactListeners$"+Ha,M5="__reactHandles$"+Ha;function Ns(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ai]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=F1(t);t!==null;){if(n=t[_r])return n;t=F1(t)}return e}t=n,n=t.parentNode}return null}function Qc(t){return t=t[_r]||t[ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function xf(t){return t[lc]||null}var a0=[],Ho=-1;function ys(t){return{current:t}}function $e(t){0>Ho||(t.current=a0[Ho],a0[Ho]=null,Ho--)}function je(t,e){Ho++,a0[Ho]=t.current,t.current=e}var rs={},Gt=ys(rs),fn=ys(!1),qs=rs;function ga(t,e){var n=t.type.contextTypes;if(!n)return rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mn(t){return t=t.childContextTypes,t!=null}function Zd(){$e(fn),$e(Gt)}function $1(t,e,n){if(Gt.current!==rs)throw Error(M(168));je(Gt,e),je(fn,n)}function eT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,w4(t)||"Unknown",i));return Ge({},n,r)}function eh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rs,qs=Gt.current,je(Gt,t),je(fn,fn.current),!0}function B1(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=eT(t,e,qs),r.__reactInternalMemoizedMergedChildContext=t,$e(fn),$e(Gt),je(Gt,t)):$e(fn),je(fn,n)}var Kr=null,wf=!1,xp=!1;function tT(t){Kr===null?Kr=[t]:Kr.push(t)}function L5(t){wf=!0,tT(t)}function vs(){if(!xp&&Kr!==null){xp=!0;var t=0,e=Te;try{var n=Kr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kr=null,wf=!1}catch(i){throw Kr!==null&&(Kr=Kr.slice(t+1)),Tk(rv,vs),i}finally{Te=e,xp=!1}}return null}var qo=[],Go=0,th=null,nh=0,Wn=[],Hn=0,Gs=null,Xr=1,Qr="";function Ts(t,e){qo[Go++]=nh,qo[Go++]=th,th=t,nh=e}function nT(t,e,n){Wn[Hn++]=Xr,Wn[Hn++]=Qr,Wn[Hn++]=Gs,Gs=t;var r=Xr;t=Qr;var i=32-dr(r)-1;r&=~(1<<i),n+=1;var s=32-dr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xr=1<<32-dr(e)+i|n<<i|r,Qr=s+t}else Xr=1<<s|n<<i|r,Qr=t}function hv(t){t.return!==null&&(Ts(t,1),nT(t,1,0))}function fv(t){for(;t===th;)th=qo[--Go],qo[Go]=null,nh=qo[--Go],qo[Go]=null;for(;t===Gs;)Gs=Wn[--Hn],Wn[Hn]=null,Qr=Wn[--Hn],Wn[Hn]=null,Xr=Wn[--Hn],Wn[Hn]=null}var An=null,kn=null,Ue=!1,or=null;function rT(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function z1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,kn=Wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gs!==null?{id:Xr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,kn=null,!0):!1;default:return!1}}function l0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function c0(t){if(Ue){var e=kn;if(e){var n=e;if(!z1(t,e)){if(l0(t))throw Error(M(418));e=Wi(n.nextSibling);var r=An;e&&z1(t,e)?rT(r,n):(t.flags=t.flags&-4097|2,Ue=!1,An=t)}}else{if(l0(t))throw Error(M(418));t.flags=t.flags&-4097|2,Ue=!1,An=t}}}function V1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function zu(t){if(t!==An)return!1;if(!Ue)return V1(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!i0(t.type,t.memoizedProps)),e&&(e=kn)){if(l0(t))throw iT(),Error(M(418));for(;e;)rT(t,e),e=Wi(e.nextSibling)}if(V1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kn=Wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kn=null}}else kn=An?Wi(t.stateNode.nextSibling):null;return!0}function iT(){for(var t=kn;t;)t=Wi(t.nextSibling)}function ya(){kn=An=null,Ue=!1}function mv(t){or===null?or=[t]:or.push(t)}var F5=gi.ReactCurrentBatchConfig;function rr(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var rh=ys(null),ih=null,Ko=null,pv=null;function gv(){pv=Ko=ih=null}function yv(t){var e=rh.current;$e(rh),t._currentValue=e}function u0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){ih=t,pv=Ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(pv!==t)if(t={context:t,memoizedValue:e,next:null},Ko===null){if(ih===null)throw Error(M(308));Ko=t,ih.dependencies={lanes:0,firstContext:t}}else Ko=Ko.next=t;return e}var Ds=null;function vv(t){Ds===null?Ds=[t]:Ds.push(t)}function sT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vv(e)):(n.next=i.next,i.next=n),e.interleaved=n,li(t,r)}function li(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ii=!1;function xv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,li(t,n)}return i=r.interleaved,i===null?(e.next=e,vv(r)):(e.next=i.next,i.next=e),r.interleaved=e,li(t,n)}function Sd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iv(t,n)}}function U1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sh(t,e,n,r){var i=t.updateQueue;Ii=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(m=e,p=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=Ge({},h,m);break e;case 2:Ii=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xs|=o,t.lanes=o,t.memoizedState=h}}function W1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var aT=new sk.Component().refs;function d0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _f={isMounted:function(t){return(t=t._reactInternals)?go(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),i=Gi(t),s=ni(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hi(t,s,i),e!==null&&(hr(e,t,i,r),Sd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),i=Gi(t),s=ni(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hi(t,s,i),e!==null&&(hr(e,t,i,r),Sd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=Gi(t),i=ni(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hi(t,i,r),e!==null&&(hr(e,t,r,n),Sd(e,t,r))}};function H1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!sc(n,r)||!sc(i,s):!0}function lT(t,e,n){var r=!1,i=rs,s=e.contextType;return typeof s=="object"&&s!==null?s=Jn(s):(i=mn(e)?qs:Gt.current,r=e.contextTypes,s=(r=r!=null)?ga(t,i):rs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_f,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function q1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_f.enqueueReplaceState(e,e.state,null)}function h0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=aT,xv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jn(s):(s=mn(e)?qs:Gt.current,i.context=ga(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(d0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_f.enqueueReplaceState(i,i.state,null),sh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===aT&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Vu(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function G1(t){var e=t._init;return e(t._payload)}function cT(t){function e(v,g){if(t){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=Ki(v,g),v.index=0,v.sibling=null,v}function s(v,g,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,w,E){return g===null||g.tag!==6?(g=Tp(w,v.mode,E),g.return=v,g):(g=i(g,w),g.return=v,g)}function l(v,g,w,E){var S=w.type;return S===Bo?d(v,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ti&&G1(S)===g.type)?(E=i(g,w.props),E.ref=fl(v,g,w),E.return=v,E):(E=Ad(w.type,w.key,w.props,null,v.mode,E),E.ref=fl(v,g,w),E.return=v,E)}function c(v,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Ip(w,v.mode,E),g.return=v,g):(g=i(g,w.children||[]),g.return=v,g)}function d(v,g,w,E,S){return g===null||g.tag!==7?(g=zs(w,v.mode,E,S),g.return=v,g):(g=i(g,w),g.return=v,g)}function h(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Tp(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Pu:return w=Ad(g.type,g.key,g.props,null,v.mode,w),w.ref=fl(v,null,g),w.return=v,w;case $o:return g=Ip(g,v.mode,w),g.return=v,g;case Ti:var E=g._init;return h(v,E(g._payload),w)}if(Sl(g)||ll(g))return g=zs(g,v.mode,w,null),g.return=v,g;Vu(v,g)}return null}function m(v,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pu:return w.key===S?l(v,g,w,E):null;case $o:return w.key===S?c(v,g,w,E):null;case Ti:return S=w._init,m(v,g,S(w._payload),E)}if(Sl(w)||ll(w))return S!==null?null:d(v,g,w,E,null);Vu(v,w)}return null}function p(v,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(g,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Pu:return v=v.get(E.key===null?w:E.key)||null,l(g,v,E,S);case $o:return v=v.get(E.key===null?w:E.key)||null,c(g,v,E,S);case Ti:var T=E._init;return p(v,g,w,T(E._payload),S)}if(Sl(E)||ll(E))return v=v.get(w)||null,d(g,v,E,S,null);Vu(g,E)}return null}function y(v,g,w,E){for(var S=null,T=null,b=g,k=g=0,R=null;b!==null&&k<w.length;k++){b.index>k?(R=b,b=null):R=b.sibling;var O=m(v,b,w[k],E);if(O===null){b===null&&(b=R);break}t&&b&&O.alternate===null&&e(v,b),g=s(O,g,k),T===null?S=O:T.sibling=O,T=O,b=R}if(k===w.length)return n(v,b),Ue&&Ts(v,k),S;if(b===null){for(;k<w.length;k++)b=h(v,w[k],E),b!==null&&(g=s(b,g,k),T===null?S=b:T.sibling=b,T=b);return Ue&&Ts(v,k),S}for(b=r(v,b);k<w.length;k++)R=p(b,v,k,w[k],E),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?k:R.key),g=s(R,g,k),T===null?S=R:T.sibling=R,T=R);return t&&b.forEach(function(j){return e(v,j)}),Ue&&Ts(v,k),S}function x(v,g,w,E){var S=ll(w);if(typeof S!="function")throw Error(M(150));if(w=S.call(w),w==null)throw Error(M(151));for(var T=S=null,b=g,k=g=0,R=null,O=w.next();b!==null&&!O.done;k++,O=w.next()){b.index>k?(R=b,b=null):R=b.sibling;var j=m(v,b,O.value,E);if(j===null){b===null&&(b=R);break}t&&b&&j.alternate===null&&e(v,b),g=s(j,g,k),T===null?S=j:T.sibling=j,T=j,b=R}if(O.done)return n(v,b),Ue&&Ts(v,k),S;if(b===null){for(;!O.done;k++,O=w.next())O=h(v,O.value,E),O!==null&&(g=s(O,g,k),T===null?S=O:T.sibling=O,T=O);return Ue&&Ts(v,k),S}for(b=r(v,b);!O.done;k++,O=w.next())O=p(b,v,k,O.value,E),O!==null&&(t&&O.alternate!==null&&b.delete(O.key===null?k:O.key),g=s(O,g,k),T===null?S=O:T.sibling=O,T=O);return t&&b.forEach(function(K){return e(v,K)}),Ue&&Ts(v,k),S}function _(v,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Bo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Pu:e:{for(var S=w.key,T=g;T!==null;){if(T.key===S){if(S=w.type,S===Bo){if(T.tag===7){n(v,T.sibling),g=i(T,w.props.children),g.return=v,v=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ti&&G1(S)===T.type){n(v,T.sibling),g=i(T,w.props),g.ref=fl(v,T,w),g.return=v,v=g;break e}n(v,T);break}else e(v,T);T=T.sibling}w.type===Bo?(g=zs(w.props.children,v.mode,E,w.key),g.return=v,v=g):(E=Ad(w.type,w.key,w.props,null,v.mode,E),E.ref=fl(v,g,w),E.return=v,v=E)}return o(v);case $o:e:{for(T=w.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(v,g.sibling),g=i(g,w.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Ip(w,v.mode,E),g.return=v,v=g}return o(v);case Ti:return T=w._init,_(v,g,T(w._payload),E)}if(Sl(w))return y(v,g,w,E);if(ll(w))return x(v,g,w,E);Vu(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,w),g.return=v,v=g):(n(v,g),g=Tp(w,v.mode,E),g.return=v,v=g),o(v)):n(v,g)}return _}var va=cT(!0),uT=cT(!1),Yc={},Rr=ys(Yc),cc=ys(Yc),uc=ys(Yc);function Os(t){if(t===Yc)throw Error(M(174));return t}function wv(t,e){switch(je(uc,e),je(cc,t),je(Rr,Yc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wg(e,t)}$e(Rr),je(Rr,e)}function xa(){$e(Rr),$e(cc),$e(uc)}function dT(t){Os(uc.current);var e=Os(Rr.current),n=Wg(e,t.type);e!==n&&(je(cc,t),je(Rr,n))}function _v(t){cc.current===t&&($e(Rr),$e(cc))}var He=ys(0);function oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wp=[];function Ev(){for(var t=0;t<wp.length;t++)wp[t]._workInProgressVersionPrimary=null;wp.length=0}var bd=gi.ReactCurrentDispatcher,_p=gi.ReactCurrentBatchConfig,Ks=0,qe=null,yt=null,Et=null,ah=!1,Fl=!1,dc=0,$5=0;function Mt(){throw Error(M(321))}function Sv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function bv(t,e,n,r,i,s){if(Ks=s,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bd.current=t===null||t.memoizedState===null?U5:W5,t=n(r,i),Fl){s=0;do{if(Fl=!1,dc=0,25<=s)throw Error(M(301));s+=1,Et=yt=null,e.updateQueue=null,bd.current=H5,t=n(r,i)}while(Fl)}if(bd.current=lh,e=yt!==null&&yt.next!==null,Ks=0,Et=yt=qe=null,ah=!1,e)throw Error(M(300));return t}function kv(){var t=dc!==0;return dc=0,t}function xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?qe.memoizedState=Et=t:Et=Et.next=t,Et}function Zn(){if(yt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=Et===null?qe.memoizedState:Et.next;if(e!==null)Et=e,yt=t;else{if(t===null)throw Error(M(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Et===null?qe.memoizedState=Et=t:Et=Et.next=t}return Et}function hc(t,e){return typeof e=="function"?e(t):e}function Ep(t){var e=Zn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=yt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Ks&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,qe.lanes|=d,Xs|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,fr(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qe.lanes|=s,Xs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sp(t){var e=Zn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);fr(s,e.memoizedState)||(hn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hT(){}function fT(t,e){var n=qe,r=Zn(),i=e(),s=!fr(r.memoizedState,i);if(s&&(r.memoizedState=i,hn=!0),r=r.queue,Tv(gT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,fc(9,pT.bind(null,n,r,i,e),void 0,null),kt===null)throw Error(M(349));Ks&30||mT(n,e,i)}return i}function mT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pT(t,e,n,r){e.value=n,e.getSnapshot=r,yT(e)&&vT(t)}function gT(t,e,n){return n(function(){yT(e)&&vT(t)})}function yT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function vT(t){var e=li(t,1);e!==null&&hr(e,t,1,-1)}function K1(t){var e=xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:t},e.queue=t,t=t.dispatch=V5.bind(null,qe,t),[e.memoizedState,t]}function fc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xT(){return Zn().memoizedState}function kd(t,e,n,r){var i=xr();qe.flags|=t,i.memoizedState=fc(1|e,n,void 0,r===void 0?null:r)}function Ef(t,e,n,r){var i=Zn();r=r===void 0?null:r;var s=void 0;if(yt!==null){var o=yt.memoizedState;if(s=o.destroy,r!==null&&Sv(r,o.deps)){i.memoizedState=fc(e,n,s,r);return}}qe.flags|=t,i.memoizedState=fc(1|e,n,s,r)}function X1(t,e){return kd(8390656,8,t,e)}function Tv(t,e){return Ef(2048,8,t,e)}function wT(t,e){return Ef(4,2,t,e)}function _T(t,e){return Ef(4,4,t,e)}function ET(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ST(t,e,n){return n=n!=null?n.concat([t]):null,Ef(4,4,ET.bind(null,e,t),n)}function Iv(){}function bT(t,e){var n=Zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kT(t,e){var n=Zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function TT(t,e,n){return Ks&21?(fr(n,e)||(n=Ak(),qe.lanes|=n,Xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=n)}function B5(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=_p.transition;_p.transition={};try{t(!1),e()}finally{Te=n,_p.transition=r}}function IT(){return Zn().memoizedState}function z5(t,e,n){var r=Gi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CT(t))AT(e,n);else if(n=sT(t,e,n,r),n!==null){var i=nn();hr(n,t,r,i),RT(n,e,r)}}function V5(t,e,n){var r=Gi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CT(t))AT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,fr(a,o)){var l=e.interleaved;l===null?(i.next=i,vv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=sT(t,e,i,r),n!==null&&(i=nn(),hr(n,t,r,i),RT(n,e,r))}}function CT(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function AT(t,e){Fl=ah=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iv(t,n)}}var lh={readContext:Jn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},U5={readContext:Jn,useCallback:function(t,e){return xr().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:X1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kd(4194308,4,ET.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kd(4194308,4,t,e)},useInsertionEffect:function(t,e){return kd(4,2,t,e)},useMemo:function(t,e){var n=xr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=z5.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=xr();return t={current:t},e.memoizedState=t},useState:K1,useDebugValue:Iv,useDeferredValue:function(t){return xr().memoizedState=t},useTransition:function(){var t=K1(!1),e=t[0];return t=B5.bind(null,t[1]),xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,i=xr();if(Ue){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),kt===null)throw Error(M(349));Ks&30||mT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,X1(gT.bind(null,r,s,t),[t]),r.flags|=2048,fc(9,pT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=xr(),e=kt.identifierPrefix;if(Ue){var n=Qr,r=Xr;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W5={readContext:Jn,useCallback:bT,useContext:Jn,useEffect:Tv,useImperativeHandle:ST,useInsertionEffect:wT,useLayoutEffect:_T,useMemo:kT,useReducer:Ep,useRef:xT,useState:function(){return Ep(hc)},useDebugValue:Iv,useDeferredValue:function(t){var e=Zn();return TT(e,yt.memoizedState,t)},useTransition:function(){var t=Ep(hc)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:hT,useSyncExternalStore:fT,useId:IT,unstable_isNewReconciler:!1},H5={readContext:Jn,useCallback:bT,useContext:Jn,useEffect:Tv,useImperativeHandle:ST,useInsertionEffect:wT,useLayoutEffect:_T,useMemo:kT,useReducer:Sp,useRef:xT,useState:function(){return Sp(hc)},useDebugValue:Iv,useDeferredValue:function(t){var e=Zn();return yt===null?e.memoizedState=t:TT(e,yt.memoizedState,t)},useTransition:function(){var t=Sp(hc)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:hT,useSyncExternalStore:fT,useId:IT,unstable_isNewReconciler:!1};function wa(t,e){try{var n="",r=e;do n+=x4(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function f0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q5=typeof WeakMap=="function"?WeakMap:Map;function PT(t,e,n){n=ni(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uh||(uh=!0,S0=r),f0(t,e)},n}function NT(t,e,n){n=ni(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){f0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){f0(t,e),typeof r!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Q1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=o3.bind(null,t,e,n),e.then(t,t))}function Y1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function J1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ni(-1,1),e.tag=2,Hi(n,e,1))),n.lanes|=1),t)}var G5=gi.ReactCurrentOwner,hn=!1;function Jt(t,e,n,r){e.child=t===null?uT(e,null,n,r):va(e,t.child,n,r)}function Z1(t,e,n,r,i){n=n.render;var s=e.ref;return ia(e,i),r=bv(t,e,n,r,s,i),n=kv(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ci(t,e,i)):(Ue&&n&&hv(e),e.flags|=1,Jt(t,e,r,i),e.child)}function e_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,DT(t,e,s,r,i)):(t=Ad(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:sc,n(o,r)&&t.ref===e.ref)return ci(t,e,i)}return e.flags|=1,t=Ki(s,r),t.ref=e.ref,t.return=e,e.child=t}function DT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(sc(s,r)&&t.ref===e.ref)if(hn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(hn=!0);else return e.lanes=t.lanes,ci(t,e,i)}return m0(t,e,n,r,i)}function OT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Qo,Sn),Sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Qo,Sn),Sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,je(Qo,Sn),Sn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,je(Qo,Sn),Sn|=r;return Jt(t,e,i,n),e.child}function jT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function m0(t,e,n,r,i){var s=mn(n)?qs:Gt.current;return s=ga(e,s),ia(e,i),n=bv(t,e,n,r,s,i),r=kv(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ci(t,e,i)):(Ue&&r&&hv(e),e.flags|=1,Jt(t,e,n,i),e.child)}function t_(t,e,n,r,i){if(mn(n)){var s=!0;eh(e)}else s=!1;if(ia(e,i),e.stateNode===null)Td(t,e),lT(e,n,r),h0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Jn(c):(c=mn(n)?qs:Gt.current,c=ga(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&q1(e,o,r,c),Ii=!1;var m=e.memoizedState;o.state=m,sh(e,r,o,i),l=e.memoizedState,a!==r||m!==l||fn.current||Ii?(typeof d=="function"&&(d0(e,n,d,r),l=e.memoizedState),(a=Ii||H1(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:rr(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jn(l):(l=mn(n)?qs:Gt.current,l=ga(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&q1(e,o,r,l),Ii=!1,m=e.memoizedState,o.state=m,sh(e,r,o,i);var y=e.memoizedState;a!==h||m!==y||fn.current||Ii?(typeof p=="function"&&(d0(e,n,p,r),y=e.memoizedState),(c=Ii||H1(e,n,c,r,m,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return p0(t,e,n,r,s,i)}function p0(t,e,n,r,i,s){jT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&B1(e,n,!1),ci(t,e,s);r=e.stateNode,G5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=va(e,t.child,null,s),e.child=va(e,null,a,s)):Jt(t,e,a,s),e.memoizedState=r.state,i&&B1(e,n,!0),e.child}function MT(t){var e=t.stateNode;e.pendingContext?$1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$1(t,e.context,!1),wv(t,e.containerInfo)}function n_(t,e,n,r,i){return ya(),mv(i),e.flags|=256,Jt(t,e,n,r),e.child}var g0={dehydrated:null,treeContext:null,retryLane:0};function y0(t){return{baseLanes:t,cachePool:null,transitions:null}}function LT(t,e,n){var r=e.pendingProps,i=He.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(He,i&1),t===null)return c0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kf(o,r,0,null),t=zs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=y0(n),e.memoizedState=g0,t):Cv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return K5(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ki(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ki(a,s):(s=zs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?y0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=g0,r}return s=t.child,t=s.sibling,r=Ki(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cv(t,e){return e=kf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uu(t,e,n,r){return r!==null&&mv(r),va(e,t.child,null,n),t=Cv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function K5(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=bp(Error(M(422))),Uu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=kf({mode:"visible",children:r.children},i,0,null),s=zs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&va(e,t.child,null,o),e.child.memoizedState=y0(o),e.memoizedState=g0,s);if(!(e.mode&1))return Uu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(M(419)),r=bp(s,r,void 0),Uu(t,e,o,r)}if(a=(o&t.childLanes)!==0,hn||a){if(r=kt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,li(t,i),hr(r,t,i,-1))}return Ov(),r=bp(Error(M(421))),Uu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=a3.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,kn=Wi(i.nextSibling),An=e,Ue=!0,or=null,t!==null&&(Wn[Hn++]=Xr,Wn[Hn++]=Qr,Wn[Hn++]=Gs,Xr=t.id,Qr=t.overflow,Gs=e),e=Cv(e,r.children),e.flags|=4096,e)}function r_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),u0(t.return,e,n)}function kp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function FT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jt(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r_(t,n,e);else if(t.tag===19)r_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(He,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&oh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),kp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&oh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}kp(e,!0,n,null,s);break;case"together":kp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function X5(t,e,n){switch(e.tag){case 3:MT(e),ya();break;case 5:dT(e);break;case 1:mn(e.type)&&eh(e);break;case 4:wv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(rh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?LT(t,e,n):(je(He,He.current&1),t=ci(t,e,n),t!==null?t.sibling:null);je(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,OT(t,e,n)}return ci(t,e,n)}var $T,v0,BT,zT;$T=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};v0=function(){};BT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Os(Rr.current);var s=null;switch(n){case"input":i=Bg(t,i),r=Bg(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=Ug(t,i),r=Ug(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jd)}Hg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Me("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zT=function(t,e,n,r){n!==r&&(e.flags|=4)};function ml(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q5(t,e,n){var r=e.pendingProps;switch(fv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return mn(e.type)&&Zd(),Lt(e),null;case 3:return r=e.stateNode,xa(),$e(fn),$e(Gt),Ev(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,or!==null&&(T0(or),or=null))),v0(t,e),Lt(e),null;case 5:_v(e);var i=Os(uc.current);if(n=e.type,t!==null&&e.stateNode!=null)BT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Lt(e),null}if(t=Os(Rr.current),zu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[_r]=e,r[lc]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<kl.length;i++)Me(kl[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":h1(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":m1(r,s),Me("invalid",r)}Hg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bu(r.textContent,a,t),i=["children",""+a]):Jl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":Nu(r),f1(r,s,!0);break;case"textarea":Nu(r),p1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Jd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_r]=e,t[lc]=r,$T(t,e,!1,!1),e.stateNode=t;e:{switch(o=qg(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<kl.length;i++)Me(kl[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":h1(t,r),i=Bg(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Me("invalid",t);break;case"textarea":m1(t,r),i=Ug(t,r),Me("invalid",t);break;default:i=r}Hg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?yk(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pk(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zl(t,l):typeof l=="number"&&Zl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Me("scroll",t):l!=null&&Jy(t,s,l,o))}switch(n){case"input":Nu(t),f1(t,r,!1);break;case"textarea":Nu(t),p1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ns(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ea(t,!!r.multiple,s,!1):r.defaultValue!=null&&ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Jd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)zT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Os(uc.current),Os(Rr.current),zu(e)){if(r=e.stateNode,n=e.memoizedProps,r[_r]=e,(s=r.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:Bu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_r]=e,e.stateNode=r}return Lt(e),null;case 13:if($e(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&kn!==null&&e.mode&1&&!(e.flags&128))iT(),ya(),e.flags|=98560,s=!1;else if(s=zu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[_r]=e}else ya(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),s=!1}else or!==null&&(T0(or),or=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?vt===0&&(vt=3):Ov())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return xa(),v0(t,e),t===null&&oc(e.stateNode.containerInfo),Lt(e),null;case 10:return yv(e.type._context),Lt(e),null;case 17:return mn(e.type)&&Zd(),Lt(e),null;case 19:if($e(He),s=e.memoizedState,s===null)return Lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ml(s,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=oh(t),o!==null){for(e.flags|=128,ml(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(He,He.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>_a&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304)}else{if(!r)if(t=oh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ml(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return Lt(e),null}else 2*rt()-s.renderingStartTime>_a&&n!==1073741824&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=He.current,je(He,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Dv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Sn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Y5(t,e){switch(fv(e),e.tag){case 1:return mn(e.type)&&Zd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xa(),$e(fn),$e(Gt),Ev(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _v(e),null;case 13:if($e(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));ya()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(He),null;case 4:return xa(),null;case 10:return yv(e.type._context),null;case 22:case 23:return Dv(),null;case 24:return null;default:return null}}var Wu=!1,zt=!1,J5=typeof WeakSet=="function"?WeakSet:Set,U=null;function Xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function x0(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var i_=!1;function Z5(t,e){if(n0=Xd,t=Hk(),dv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(r0={focusedElem:t,selectionRange:n},Xd=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,_=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:rr(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(E){Qe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return y=i_,i_=!1,y}function $l(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&x0(e,n,s)}i=i.next}while(i!==r)}}function Sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function w0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VT(t){var e=t.alternate;e!==null&&(t.alternate=null,VT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[lc],delete e[o0],delete e[j5],delete e[M5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function UT(t){return t.tag===5||t.tag===3||t.tag===4}function s_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||UT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jd));else if(r!==4&&(t=t.child,t!==null))for(_0(t,e,n),t=t.sibling;t!==null;)_0(t,e,n),t=t.sibling}function E0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(E0(t,e,n),t=t.sibling;t!==null;)E0(t,e,n),t=t.sibling}var At=null,ir=!1;function _i(t,e,n){for(n=n.child;n!==null;)WT(t,e,n),n=n.sibling}function WT(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(pf,n)}catch{}switch(n.tag){case 5:zt||Xo(n,e);case 6:var r=At,i=ir;At=null,_i(t,e,n),At=r,ir=i,At!==null&&(ir?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(ir?(t=At,n=n.stateNode,t.nodeType===8?vp(t.parentNode,n):t.nodeType===1&&vp(t,n),rc(t)):vp(At,n.stateNode));break;case 4:r=At,i=ir,At=n.stateNode.containerInfo,ir=!0,_i(t,e,n),At=r,ir=i;break;case 0:case 11:case 14:case 15:if(!zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&x0(n,e,o),i=i.next}while(i!==r)}_i(t,e,n);break;case 1:if(!zt&&(Xo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}_i(t,e,n);break;case 21:_i(t,e,n);break;case 22:n.mode&1?(zt=(r=zt)||n.memoizedState!==null,_i(t,e,n),zt=r):_i(t,e,n);break;default:_i(t,e,n)}}function o_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new J5),e.forEach(function(r){var i=l3.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:At=a.stateNode,ir=!1;break e;case 3:At=a.stateNode.containerInfo,ir=!0;break e;case 4:At=a.stateNode.containerInfo,ir=!0;break e}a=a.return}if(At===null)throw Error(M(160));WT(s,o,i),At=null,ir=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Qe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HT(e,t),e=e.sibling}function HT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tr(e,t),gr(t),r&4){try{$l(3,t,t.return),Sf(3,t)}catch(x){Qe(t,t.return,x)}try{$l(5,t,t.return)}catch(x){Qe(t,t.return,x)}}break;case 1:tr(e,t),gr(t),r&512&&n!==null&&Xo(n,n.return);break;case 5:if(tr(e,t),gr(t),r&512&&n!==null&&Xo(n,n.return),t.flags&32){var i=t.stateNode;try{Zl(i,"")}catch(x){Qe(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&hk(i,s),qg(a,o);var c=qg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?yk(i,h):d==="dangerouslySetInnerHTML"?pk(i,h):d==="children"?Zl(i,h):Jy(i,d,h,c)}switch(a){case"input":zg(i,s);break;case"textarea":fk(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ea(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?ea(i,!!s.multiple,s.defaultValue,!0):ea(i,!!s.multiple,s.multiple?[]:"",!1))}i[lc]=s}catch(x){Qe(t,t.return,x)}}break;case 6:if(tr(e,t),gr(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Qe(t,t.return,x)}}break;case 3:if(tr(e,t),gr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rc(e.containerInfo)}catch(x){Qe(t,t.return,x)}break;case 4:tr(e,t),gr(t);break;case 13:tr(e,t),gr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pv=rt())),r&4&&o_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(zt=(c=zt)||d,tr(e,t),zt=c):tr(e,t),gr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(U=t,d=t.child;d!==null;){for(h=U=d;U!==null;){switch(m=U,p=m.child,m.tag){case 0:case 11:case 14:case 15:$l(4,m,m.return);break;case 1:Xo(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Qe(r,n,x)}}break;case 5:Xo(m,m.return);break;case 22:if(m.memoizedState!==null){l_(h);continue}}p!==null?(p.return=m,U=p):l_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gk("display",o))}catch(x){Qe(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Qe(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tr(e,t),gr(t),r&4&&o_(t);break;case 21:break;default:tr(e,t),gr(t)}}function gr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(UT(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zl(i,""),r.flags&=-33);var s=s_(t);E0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=s_(t);_0(t,a,o);break;default:throw Error(M(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function e3(t,e,n){U=t,qT(t)}function qT(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zt;a=Wu;var c=zt;if(Wu=o,(zt=l)&&!c)for(U=i;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?c_(i):l!==null?(l.return=o,U=l):c_(i);for(;s!==null;)U=s,qT(s),s=s.sibling;U=i,Wu=a,zt=c}a_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):a_(t)}}function a_(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||Sf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&W1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}W1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&rc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}zt||e.flags&512&&w0(e)}catch(m){Qe(e,e.return,m)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function l_(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function c_(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sf(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Qe(e,i,l)}}var s=e.return;try{w0(e)}catch(l){Qe(e,s,l)}break;case 5:var o=e.return;try{w0(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var t3=Math.ceil,ch=gi.ReactCurrentDispatcher,Av=gi.ReactCurrentOwner,Xn=gi.ReactCurrentBatchConfig,_e=0,kt=null,dt=null,Dt=0,Sn=0,Qo=ys(0),vt=0,mc=null,Xs=0,bf=0,Rv=0,Bl=null,un=null,Pv=0,_a=1/0,qr=null,uh=!1,S0=null,qi=null,Hu=!1,Li=null,dh=0,zl=0,b0=null,Id=-1,Cd=0;function nn(){return _e&6?rt():Id!==-1?Id:Id=rt()}function Gi(t){return t.mode&1?_e&2&&Dt!==0?Dt&-Dt:F5.transition!==null?(Cd===0&&(Cd=Ak()),Cd):(t=Te,t!==0||(t=window.event,t=t===void 0?16:Mk(t.type)),t):1}function hr(t,e,n,r){if(50<zl)throw zl=0,b0=null,Error(M(185));Kc(t,n,r),(!(_e&2)||t!==kt)&&(t===kt&&(!(_e&2)&&(bf|=n),vt===4&&Ai(t,Dt)),pn(t,r),n===1&&_e===0&&!(e.mode&1)&&(_a=rt()+500,wf&&vs()))}function pn(t,e){var n=t.callbackNode;F4(t,e);var r=Kd(t,t===kt?Dt:0);if(r===0)n!==null&&v1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&v1(n),e===1)t.tag===0?L5(u_.bind(null,t)):tT(u_.bind(null,t)),D5(function(){!(_e&6)&&vs()}),n=null;else{switch(Rk(r)){case 1:n=rv;break;case 4:n=Ik;break;case 16:n=Gd;break;case 536870912:n=Ck;break;default:n=Gd}n=eI(n,GT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function GT(t,e){if(Id=-1,Cd=0,_e&6)throw Error(M(327));var n=t.callbackNode;if(sa()&&t.callbackNode!==n)return null;var r=Kd(t,t===kt?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hh(t,r);else{e=r;var i=_e;_e|=2;var s=XT();(kt!==t||Dt!==e)&&(qr=null,_a=rt()+500,Bs(t,e));do try{i3();break}catch(a){KT(t,a)}while(1);gv(),ch.current=s,_e=i,dt!==null?e=0:(kt=null,Dt=0,e=vt)}if(e!==0){if(e===2&&(i=Yg(t),i!==0&&(r=i,e=k0(t,i))),e===1)throw n=mc,Bs(t,0),Ai(t,r),pn(t,rt()),n;if(e===6)Ai(t,r);else{if(i=t.current.alternate,!(r&30)&&!n3(i)&&(e=hh(t,r),e===2&&(s=Yg(t),s!==0&&(r=s,e=k0(t,s))),e===1))throw n=mc,Bs(t,0),Ai(t,r),pn(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Is(t,un,qr);break;case 3:if(Ai(t,r),(r&130023424)===r&&(e=Pv+500-rt(),10<e)){if(Kd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=s0(Is.bind(null,t,un,qr),e);break}Is(t,un,qr);break;case 4:if(Ai(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-dr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*t3(r/1960))-r,10<r){t.timeoutHandle=s0(Is.bind(null,t,un,qr),r);break}Is(t,un,qr);break;case 5:Is(t,un,qr);break;default:throw Error(M(329))}}}return pn(t,rt()),t.callbackNode===n?GT.bind(null,t):null}function k0(t,e){var n=Bl;return t.current.memoizedState.isDehydrated&&(Bs(t,e).flags|=256),t=hh(t,e),t!==2&&(e=un,un=n,e!==null&&T0(e)),t}function T0(t){un===null?un=t:un.push.apply(un,t)}function n3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!fr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ai(t,e){for(e&=~Rv,e&=~bf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dr(e),r=1<<n;t[n]=-1,e&=~r}}function u_(t){if(_e&6)throw Error(M(327));sa();var e=Kd(t,0);if(!(e&1))return pn(t,rt()),null;var n=hh(t,e);if(t.tag!==0&&n===2){var r=Yg(t);r!==0&&(e=r,n=k0(t,r))}if(n===1)throw n=mc,Bs(t,0),Ai(t,e),pn(t,rt()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Is(t,un,qr),pn(t,rt()),null}function Nv(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(_a=rt()+500,wf&&vs())}}function Qs(t){Li!==null&&Li.tag===0&&!(_e&6)&&sa();var e=_e;_e|=1;var n=Xn.transition,r=Te;try{if(Xn.transition=null,Te=1,t)return t()}finally{Te=r,Xn.transition=n,_e=e,!(_e&6)&&vs()}}function Dv(){Sn=Qo.current,$e(Qo)}function Bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,N5(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(fv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zd();break;case 3:xa(),$e(fn),$e(Gt),Ev();break;case 5:_v(r);break;case 4:xa();break;case 13:$e(He);break;case 19:$e(He);break;case 10:yv(r.type._context);break;case 22:case 23:Dv()}n=n.return}if(kt=t,dt=t=Ki(t.current,null),Dt=Sn=e,vt=0,mc=null,Rv=bf=Xs=0,un=Bl=null,Ds!==null){for(e=0;e<Ds.length;e++)if(n=Ds[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ds=null}return t}function KT(t,e){do{var n=dt;try{if(gv(),bd.current=lh,ah){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ah=!1}if(Ks=0,Et=yt=qe=null,Fl=!1,dc=0,Av.current=null,n===null||n.return===null){vt=1,mc=e,dt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Y1(o);if(p!==null){p.flags&=-257,J1(p,o,a,s,e),p.mode&1&&Q1(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){Q1(s,c,e),Ov();break e}l=Error(M(426))}}else if(Ue&&a.mode&1){var _=Y1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),J1(_,o,a,s,e),mv(wa(l,a));break e}}s=l=wa(l,a),vt!==4&&(vt=2),Bl===null?Bl=[s]:Bl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=PT(s,l,e);U1(s,v);break e;case 1:a=l;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qi===null||!qi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=NT(s,a,e);U1(s,E);break e}}s=s.return}while(s!==null)}YT(n)}catch(S){e=S,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(1)}function XT(){var t=ch.current;return ch.current=lh,t===null?lh:t}function Ov(){(vt===0||vt===3||vt===2)&&(vt=4),kt===null||!(Xs&268435455)&&!(bf&268435455)||Ai(kt,Dt)}function hh(t,e){var n=_e;_e|=2;var r=XT();(kt!==t||Dt!==e)&&(qr=null,Bs(t,e));do try{r3();break}catch(i){KT(t,i)}while(1);if(gv(),_e=n,ch.current=r,dt!==null)throw Error(M(261));return kt=null,Dt=0,vt}function r3(){for(;dt!==null;)QT(dt)}function i3(){for(;dt!==null&&!A4();)QT(dt)}function QT(t){var e=ZT(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?YT(t):dt=e,Av.current=null}function YT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Y5(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,dt=null;return}}else if(n=Q5(n,e,Sn),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);vt===0&&(vt=5)}function Is(t,e,n){var r=Te,i=Xn.transition;try{Xn.transition=null,Te=1,s3(t,e,n,r)}finally{Xn.transition=i,Te=r}return null}function s3(t,e,n,r){do sa();while(Li!==null);if(_e&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($4(t,s),t===kt&&(dt=kt=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hu||(Hu=!0,eI(Gd,function(){return sa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xn.transition,Xn.transition=null;var o=Te;Te=1;var a=_e;_e|=4,Av.current=null,Z5(t,n),HT(n,t),k5(r0),Xd=!!n0,r0=n0=null,t.current=n,e3(n),R4(),_e=a,Te=o,Xn.transition=s}else t.current=n;if(Hu&&(Hu=!1,Li=t,dh=i),s=t.pendingLanes,s===0&&(qi=null),D4(n.stateNode),pn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uh)throw uh=!1,t=S0,S0=null,t;return dh&1&&t.tag!==0&&sa(),s=t.pendingLanes,s&1?t===b0?zl++:(zl=0,b0=t):zl=0,vs(),null}function sa(){if(Li!==null){var t=Rk(dh),e=Xn.transition,n=Te;try{if(Xn.transition=null,Te=16>t?16:t,Li===null)var r=!1;else{if(t=Li,Li=null,dh=0,_e&6)throw Error(M(331));var i=_e;for(_e|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(U=c;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:$l(8,d,s)}var h=d.child;if(h!==null)h.return=d,U=h;else for(;U!==null;){d=U;var m=d.sibling,p=d.return;if(VT(d),d===c){U=null;break}if(m!==null){m.return=p,U=m;break}U=p}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$l(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,U=v;break e}U=s.return}}var g=t.current;for(U=g;U!==null;){o=U;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,U=w;else e:for(o=g;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sf(9,a)}}catch(S){Qe(a,a.return,S)}if(a===o){U=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,U=E;break e}U=a.return}}if(_e=i,vs(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(pf,t)}catch{}r=!0}return r}finally{Te=n,Xn.transition=e}}return!1}function d_(t,e,n){e=wa(n,e),e=PT(t,e,1),t=Hi(t,e,1),e=nn(),t!==null&&(Kc(t,1,e),pn(t,e))}function Qe(t,e,n){if(t.tag===3)d_(t,t,n);else for(;e!==null;){if(e.tag===3){d_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qi===null||!qi.has(r))){t=wa(n,t),t=NT(e,t,1),e=Hi(e,t,1),t=nn(),e!==null&&(Kc(e,1,t),pn(e,t));break}}e=e.return}}function o3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Dt&n)===n&&(vt===4||vt===3&&(Dt&130023424)===Dt&&500>rt()-Pv?Bs(t,0):Rv|=n),pn(t,e)}function JT(t,e){e===0&&(t.mode&1?(e=ju,ju<<=1,!(ju&130023424)&&(ju=4194304)):e=1);var n=nn();t=li(t,e),t!==null&&(Kc(t,e,n),pn(t,n))}function a3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JT(t,n)}function l3(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),JT(t,n)}var ZT;ZT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hn=!1,X5(t,e,n);hn=!!(t.flags&131072)}else hn=!1,Ue&&e.flags&1048576&&nT(e,nh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Td(t,e),t=e.pendingProps;var i=ga(e,Gt.current);ia(e,n),i=bv(null,e,r,t,i,n);var s=kv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(s=!0,eh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xv(e),i.updater=_f,e.stateNode=i,i._reactInternals=e,h0(e,r,t,n),e=p0(null,e,r,!0,s,n)):(e.tag=0,Ue&&s&&hv(e),Jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Td(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=u3(r),t=rr(r,t),i){case 0:e=m0(null,e,r,t,n);break e;case 1:e=t_(null,e,r,t,n);break e;case 11:e=Z1(null,e,r,t,n);break e;case 14:e=e_(null,e,r,rr(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rr(r,i),m0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rr(r,i),t_(t,e,r,i,n);case 3:e:{if(MT(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,oT(t,e),sh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wa(Error(M(423)),e),e=n_(t,e,r,n,i);break e}else if(r!==i){i=wa(Error(M(424)),e),e=n_(t,e,r,n,i);break e}else for(kn=Wi(e.stateNode.containerInfo.firstChild),An=e,Ue=!0,or=null,n=uT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ya(),r===i){e=ci(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return dT(e),t===null&&c0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,i0(r,i)?o=null:s!==null&&i0(r,s)&&(e.flags|=32),jT(t,e),Jt(t,e,o,n),e.child;case 6:return t===null&&c0(e),null;case 13:return LT(t,e,n);case 4:return wv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=va(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rr(r,i),Z1(t,e,r,i,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,je(rh,r._currentValue),r._currentValue=o,s!==null)if(fr(s.value,o)){if(s.children===i.children&&!fn.current){e=ci(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ni(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),u0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(M(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),u0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ia(e,n),i=Jn(i),r=r(i),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,i=rr(r,e.pendingProps),i=rr(r.type,i),e_(t,e,r,i,n);case 15:return DT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rr(r,i),Td(t,e),e.tag=1,mn(r)?(t=!0,eh(e)):t=!1,ia(e,n),lT(e,r,i),h0(e,r,i,n),p0(null,e,r,!0,t,n);case 19:return FT(t,e,n);case 22:return OT(t,e,n)}throw Error(M(156,e.tag))};function eI(t,e){return Tk(t,e)}function c3(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new c3(t,e,n,r)}function jv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function u3(t){if(typeof t=="function")return jv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ev)return 11;if(t===tv)return 14}return 2}function Ki(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ad(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")jv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bo:return zs(n.children,i,s,e);case Zy:o=8,i|=8;break;case Mg:return t=Kn(12,n,e,i|2),t.elementType=Mg,t.lanes=s,t;case Lg:return t=Kn(13,n,e,i),t.elementType=Lg,t.lanes=s,t;case Fg:return t=Kn(19,n,e,i),t.elementType=Fg,t.lanes=s,t;case ck:return kf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ak:o=10;break e;case lk:o=9;break e;case ev:o=11;break e;case tv:o=14;break e;case Ti:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zs(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function kf(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=ck,t.lanes=n,t.stateNode={isHidden:!1},t}function Tp(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function Ip(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function d3(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ap(0),this.expirationTimes=ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ap(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mv(t,e,n,r,i,s,o,a,l){return t=new d3(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xv(s),t}function h3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tI(t){if(!t)return rs;t=t._reactInternals;e:{if(go(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(mn(n))return eT(t,n,e)}return e}function nI(t,e,n,r,i,s,o,a,l){return t=Mv(n,r,!0,t,i,s,o,a,l),t.context=tI(null),n=t.current,r=nn(),i=Gi(n),s=ni(r,i),s.callback=e??null,Hi(n,s,i),t.current.lanes=i,Kc(t,i,r),pn(t,r),t}function Tf(t,e,n,r){var i=e.current,s=nn(),o=Gi(i);return n=tI(n),e.context===null?e.context=n:e.pendingContext=n,e=ni(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hi(i,e,o),t!==null&&(hr(t,i,o,s),Sd(t,i,o)),o}function fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function h_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lv(t,e){h_(t,e),(t=t.alternate)&&h_(t,e)}function f3(){return null}var rI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fv(t){this._internalRoot=t}If.prototype.render=Fv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Tf(t,e,null,null)};If.prototype.unmount=Fv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){Tf(null,t,null,null)}),e[ai]=null}};function If(t){this._internalRoot=t}If.prototype.unstable_scheduleHydration=function(t){if(t){var e=Dk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ci.length&&e!==0&&e<Ci[n].priority;n++);Ci.splice(n,0,t),n===0&&jk(t)}};function $v(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function f_(){}function m3(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=fh(o);s.call(c)}}var o=nI(e,r,t,0,null,!1,!1,"",f_);return t._reactRootContainer=o,t[ai]=o.current,oc(t.nodeType===8?t.parentNode:t),Qs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=fh(l);a.call(c)}}var l=Mv(t,0,!1,null,null,!1,!1,"",f_);return t._reactRootContainer=l,t[ai]=l.current,oc(t.nodeType===8?t.parentNode:t),Qs(function(){Tf(e,l,n,r)}),l}function Af(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=fh(o);a.call(l)}}Tf(e,o,t,i)}else o=m3(n,e,t,i,r);return fh(o)}Pk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bl(e.pendingLanes);n!==0&&(iv(e,n|1),pn(e,rt()),!(_e&6)&&(_a=rt()+500,vs()))}break;case 13:Qs(function(){var r=li(t,1);if(r!==null){var i=nn();hr(r,t,1,i)}}),Lv(t,1)}};sv=function(t){if(t.tag===13){var e=li(t,134217728);if(e!==null){var n=nn();hr(e,t,134217728,n)}Lv(t,134217728)}};Nk=function(t){if(t.tag===13){var e=Gi(t),n=li(t,e);if(n!==null){var r=nn();hr(n,t,e,r)}Lv(t,e)}};Dk=function(){return Te};Ok=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Kg=function(t,e,n){switch(e){case"input":if(zg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xf(r);if(!i)throw Error(M(90));dk(r),zg(r,i)}}}break;case"textarea":fk(t,n);break;case"select":e=n.value,e!=null&&ea(t,!!n.multiple,e,!1)}};wk=Nv;_k=Qs;var p3={usingClientEntryPoint:!1,Events:[Qc,Wo,xf,vk,xk,Nv]},pl={findFiberByHostInstance:Ns,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},g3={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bk(t),t===null?null:t.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||f3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{pf=qu.inject(g3),Ar=qu}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p3;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$v(e))throw Error(M(200));return h3(t,e,null,n)};Ln.createRoot=function(t,e){if(!$v(t))throw Error(M(299));var n=!1,r="",i=rI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mv(t,1,!1,null,null,n,!1,r,i),t[ai]=e.current,oc(t.nodeType===8?t.parentNode:t),new Fv(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=bk(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return Qs(t)};Ln.hydrate=function(t,e,n){if(!Cf(e))throw Error(M(200));return Af(null,t,e,!0,n)};Ln.hydrateRoot=function(t,e,n){if(!$v(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nI(e,null,t,1,n??null,i,!1,s,o),t[ai]=e.current,oc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new If(e)};Ln.render=function(t,e,n){if(!Cf(e))throw Error(M(200));return Af(null,t,e,!1,n)};Ln.unmountComponentAtNode=function(t){if(!Cf(t))throw Error(M(40));return t._reactRootContainer?(Qs(function(){Af(null,null,t,!1,function(){t._reactRootContainer=null,t[ai]=null})}),!0):!1};Ln.unstable_batchedUpdates=Nv;Ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cf(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Af(t,e,n,!1,r)};Ln.version="18.2.0-next-9e3b772b8-20220608";function iI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iI)}catch(t){console.error(t)}}iI(),nk.exports=Ln;var qa=nk.exports,m_=qa;Og.createRoot=m_.createRoot,Og.hydrateRoot=m_.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ea.apply(this,arguments)}var Fi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fi||(Fi={}));const p_="popstate";function y3(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=yo(i.location.hash.substr(1));return I0("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:mh(s))}function r(i,s){Rf(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return x3(e,n,r,t)}function ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v3(){return Math.random().toString(36).substr(2,8)}function g_(t,e){return{usr:t.state,key:t.key,idx:e}}function I0(t,e,n,r){return n===void 0&&(n=null),Ea({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?yo(e):e,{state:n,key:e&&e.key||r||v3()})}function mh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function x3(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Fi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ea({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Fi.Pop;let _=d(),v=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:v})}function m(_,v){a=Fi.Push;let g=I0(x.location,_,v);n&&n(g,_),c=d()+1;let w=g_(g,c),E=x.createHref(g);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}s&&l&&l({action:a,location:x.location,delta:1})}function p(_,v){a=Fi.Replace;let g=I0(x.location,_,v);n&&n(g,_),c=d();let w=g_(g,c),E=x.createHref(g);o.replaceState(w,"",E),s&&l&&l({action:a,location:x.location,delta:0})}function y(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof _=="string"?_:mh(_);return ot(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let x={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(p_,h),l=_,()=>{i.removeEventListener(p_,h),l=null}},createHref(_){return e(i,_)},createURL:y,encodeLocation(_){let v=y(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(_){return o.go(_)}};return x}var y_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(y_||(y_={}));function w3(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?yo(e):e,i=Bv(r.pathname||"/",n);if(i==null)return null;let s=sI(t);_3(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=R3(s[a],D3(i));return o}function sI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ot(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Xi([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(ot(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),sI(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:C3(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of oI(s.path))i(s,o,l)}),e}function oI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=oI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function _3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:A3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const E3=/^:\w+$/,S3=3,b3=2,k3=1,T3=10,I3=-2,v_=t=>t==="*";function C3(t,e){let n=t.split("/"),r=n.length;return n.some(v_)&&(r+=I3),e&&(r+=b3),n.filter(i=>!v_(i)).reduce((i,s)=>i+(E3.test(s)?S3:s===""?k3:T3),r)}function A3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function R3(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=P3({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;s.push({params:r,pathname:Xi([i,d.pathname]),pathnameBase:L3(Xi([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Xi([i,d.pathnameBase]))}return s}function P3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=N3(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let m=a[h]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return c[d]=O3(a[h]||"",d),c},{}),pathname:s,pathnameBase:o,pattern:t}}function N3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function D3(t){try{return decodeURI(t)}catch(e){return Rf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function O3(t,e){try{return decodeURIComponent(t)}catch(n){return Rf(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Bv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function j3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?yo(t):t;return{pathname:n?n.startsWith("/")?n:M3(n,e):e,search:F3(r),hash:$3(i)}}function M3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Cp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Vv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=yo(t):(i=Ea({},t),ot(!i.pathname||!i.pathname.includes("?"),Cp("?","pathname","search",i)),ot(!i.pathname||!i.pathname.includes("#"),Cp("#","pathname","hash",i)),ot(!i.search||!i.search.includes("#"),Cp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=j3(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Xi=t=>t.join("/").replace(/\/\/+/g,"/"),L3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),F3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,B3=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",e),new Response(null,Ea({},r,{headers:i}))};function z3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aI=["post","put","patch","delete"];new Set(aI);const V3=["get",...aI];new Set(V3);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ph.apply(this,arguments)}const Uv=f.createContext(null),U3=f.createContext(null),Ga=f.createContext(null),Pf=f.createContext(null),Br=f.createContext({outlet:null,matches:[],isDataRoute:!1}),lI=f.createContext(null);function W3(t,e){let{relative:n}=e===void 0?{}:e;Ka()||ot(!1);let{basename:r,navigator:i}=f.useContext(Ga),{hash:s,pathname:o,search:a}=uI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Xi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ka(){return f.useContext(Pf)!=null}function $n(){return Ka()||ot(!1),f.useContext(Pf).location}function cI(t){f.useContext(Ga).static||f.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=f.useContext(Br);return t?sD():H3()}function H3(){Ka()||ot(!1);let t=f.useContext(Uv),{basename:e,navigator:n}=f.useContext(Ga),{matches:r}=f.useContext(Br),{pathname:i}=$n(),s=JSON.stringify(zv(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return cI(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Vv(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Xi([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,i,t])}const q3=f.createContext(null);function G3(t){let e=f.useContext(Br).outlet;return e&&f.createElement(q3.Provider,{value:t},e)}function Nf(){let{matches:t}=f.useContext(Br),e=t[t.length-1];return e?e.params:{}}function uI(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(Br),{pathname:i}=$n(),s=JSON.stringify(zv(r).map(o=>o.pathnameBase));return f.useMemo(()=>Vv(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function K3(t,e){return X3(t,e)}function X3(t,e,n){Ka()||ot(!1);let{navigator:r}=f.useContext(Ga),{matches:i}=f.useContext(Br),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=$n(),c;if(e){var d;let x=typeof e=="string"?yo(e):e;a==="/"||(d=x.pathname)!=null&&d.startsWith(a)||ot(!1),c=x}else c=l;let h=c.pathname||"/",m=a==="/"?h:h.slice(a.length)||"/",p=w3(t,{pathname:m}),y=eD(p&&p.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Xi([a,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?a:Xi([a,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n);return e&&y?f.createElement(Pf.Provider,{value:{location:ph({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Fi.Pop}},y):y}function Q3(){let t=iD(),e=z3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:i},n):null,s)}const Y3=f.createElement(Q3,null);class J3 extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(Br.Provider,{value:this.props.routeContext},f.createElement(lI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z3(t){let{routeContext:e,match:n,children:r}=t,i=f.useContext(Uv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(Br.Provider,{value:e},r)}function eD(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||ot(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||Y3);let m=e.concat(s.slice(0,c+1)),p=()=>{let y;return d?y=h:l.route.Component?y=f.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,f.createElement(Z3,{match:l,routeContext:{outlet:a,matches:m,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(J3,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var C0;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(C0||(C0={}));var pc;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(pc||(pc={}));function tD(t){let e=f.useContext(Uv);return e||ot(!1),e}function nD(t){let e=f.useContext(U3);return e||ot(!1),e}function rD(t){let e=f.useContext(Br);return e||ot(!1),e}function dI(t){let e=rD(),n=e.matches[e.matches.length-1];return n.route.id||ot(!1),n.route.id}function iD(){var t;let e=f.useContext(lI),n=nD(pc.UseRouteError),r=dI(pc.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function sD(){let{router:t}=tD(C0.UseNavigateStable),e=dI(pc.UseNavigateStable),n=f.useRef(!1);return cI(()=>{n.current=!0}),f.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ph({fromRouteId:e},s)))},[t,e])}function oD(t){let{to:e,replace:n,state:r,relative:i}=t;Ka()||ot(!1);let{matches:s}=f.useContext(Br),{pathname:o}=$n(),a=yn(),l=Vv(e,zv(s).map(d=>d.pathnameBase),o,i==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:i}),[a,c,i,n,r]),null}function hI(t){return G3(t.context)}function ki(t){ot(!1)}function aD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fi.Pop,navigator:s,static:o=!1}=t;Ka()&&ot(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=yo(r));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:p="default"}=r,y=f.useMemo(()=>{let x=Bv(c,a);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:p},navigationType:i}},[a,c,d,h,m,p,i]);return y==null?null:f.createElement(Ga.Provider,{value:l},f.createElement(Pf.Provider,{children:n,value:y}))}function lD(t){let{children:e,location:n}=t;return K3(A0(e),n)}var x_;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(x_||(x_={}));new Promise(()=>{});function A0(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,i)=>{if(!f.isValidElement(r))return;let s=[...e,i];if(r.type===f.Fragment){n.push.apply(n,A0(r.props.children,s));return}r.type!==ki&&ot(!1),!r.props.index||!r.props.children||ot(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=A0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R0.apply(this,arguments)}function cD(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dD(t,e){return t.button===0&&(!e||e==="_self")&&!uD(t)}const hD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],fD="startTransition",w_=Xy[fD];function mD(t){let{basename:e,children:n,future:r,window:i}=t,s=f.useRef();s.current==null&&(s.current=y3({window:i,v5Compat:!0}));let o=s.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&w_?w_(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(aD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const pD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qi=f.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=cD(e,hD),{basename:m}=f.useContext(Ga),p,y=!1;if(typeof c=="string"&&gD.test(c)&&(p=c,pD))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=Bv(w.pathname,m);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:y=!0}catch{}let x=W3(c,{relative:i}),_=yD(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i});function v(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",R0({},h,{href:p||x,onClick:y||s?r:v,ref:n,target:l}))});var __;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(__||(__={}));var E_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(E_||(E_={}));function yD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=yn(),l=$n(),c=uI(t,{relative:o});return f.useCallback(d=>{if(dD(d,n)){d.preventDefault();let h=r!==void 0?r:mh(l)===mh(c);a(t,{replace:h,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,n,t,s,o])}function fI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=fI(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function vD(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=fI(t))&&(r&&(r+=" "),r+=e);return r}const S_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,b_=vD,mI=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return b_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],h=s==null?void 0:s[c];if(d===null)return null;const m=S_(d)||S_(h);return i[c][m]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(y=>{let[x,_]=y;return Array.isArray(_)?_.includes({...s,...a}[x]):{...s,...a}[x]===_})?[...c,h,m]:c},[]);return b_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function xD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const wD=f.forwardRef(xD),pI=wD;function _D({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const ED=f.forwardRef(_D),SD=ED;function bD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const kD=f.forwardRef(bD),TD=kD;function ID({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const CD=f.forwardRef(ID),AD=CD;function RD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const PD=f.forwardRef(RD),is=PD;function ND({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const DD=f.forwardRef(ND),Wv=DD;function OD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const jD=f.forwardRef(OD),MD=jD;function LD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const FD=f.forwardRef(LD),$D=FD;function BD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const zD=f.forwardRef(BD),VD=zD;function UD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const WD=f.forwardRef(UD),gI=WD;function HD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const qD=f.forwardRef(HD),Rd=qD;function GD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const KD=f.forwardRef(GD),XD=KD;function QD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const YD=f.forwardRef(QD),JD=YD;function ZD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const eO=f.forwardRef(ZD),tO=eO;function nO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const rO=f.forwardRef(nO),iO=rO;function sO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const oO=f.forwardRef(sO),Ap=oO;function aO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const lO=f.forwardRef(aO),cO=lO;function uO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const dO=f.forwardRef(uO),yI=dO;function hO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const fO=f.forwardRef(hO),vI=fO;function mO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const pO=f.forwardRef(mO),gO=pO;function yO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const vO=f.forwardRef(yO),xO=vO;function wO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const _O=f.forwardRef(wO),Hv=_O;function EO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const SO=f.forwardRef(EO),xI=SO;function bO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const kO=f.forwardRef(bO),wI=kO;function TO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const IO=f.forwardRef(TO),CO=IO;function AO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const RO=f.forwardRef(AO),_I=RO;function PO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const NO=f.forwardRef(PO),k_=NO;function DO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const OO=f.forwardRef(DO),EI=OO;function jO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const MO=f.forwardRef(jO),Sa=MO;function LO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const FO=f.forwardRef(LO),SI=FO;function $O({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const BO=f.forwardRef($O),Df=BO;function zO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const VO=f.forwardRef(zO),bI=VO;function UO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const WO=f.forwardRef(UO),qv=WO;function HO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const qO=f.forwardRef(HO),T_=qO;function GO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const KO=f.forwardRef(GO),gh=KO;function XO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const QO=f.forwardRef(XO),$i=QO;function YO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const JO=f.forwardRef(YO),ZO=JO;function ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const tj=f.forwardRef(ej),nj=tj;function rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const ij=f.forwardRef(rj),sj=ij;function oj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const aj=f.forwardRef(oj),lj=aj;function cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const uj=f.forwardRef(cj),gc=uj;function dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const hj=f.forwardRef(dj),yc=hj;function fj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const mj=f.forwardRef(fj),pj=mj;function gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const yj=f.forwardRef(gj),js=yj,vj=mI("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-[99px] justify-center",list:"flex items-center py-[5px] w-full",primary:"px-[16px] py-[4px]",outline:"border rounded-full"},size:{clear:"",half:"w-1/2",full:"w-full",small:"px-[10px] py-[3px]",normal:"px-[16px] py-[4px]",large:"h-[40px] w-[40px]"},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"normal",hover:"default"}}),X=({className:t,children:e,variant:n,size:r,disabled:i,isLoading:s,hover:o,onClick:a,...l})=>u.jsxs("button",{type:"button",onClick:c=>a?a(c):"",...l,className:vj({variant:n,size:r,hover:o,className:t}),disabled:s||i,children:[s?u.jsx(is,{className:"w-[22px] animate-spin"}):null,!s&&e]}),yh=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_code:"#ca4954",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_code:"#0c9e85",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],xj="End-Of-Stream";class st extends Error{constructor(){super(xj)}}class wj{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,n,r){const i=await this.read(e,n,r);return this.peekQueue.push(e.subarray(n,n+i)),i}async read(e,n,r){if(r===0)return 0;let i=this.readFromPeekBuffer(e,n,r);if(i+=await this.readRemainderFromStream(e,n+i,r-i),i===0)throw new st;return i}readFromPeekBuffer(e,n,r){let i=r,s=0;for(;this.peekQueue.length>0&&i>0;){const o=this.peekQueue.pop();if(!o)throw new Error("peekData should be defined");const a=Math.min(o.length,i);e.set(o.subarray(0,a),n+s),s+=a,i-=a,a<o.length&&this.peekQueue.push(o.subarray(a))}return s}async readRemainderFromStream(e,n,r){let i=r,s=0;for(;i>0&&!this.endOfStream;){const o=Math.min(i,this.maxStreamReadSize),a=await this.readFromStream(e,n+s,o);if(a===0)break;s+=a,i-=a}return s}}class _j extends wj{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,n,r){if(this.endOfStream)throw new st;const i=await this.reader.read(new Uint8Array(r));return i.done&&(this.endOfStream=i.done),i.value?(e.set(i.value,n),i.value.byteLength):0}}class kI{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=(e==null?void 0:e.fileInfo)??{},this.onClose=e==null?void 0:e.onClose}async readToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new st;return e.get(r,0)}async peekToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new st;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new st;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new st;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:e.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}const Ej=256e3;class Sj extends kI{constructor(e,n){super(n),this.streamReader=e}async readBuffer(e,n){const r=this.normalizeOptions(e,n),i=r.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,n);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const s=await this.streamReader.read(e,r.offset,r.length);if(this.position+=s,(!n||!n.mayBeLess)&&s<r.length)throw new st;return s}async peekBuffer(e,n){const r=this.normalizeOptions(e,n);let i=0;if(r.position){const s=r.position-this.position;if(s>0){const o=new Uint8Array(r.length+s);return i=await this.peekBuffer(o,{mayBeLess:r.mayBeLess}),e.set(o.subarray(s),r.offset),i-s}if(s<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{i=await this.streamReader.peek(e,r.offset,r.length)}catch(s){if(n!=null&&n.mayBeLess&&s instanceof st)return 0;throw s}if(!r.mayBeLess&&i<r.length)throw new st}return i}async ignore(e){const n=Math.min(Ej,e),r=new Uint8Array(n);let i=0;for(;i<e;){const s=e-i,o=await this.readBuffer(r,{length:Math.min(n,s)});if(o<0)return o;i+=o}return i}}class bj extends kI{constructor(e,n){super(n),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,n){if(n!=null&&n.position){if(n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=n.position}const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),i=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&i<r.length)throw new st;return e.set(this.uint8Array.subarray(r.position,r.position+i),r.offset),i}close(){return super.close()}}function TI(t,e){return new Sj(new _j(t),e)}function ba(t,e){return new bj(t,e)}/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Of=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,p=t[e+h];for(h+=m,s=p&(1<<-d)-1,p>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(p?-1:1)*o*Math.pow(2,s-r)},jf=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,y=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=a&255,p+=y,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+p]=o&255,p+=y,o/=256,c-=8);t[n+p-y]|=x*128};function ue(t){return new DataView(t.buffer,t.byteOffset)}const he={len:1,get(t,e){return ue(t).getUint8(e)},put(t,e,n){return ue(t).setUint8(e,n),e+1}},ke={len:2,get(t,e){return ue(t).getUint16(e,!0)},put(t,e,n){return ue(t).setUint16(e,n,!0),e+2}},Re={len:2,get(t,e){return ue(t).getUint16(e)},put(t,e,n){return ue(t).setUint16(e,n),e+2}},vh={len:3,get(t,e){const n=ue(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put(t,e,n){const r=ue(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},rn={len:3,get(t,e){const n=ue(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put(t,e,n){const r=ue(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},J={len:4,get(t,e){return ue(t).getUint32(e,!0)},put(t,e,n){return ue(t).setUint32(e,n,!0),e+4}},re={len:4,get(t,e){return ue(t).getUint32(e)},put(t,e,n){return ue(t).setUint32(e,n),e+4}},vc={len:1,get(t,e){return ue(t).getInt8(e)},put(t,e,n){return ue(t).setInt8(e,n),e+1}},Yr={len:2,get(t,e){return ue(t).getInt16(e)},put(t,e,n){return ue(t).setInt16(e,n),e+2}},kj={len:2,get(t,e){return ue(t).getInt16(e,!0)},put(t,e,n){return ue(t).setInt16(e,n,!0),e+2}},Tj={len:3,get(t,e){const n=vh.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=ue(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},Gv={len:3,get(t,e){const n=rn.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=ue(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},Rn={len:4,get(t,e){return ue(t).getInt32(e)},put(t,e,n){return ue(t).setInt32(e,n),e+4}},nt={len:4,get(t,e){return ue(t).getInt32(e,!0)},put(t,e,n){return ue(t).setInt32(e,n,!0),e+4}},Zt={len:8,get(t,e){return ue(t).getBigUint64(e,!0)},put(t,e,n){return ue(t).setBigUint64(e,n,!0),e+8}},xh={len:8,get(t,e){return ue(t).getBigInt64(e,!0)},put(t,e,n){return ue(t).setBigInt64(e,n,!0),e+8}},Kv={len:8,get(t,e){return ue(t).getBigUint64(e)},put(t,e,n){return ue(t).setBigUint64(e,n),e+8}},II={len:8,get(t,e){return ue(t).getBigInt64(e)},put(t,e,n){return ue(t).setBigInt64(e,n),e+8}},Ij={len:2,get(t,e){return Of(t,e,!1,10,this.len)},put(t,e,n){return jf(t,n,e,!1,10,this.len),e+this.len}},Cj={len:2,get(t,e){return Of(t,e,!0,10,this.len)},put(t,e,n){return jf(t,n,e,!0,10,this.len),e+this.len}},CI={len:4,get(t,e){return ue(t).getFloat32(e)},put(t,e,n){return ue(t).setFloat32(e,n),e+4}},Aj={len:4,get(t,e){return ue(t).getFloat32(e,!0)},put(t,e,n){return ue(t).setFloat32(e,n,!0),e+4}},P0={len:8,get(t,e){return ue(t).getFloat64(e)},put(t,e,n){return ue(t).setFloat64(e,n),e+8}},Rj={len:8,get(t,e){return ue(t).getFloat64(e,!0)},put(t,e,n){return ue(t).setFloat64(e,n,!0),e+8}},Pj={len:10,get(t,e){return Of(t,e,!1,63,this.len)},put(t,e,n){return jf(t,n,e,!1,63,this.len),e+this.len}},Nj={len:10,get(t,e){return Of(t,e,!0,63,this.len)},put(t,e,n){return jf(t,n,e,!0,63,this.len),e+this.len}};class Dj{constructor(e){this.len=e}get(e,n){}}class ln{constructor(e){this.len=e}get(e,n){return e.subarray(n,n+this.len)}}class ne{constructor(e,n){this.len=e,this.encoding=n,this.textDecoder=new TextDecoder(n)}get(e,n){return this.textDecoder.decode(e.subarray(n,n+this.len))}}class Oj{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,n=0){return this.textDecoder.decode(e.subarray(n,n+this.len))}}const jj=Object.freeze(Object.defineProperty({__proto__:null,AnsiStringType:Oj,Float16_BE:Ij,Float16_LE:Cj,Float32_BE:CI,Float32_LE:Aj,Float64_BE:P0,Float64_LE:Rj,Float80_BE:Pj,Float80_LE:Nj,INT16_BE:Yr,INT16_LE:kj,INT24_BE:Gv,INT24_LE:Tj,INT32_BE:Rn,INT32_LE:nt,INT64_BE:II,INT64_LE:xh,INT8:vc,IgnoreType:Dj,StringType:ne,UINT16_BE:Re,UINT16_LE:ke,UINT24_BE:rn,UINT24_LE:vh,UINT32_BE:re,UINT32_LE:J,UINT64_BE:Kv,UINT64_LE:Zt,UINT8:he,Uint8ArrayType:ln},Symbol.toStringTag,{value:"Module"})),Mj=Object.prototype.toString,Lj="[object Uint8Array]",Fj="[object ArrayBuffer]";function AI(t,e,n){return t?t.constructor===e?!0:Mj.call(t)===n:!1}function RI(t){return AI(t,Uint8Array,Lj)}function $j(t){return AI(t,ArrayBuffer,Fj)}function Bj(t){return RI(t)||$j(t)}function zj(t){if(!RI(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function Vj(t){if(!Bj(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}const Gu={utf8:new globalThis.TextDecoder("utf8")};function Xv(t,e="utf8"){return Vj(t),Gu[e]??(Gu[e]=new globalThis.TextDecoder(e)),Gu[e].decode(t)}function PI(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const Uj=new globalThis.TextEncoder;function Wj(t){return PI(t),Uj.encode(t)}const Hj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qv(t){zj(t);let e="";for(let n=0;n<t.length;n++)e+=Hj[t[n]];return e}const I_={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function C_(t){if(PI(t),t.length%2!==0)throw new Error("Invalid Hex string length.");const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const i=I_[t[r*2]],s=I_[t[r*2+1]];if(i===void 0||s===void 0)throw new Error(`Invalid Hex character encountered at position ${r*2}`);n[r]=i<<4|s}return n}function A_(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function NI(t,e){const n=t.length,r=e.length;if(r===0||r>n)return-1;const i=n-r;for(let s=0;s<=i;s++){let o=!0;for(let a=0;a<r;a++)if(t[s+a]!==e[a]){o=!1;break}if(o)return s}return-1}function qj(t,e){return NI(t,e)!==-1}function Gj(t){return[...t].map(e=>e.charCodeAt(0))}function Kj(t,e=0){const n=Number.parseInt(new ne(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let i=e;i<e+148;i++)r+=t[i];for(let i=e+156;i<e+512;i++)r+=t[i];return n===r}const Xj={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},Qj=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx"],Yj=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio"],R_=4100;async function DI(t){return new Jj().fromBuffer(t)}function yr(t,e,n){n={offset:0,...n};for(const[r,i]of e.entries())if(n.mask){if(i!==(n.mask[r]&t[r+n.offset]))return!1}else if(i!==t[r+n.offset])return!1;return!0}class Jj{constructor(e){this.detectors=e==null?void 0:e.customDetectors,this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const n=e.position;for(const r of this.detectors||[]){const i=await r(e);if(i)return i;if(n!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(ba(n))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const n=await TI(e);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){const{sampleSize:r=R_}=n;let i,s;const o=e.getReader({mode:"byob"});try{const{value:c,done:d}=await o.read(new Uint8Array(r));if(s=c,!d&&c)try{i=await this.fromBuffer(c.slice(0,r))}catch(h){if(!(h instanceof st))throw h;i=void 0}s=c}finally{o.releaseLock()}const a=new TransformStream({async start(c){c.enqueue(s)},transform(c,d){d.enqueue(c)}}),l=e.pipeThrough(a);return l.fileType=i,l}check(e,n){return yr(this.buffer,e,n)}checkString(e,n){return this.check(Gj(e),n)}async parse(e){if(this.buffer=new Uint8Array(R_),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const n=await e.readToken(Xj);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const n=new DataView(this.buffer.buffer),r={compressedSize:n.getUint32(18,!0),uncompressedSize:n.getUint32(22,!0),filenameLength:n.getUint16(26,!0),extraFieldLength:n.getUint16(28,!0)};if(r.filename=await e.readToken(new ne(r.filenameLength,"utf-8")),await e.ignore(r.extraFieldLength),r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let i=await e.readToken(new ne(r.compressedSize,"utf-8"));switch(i=i.trim(),i){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let i=-1;for(;i<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),i=NI(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(i>=0?i:this.buffer.length)}else await e.ignore(r.compressedSize)}}catch(n){if(!(n instanceof st))throw n}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const n=new Uint8Array(8);return await e.readBuffer(n),yr(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:yr(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:yr(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:yr(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:yr(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:yr(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const n=new ne(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const n=10*1024*1024,r=new Uint8Array(Math.min(n,e.fileInfo.size));if(await e.readBuffer(r,{mayBeLess:!0}),qj(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(n){if(!(n instanceof st))throw n}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){const n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){const a=await e.peekNumber(he);let l=128,c=0;for(;!(a&l)&&l!==0;)++c,l>>=1;const d=new Uint8Array(c+1);return await e.readBuffer(d),d}async function r(){const a=await n(),l=await n();l[0]^=128>>l.length-1;const c=Math.min(6,l.length),d=new DataView(a.buffer),h=new DataView(l.buffer,l.length-c,c);return{id:A_(d),len:A_(h)}}async function i(a){for(;a>0;){const l=await r();if(l.id===17026)return(await e.readToken(new ne(l.len))).replaceAll(/\00.*$/g,"");await e.ignore(l.len),--a}}const s=await r();switch(await i(s.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const n=new ne(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new ne(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("**ACE",{offset:7})&&(await e.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(Rn),type:await e.readToken(new ne(4,"latin1"))}}do{const r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){const r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(Zt))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const r=await n();let i=r.size-24;if(yr(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const s=new Uint8Array(16);if(i-=await e.readBuffer(s),yr(s,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(yr(s,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(i)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new ne(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{const r=new TextDecoder().decode(this.buffer.slice(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),Kj(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const n=await this.tokenizer.readToken(e?Re:ke);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const n=await this.tokenizer.readToken(e?Re:ke);for(let r=0;r<n;++r){const i=await this.readTiffTag(e);if(i)return i}}async readTiffHeader(e){const n=(e?Re:ke).get(this.buffer,2),r=(e?re:J).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}}new Set(Qj);new Set(Yj);var Yv={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var P_=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,Zj=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,OI=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,eM=/\\([\u000b\u0020-\u00ff])/g,tM=/([\\"])/g,jI=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Yv.format=nM;Yv.parse=rM;function nM(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!jI.test(n))throw new TypeError("invalid type");var r=n;if(e&&typeof e=="object")for(var i,s=Object.keys(e).sort(),o=0;o<s.length;o++){if(i=s[o],!OI.test(i))throw new TypeError("invalid parameter name");r+="; "+i+"="+sM(e[i])}return r}function rM(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?iM(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var n=e.indexOf(";"),r=n!==-1?e.slice(0,n).trim():e.trim();if(!jI.test(r))throw new TypeError("invalid media type");var i=new oM(r.toLowerCase());if(n!==-1){var s,o,a;for(P_.lastIndex=n;o=P_.exec(e);){if(o.index!==n)throw new TypeError("invalid parameter format");n+=o[0].length,s=o[1].toLowerCase(),a=o[2],a.charCodeAt(0)===34&&(a=a.slice(1,-1),a.indexOf("\\")!==-1&&(a=a.replace(eM,"$1"))),i.parameters[s]=a}if(n!==e.length)throw new TypeError("invalid parameter format")}return i}function iM(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function sM(t){var e=String(t);if(OI.test(e))return e;if(e.length>0&&!Zj.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(tM,"\\$1")+'"'}function oM(t){this.parameters=Object.create(null),this.type=t}/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var aM=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,lM=cM;function cM(t){if(!t)throw new TypeError("argument string is required");if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=aM.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var n=e[1],r=e[2],i,s=r.lastIndexOf("+");return s!==-1&&(i=r.substr(s+1),r=r.substr(0,s)),new uM(n,r,i)}function uM(t,e,n){this.type=t,this.subtype=e,this.suffix=n}var N0={exports:{}},Rp,N_;function dM(){if(N_)return Rp;N_=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;Rp=function(d,h){h=h||{};var m=typeof d;if(m==="string"&&d.length>0)return o(d);if(m==="number"&&isFinite(d))return h.long?l(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var m=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(d){var h=Math.abs(d);return h>=r?Math.round(d/r)+"d":h>=n?Math.round(d/n)+"h":h>=e?Math.round(d/e)+"m":h>=t?Math.round(d/t)+"s":d+"ms"}function l(d){var h=Math.abs(d);return h>=r?c(d,h,r,"day"):h>=n?c(d,h,n,"hour"):h>=e?c(d,h,e,"minute"):h>=t?c(d,h,t,"second"):d+" ms"}function c(d,h,m,p){var y=h>=m*1.5;return Math.round(d/m)+" "+p+(y?"s":"")}return Rp}function hM(t){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=i,n.enabled=o,n.humanize=dM(),n.destroy=c,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let h=0;for(let m=0;m<d.length;m++)h=(h<<5)-h+d.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(d){let h,m=null,p,y;function x(..._){if(!x.enabled)return;const v=x,g=Number(new Date),w=g-(h||g);v.diff=w,v.prev=h,v.curr=g,h=g,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(T,b)=>{if(T==="%%")return"%";E++;const k=n.formatters[b];if(typeof k=="function"){const R=_[E];T=k.call(v,R),_.splice(E,1),E--}return T}),n.formatArgs.call(v,_),(v.log||n.log).apply(v,_)}return x.namespace=d,x.useColors=n.useColors(),x.color=n.selectColor(d),x.extend=r,x.destroy=n.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(p!==n.namespaces&&(p=n.namespaces,y=n.enabled(d)),y),set:_=>{m=_}}),typeof n.init=="function"&&n.init(x),x}function r(d,h){const m=n(this.namespace+(typeof h>"u"?":":h)+d);return m.log=this.log,m}function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let h;const m=(typeof d=="string"?d:"").split(/[\s,]+/),p=m.length;for(h=0;h<p;h++)m[h]&&(d=m[h].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...n.names.map(a),...n.skips.map(a).map(h=>"-"+h)].join(",");return n.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let h,m;for(h=0,m=n.skips.length;h<m;h++)if(n.skips[h].test(d))return!1;for(h=0,m=n.names.length;h<m;h++)if(n.names[h].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var fM=hM;(function(t,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=n,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let d=0,h=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(d++,m==="%c"&&(h=d))}),l.splice(h,0,c)}e.log=console.debug||console.log||(()=>{});function i(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function o(){try{return localStorage}catch{}}t.exports=fM(e);const{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(N0,N0.exports);var mM=N0.exports;const Ne=Wb(mM);var D0;(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(D0||(D0={}));var Ys;(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(Ys||(Ys={}));function Ye(t,e,n){return(t[e]&1<<n)!==0}function wn(t,e,n,r){let i=e;if(r==="utf-16le"){for(;t[i]!==0||t[i+1]!==0;){if(i>=n)return n;i+=2}return i}for(;t[i]!==0;){if(i>=n)return n;i++}return i}function MI(t){const e=t.indexOf("\0");return e===-1?t:t.substr(0,e)}function pM(t){const e=t.length;if(e&1)throw new Error("Buffer length must be even");for(let n=0;n<e;n+=2){const r=t[n];t[n]=t[n+1],t[n+1]=r}return t}function gt(t,e){if(t[0]===255&&t[1]===254)return gt(t.subarray(2),e);if(e==="utf-16le"&&t[0]===254&&t[1]===255){if(t.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return gt(pM(t),e)}return new ne(t.length,e).get(t,0)}function Ri(t){return t=t.replace(/^\x00+/g,""),t=t.replace(/\x00+$/g,""),t}function ve(t,e,n,r){const i=e+~~(n/8),s=n%8;let o=t[i];o&=255>>s;const a=8-s,l=r-a;return l<0?o>>=8-s-r:l>0&&(o<<=l,o|=ve(t,e,n+a,l)),o}function bn(t,e,n){return ve(t,e,n,1)===1}function gM(t){const e=[];for(let n=0,r=t.length;n<r;n++){const i=Number(t.charCodeAt(n)).toString(16);e.push(i.length===1?`0${i}`:i)}return e.join(" ")}function yM(t){return 10*Math.log10(t)}function vM(t){return 10**(t/10)}function xM(t){const e=t.split(" ").map(n=>n.trim().toLowerCase());if(e.length>=1){const n=Number.parseFloat(e[0]);return e.length===2&&e[1]==="db"?{dB:n,ratio:vM(n)}:{dB:yM(n),ratio:n}}}var xc;(function(t){t[t.Other=0]="Other",t[t["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",t[t["Other file icon"]=2]="Other file icon",t[t["Cover (front)"]=3]="Cover (front)",t[t["Cover (back)"]=4]="Cover (back)",t[t["Leaflet page"]=5]="Leaflet page",t[t["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",t[t["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",t[t["Artist/performer"]=8]="Artist/performer",t[t.Conductor=9]="Conductor",t[t["Band/Orchestra"]=10]="Band/Orchestra",t[t.Composer=11]="Composer",t[t["Lyricist/text writer"]=12]="Lyricist/text writer",t[t["Recording Location"]=13]="Recording Location",t[t["During recording"]=14]="During recording",t[t["During performance"]=15]="During performance",t[t["Movie/video screen capture"]=16]="Movie/video screen capture",t[t["A bright coloured fish"]=17]="A bright coloured fish",t[t.Illustration=18]="Illustration",t[t["Band/artist logotype"]=19]="Band/artist logotype",t[t["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(xc||(xc={}));var D_;(function(t){t[t.other=0]="other",t[t.lyrics=1]="lyrics",t[t.text=2]="text",t[t.movement_part=3]="movement_part",t[t.events=4]="events",t[t.chord=5]="chord",t[t.trivia_pop=6]="trivia_pop"})(D_||(D_={}));var O_;(function(t){t[t.notSynchronized0=0]="notSynchronized0",t[t.mpegFrameNumber=1]="mpegFrameNumber",t[t.milliseconds=2]="milliseconds"})(O_||(O_={}));const LI={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},O0={len:10,get:(t,e)=>({fileIdentifier:new ne(3,"ascii").get(t,e),version:{major:vc.get(t,e+3),revision:vc.get(t,e+4)},flags:{unsynchronisation:Ye(t,e+5,7),isExtendedHeader:Ye(t,e+5,6),expIndicator:Ye(t,e+5,5),footer:Ye(t,e+5,4)},size:LI.get(t,e+6)})},j_={len:10,get:(t,e)=>({size:re.get(t,e),extendedFlags:Re.get(t,e+4),sizeOfPadding:re.get(t,e+6),crcDataPresent:Ye(t,e+4,31)})},FI={len:1,get:(t,e)=>{switch(t[e]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}},j0={len:4,get:(t,e)=>({encoding:FI.get(t,e),language:new ne(3,"latin1").get(t,e+1)})},M_={len:6,get:(t,e)=>{const n=j0.get(t,e);return{encoding:n.encoding,language:n.language,timeStampFormat:he.get(t,e+4),contentType:he.get(t,e+5)}}},wh={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function wM(t){return wh[t]&&!wh[t].multiple}function _M(t){return!wh[t].multiple||wh[t].unique||!1}class Tn{static toIntOrNull(e){const n=Number.parseInt(e,10);return Number.isNaN(n)?null:n}static normalizeTrack(e){const n=e.toString().split("/");return{no:Number.parseInt(n[0],10)||null,of:Number.parseInt(n[1],10)||null}}constructor(e,n){this.tagTypes=e,this.tagMap=n}mapGenericTag(e,n){e={id:e.id,value:e.value},this.postMap(e,n);const r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,n){}}Tn.maxRatingScore=1;const EM={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class SM extends Tn{constructor(){super(["ID3v1"],EM)}}class Jc extends Tn{constructor(e,n){const r={};for(const i of Object.keys(n))r[i.toUpperCase()]=n[i];super(e,r)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}const bM={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class Jv extends Jc{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*Tn.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],bM)}postMap(e,n){switch(e.id){case"UFID":{const r=e.value;r.owner_identifier==="http://musicbrainz.org"&&(e.id+=`:${r.owner_identifier}`,e.value=gt(r.identifier,"latin1"))}break;case"PRIV":{const r=e.value;switch(r.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${r.owner_identifier}`,e.value=r.data.length===4?J.get(r.data,0):null,e.value===null&&n.addWarning("Failed to parse PRIV:PeakValue");break;default:n.addWarning(`Unknown PRIV owner-identifier: ${r.data}`)}}break;case"POPM":e.value=Jv.toRating(e.value);break}}}const kM={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class Zv extends Tn{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],kM)}postMap(e){switch(e.id){case"WM/SharedUserRating":{const n=e.id.split(":");e.value=Zv.toRating(e.value),e.id=n[0];break}}}}const TM={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class IM extends Jc{constructor(){super(["ID3v2.2"],TM)}}const CM={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class AM extends Jc{constructor(){super(["APEv2"],CM)}}const RM={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},PM="iTunes";class L_ extends Jc{constructor(){super([PM],RM)}postMap(e,n){switch(e.id){case"rate":e.value={source:void 0,rating:Number.parseFloat(e.value)/100};break}}}const NM={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class _h extends Tn{static toRating(e,n,r){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(n)/r*Tn.maxRatingScore}}constructor(){super(["vorbis"],NM)}postMap(e){if(e.id==="RATING")e.value=_h.toRating(void 0,e.value,100);else if(e.id.indexOf("RATING:")===0){const n=e.id.split(":");e.value=_h.toRating(n[1],e.value,1),e.id=n[0]}}}const DM={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class OM extends Tn{constructor(){super(["exif"],DM)}}const jM={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class MM extends Jc{constructor(){super(["matroska"],jM)}}const LM={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class FM extends Tn{constructor(){super(["AIFF"],LM)}}class $M{constructor(){this.tagMappers={},[new SM,new IM,new Jv,new L_,new L_,new _h,new AM,new Zv,new OM,new MM,new FM].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,n,r){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(n,r);throw new Error(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(const n of e.tagTypes)this.tagMappers[n]=e}}const Es=Ne("music-metadata:collector"),BM=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class zM{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new $M;let n=1;for(const r of BM)this.originPriority[r]=n++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){Es(`streamInfo: type=${e.type?Ys[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,n){var r;Es(`format: ${e} = ${n}`),this.format[e]=n,(r=this.opts)!=null&&r.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:n}})}async addTag(e,n,r){Es(`tag ${e}.${n} = ${r}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:n,value:r}),await this.toCommon(e,n,r)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,n){switch(n.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:n.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:n.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(n.value)===-1)){const r=(this.common.artists||[]).concat([n.value]),s={id:"artist",value:VM(r)};this.setGenericTag("artificial",s)}break;case"picture":return this.postFixPicture(n.value).then(r=>{r!==null&&(n.value=r,this.setGenericTag(e,n))});case"totaltracks":this.common.track.of=Tn.toIntOrNull(n.value);return;case"totaldiscs":this.common.disk.of=Tn.toIntOrNull(n.value);return;case"movementTotal":this.common.movementIndex.of=Tn.toIntOrNull(n.value);return;case"track":case"disk":case"movementIndex":{const r=this.common[n.id].of;this.common[n.id]=Tn.normalizeTrack(n.value),this.common[n.id].of=r??this.common[n.id].of;return}case"bpm":case"year":case"originalyear":n.value=Number.parseInt(n.value,10);break;case"date":{const r=Number.parseInt(n.value.substr(0,4),10);Number.isNaN(r)||(this.common.year=r);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":n.value=typeof n.value=="string"?Number.parseInt(n.value,10):n.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":n.value=xM(n.value);break;case"replaygain_track_minmax":n.value=n.value.split(",").map(r=>Number.parseInt(r,10));break;case"replaygain_undo":{const r=n.value.split(",").map(i=>Number.parseInt(i,10));n.value={leftChannel:r[0],rightChannel:r[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":n.value=n.value==="1"||n.value===1;break;case"isrc":{const r=this.common[n.id];if(r&&r.indexOf(n.value)!==-1)return;break}case"comment":typeof n.value=="string"&&(n.value={text:n.value}),n.value.descriptor==="iTunPGAP"&&this.setGenericTag(e,{id:"gapless",value:n.value.text==="1"});break}n.value!==null&&this.setGenericTag(e,n)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){const n=await DI(Uint8Array.from(e.data));if(n)e.format=n.mime;else return null}switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,n,r){const i={id:n,value:r},s=this.tagMapper.mapTag(e,i,this);s&&await this.postMap(e,s)}setGenericTag(e,n){var s;Es(`common.${n.id} = ${n.value}`);const r=this.commonOrigin[n.id]||1e3,i=this.originPriority[e];if(wM(n.id))if(i<=r)this.common[n.id]=n.value,this.commonOrigin[n.id]=i;else return Es(`Ignore native tag (singleton): ${e}.${n.id} = ${n.value}`);else if(i===r)!_M(n.id)||this.common[n.id].indexOf(n.value)===-1?this.common[n.id].push(n.value):Es(`Ignore duplicate value: ${e}.${n.id} = ${n.value}`);else if(i<r)this.common[n.id]=[n.value],this.commonOrigin[n.id]=i;else return Es(`Ignore native tag (list): ${e}.${n.id} = ${n.value}`);(s=this.opts)!=null&&s.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:n.id,value:n.value}})}}function VM(t){return t.length>2?`${t.slice(0,t.length-1).join(", ")} & ${t[t.length-1]}`:t.join(" & ")}class Bn{constructor(){this.metadata=void 0,this.tokenizer=void 0,this.options=void 0}init(e,n,r){return this.metadata=e,this.tokenizer=n,this.options=r,this}}const UM=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/,Ve={len:4,get:(t,e)=>{const n=Xv(t.slice(e,e+Ve.len),"latin1");if(!n.match(UM))throw new Error(`FourCC contains invalid characters: ${gM(n)} "${n}"`);return n},put:(t,e,n)=>{const r=Wj(n);if(r.length!==4)throw new Error("Invalid length");return t.set(r,e),e+4}};var Yo;(function(t){t[t.text_utf8=0]="text_utf8",t[t.binary=1]="binary",t[t.external_info=2]="external_info",t[t.reserved=3]="reserved"})(Yo||(Yo={}));const F_={len:52,get:(t,e)=>({ID:Ve.get(t,e),version:J.get(t,e+4)/1e3,descriptorBytes:J.get(t,e+8),headerBytes:J.get(t,e+12),seekTableBytes:J.get(t,e+16),headerDataBytes:J.get(t,e+20),apeFrameDataBytes:J.get(t,e+24),apeFrameDataBytesHigh:J.get(t,e+28),terminatingDataBytes:J.get(t,e+32),fileMD5:new ln(16).get(t,e+36)})},WM={len:24,get:(t,e)=>({compressionLevel:ke.get(t,e),formatFlags:ke.get(t,e+2),blocksPerFrame:J.get(t,e+4),finalFrameBlocks:J.get(t,e+8),totalFrames:J.get(t,e+12),bitsPerSample:ke.get(t,e+16),channel:ke.get(t,e+18),sampleRate:J.get(t,e+20)})},Un={len:32,get:(t,e)=>({ID:new ne(8,"ascii").get(t,e),version:J.get(t,e+8),size:J.get(t,e+12),fields:J.get(t,e+16),flags:$I(J.get(t,e+20))})},Pp={len:8,get:(t,e)=>({size:J.get(t,e),flags:$I(J.get(t,e+4))})};function $I(t){return{containsHeader:Ku(t,31),containsFooter:Ku(t,30),isHeader:Ku(t,29),readOnly:Ku(t,0),dataType:(t&6)>>1}}function Ku(t,e){return(t&1<<e)!==0}const Ss=Ne("music-metadata:parser:APEv2"),$_="APEv2",B_="APETAGEX";class br extends Bn{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,n,r){const i=new br;return i.init(e,n,r),i.tryParseApeHeader()}static calculateDuration(e){let n=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return n+=e.finalFrameBlocks,n/e.sampleRate}static async findApeFooterOffset(e,n){const r=new Uint8Array(Un.len);await e.randomRead(r,0,Un.len,n-Un.len);const i=Un.get(r,0);if(i.ID==="APETAGEX")return i.flags.isHeader?Ss(`APE Header found at offset=${n-Un.len}`):(Ss(`APE Footer found at offset=${n-Un.len}`),n-=i.size),{footer:i,offset:n}}static parseTagFooter(e,n,r){const i=Un.get(n,n.length-Un.len);if(i.ID!==B_)throw new Error("Unexpected APEv2 Footer ID preamble value.");ba(n);const s=new br;return s.init(e,ba(n),r),s.parseTags(i)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<Un.len){Ss("No APEv2 header found, end-of-file reached");return}const e=await this.tokenizer.peekToken(Un);if(e.ID===B_)return await this.tokenizer.ignore(Un.len),this.parseTags(e);if(Ss(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const n=this.tokenizer.fileInfo.size-this.tokenizer.position,r=new Uint8Array(n);return await this.tokenizer.readBuffer(r),br.parseTagFooter(this.metadata,r,this.options)}}async parse(){const e=await this.tokenizer.readToken(F_);if(e.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=e;const n=e.descriptorBytes-F_.len,r=await(n>0?this.parseDescriptorExpansion(n):this.parseHeader());return await this.tokenizer.ignore(r.forwardBytes),this.tryParseApeHeader()}async parseTags(e){const n=new Uint8Array(256);let r=e.size-Un.len;Ss(`Parse APE tags at offset=${this.tokenizer.position}, size=${r}`);for(let i=0;i<e.fields;i++){if(r<Pp.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-i} items remaining, but no more tag data to read.`);break}const s=await this.tokenizer.readToken(Pp);r-=Pp.len+s.size,await this.tokenizer.peekBuffer(n,{length:Math.min(n.length,r)});let o=wn(n,0,n.length);const a=await this.tokenizer.readToken(new ne(o,"ascii"));switch(await this.tokenizer.ignore(1),r-=a.length+1,s.flags.dataType){case Yo.text_utf8:{const c=(await this.tokenizer.readToken(new ne(s.size,"utf8"))).split(/\x00/g);await Promise.all(c.map(d=>this.metadata.addTag($_,a,d)));break}case Yo.binary:if(this.options.skipCovers)await this.tokenizer.ignore(s.size);else{const l=new Uint8Array(s.size);await this.tokenizer.readBuffer(l),o=wn(l,0,l.length);const c=Xv(l.slice(0,o)),d=l.slice(o+1);await this.metadata.addTag($_,a,{description:c,data:d})}break;case Yo.external_info:Ss(`Ignore external info ${a}`),await this.tokenizer.ignore(s.size);break;case Yo.reserved:Ss(`Ignore external info ${a}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${a}"`),await this.tokenizer.ignore(s.size);break}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){const e=await this.tokenizer.readToken(WM);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",br.calculateDuration(e)),!this.ape.descriptor)throw new Error("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}const Xu=Ne("music-metadata:parser:ID3v1"),Eh=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],Qu={len:128,get:(t,e)=>{const n=new Ao(3).get(t,e);return n==="TAG"?{header:n,title:new Ao(30).get(t,e+3),artist:new Ao(30).get(t,e+33),album:new Ao(30).get(t,e+63),year:new Ao(4).get(t,e+93),comment:new Ao(28).get(t,e+97),zeroByte:he.get(t,e+127),track:he.get(t,e+126),genre:he.get(t,e+127)}:null}};class Ao{constructor(e){this.len=e,this.stringType=new ne(e,"latin1")}get(e,n){let r=this.stringType.get(e,n);return r=MI(r),r=r.trim(),r.length>0?r:void 0}}class ex extends Bn{static getGenre(e){if(e<Eh.length)return Eh[e]}async parse(){if(!this.tokenizer.fileInfo.size){Xu("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const r=new br;r.init(this.metadata,this.tokenizer,this.options),await r.parseTags(this.options.apeHeader.footer)}const e=this.tokenizer.fileInfo.size-Qu.len;if(this.tokenizer.position>e){Xu("Already consumed the last 128 bytes");return}const n=await this.tokenizer.readToken(Qu,e);if(n){Xu("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-Qu.len);const r=["title","artist","album","comment","track","year"];for(const s of r)n[s]&&n[s]!==""&&await this.addTag(s,n[s]);const i=ex.getGenre(n.genre);i&&await this.addTag("genre",i)}else Xu("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-Qu.len)}async addTag(e,n){await this.metadata.addTag("ID3v1",e,n)}}const z_=Ne("music-metadata:id3v2:frame-parser"),nr="latin1";function HM(t){const e=[];let n,r="";for(const i of t)if(typeof n=="string")if(i==="("&&n==="")r+="(",n=void 0;else if(i===")"){r!==""&&(e.push(r),r="");const s=V_(n);s&&e.push(s),n=void 0}else n+=i;else i==="("?n="":r+=i;return r&&(e.length===0&&r.match(/^\d*$/)&&(r=V_(r)),r&&e.push(r)),e}function V_(t){if(t==="RX")return"Remix";if(t==="CR")return"Cover";if(t.match(/^\d*$/))return Eh[Number.parseInt(t)]}class _n{constructor(e,n){this.major=e,this.warningCollector=n}readData(e,n,r){if(e.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${n}`);return}const{encoding:i,bom:s}=FI.get(e,0),o=e.length;let a=0,l=[];const c=_n.getNullTerminatorLength(i);let d;switch(z_(`Parsing tag type=${n}, encoding=${i}, bom=${s}`),n!=="TXXX"&&n[0]==="T"?"T*":n){case"T*":case"GRP1":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":{let h;try{h=gt(e.slice(1),i).replace(/\x00+$/,"")}catch(m){if(m instanceof Error){this.warningCollector.addWarning(`id3v2.${this.major} type=${n} header has invalid string value: ${m.message}`);break}throw m}switch(n){case"TMCL":case"TIPL":case"IPLS":l=_n.functionList(this.splitValue(n,h));break;case"TRK":case"TRCK":case"TPOS":l=h;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":l=this.splitValue(n,h);break;case"TCO":case"TCON":l=this.splitValue(n,h).map(m=>HM(m)).reduce((m,p)=>m.concat(p),[]);break;case"PCS":case"PCST":l=this.major>=4?this.splitValue(n,h):[h],l=Array.isArray(l)&&l[0]===""?1:0;break;default:l=this.major>=4?this.splitValue(n,h):[h]}break}case"TXXX":{const h=_n.readIdentifierAndData(e,a+1,o,i);l={description:h.id,text:this.splitValue(n,gt(h.data,i).replace(/\x00+$/,""))};break}case"PIC":case"APIC":if(r){const h={};switch(a+=1,this.major){case 2:h.format=gt(e.slice(a,a+3),"latin1"),a+=3;break;case 3:case 4:d=wn(e,a,o,nr),h.format=gt(e.slice(a,d),nr),a=d+1;break;default:throw new Error(`Warning: unexpected major versionIndex: ${this.major}`)}h.format=_n.fixPictureMimeType(h.format),h.type=xc[e[a]],a+=1,d=wn(e,a,o,i),h.description=gt(e.slice(a,d),i),a=d+c,h.data=e.slice(a,o),l=h}break;case"CNT":case"PCNT":l=re.get(e,0);break;case"SYLT":{const h=M_.get(e,0);a+=M_.len;const m={descriptor:"",language:h.language,contentType:h.contentType,timeStampFormat:h.timeStampFormat,syncText:[]};let p=!1;for(;a<o;){const y=_n.readNullTerminatedString(e.subarray(a),h.encoding);if(a+=y.len,p){const x=re.get(e,a);a+=re.len,m.syncText.push({text:y.text,timestamp:x})}else m.descriptor=y.text,p=!0}l=m;break}case"ULT":case"USLT":case"COM":case"COMM":{const h=j0.get(e,a);a+=j0.len;const m=_n.readNullTerminatedString(e.subarray(a),h.encoding);a+=m.len;const p=_n.readNullTerminatedString(e.subarray(a),h.encoding);l={language:h.language,descriptor:m.text,text:p.text};break}case"UFID":{const h=_n.readIdentifierAndData(e,a,o,nr);l={owner_identifier:h.id,identifier:h.data};break}case"PRIV":{const h=_n.readIdentifierAndData(e,a,o,nr);l={owner_identifier:h.id,data:h.data};break}case"POPM":{d=wn(e,a,o,nr);const h=gt(e.slice(a,d),nr);a=d+1;const m=o-a;l={email:h,rating:he.get(e,a),counter:m>=5?re.get(e,a+1):void 0};break}case"GEOB":{d=wn(e,a+1,o,i);const h=gt(e.slice(a+1,d),nr);a=d+1,d=wn(e,a,o-a,i);const m=gt(e.slice(a,d),nr);a=d+1,d=wn(e,a,o-a,i);const p=gt(e.slice(a,d),nr);l={type:h,filename:m,description:p,data:e.slice(a+1,o)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":d=wn(e,a+1,o,i),l=gt(e.slice(a,d),nr);break;case"WXXX":{d=wn(e,a+1,o,i);const h=gt(e.slice(a+1,d),i);a=d+(i==="utf-16le"?2:1),l={description:h,url:gt(e.slice(a,o),nr)};break}case"WFD":case"WFED":l=gt(e.slice(a+1,wn(e,a+1,o,i)),i);break;case"MCDI":{l=e.slice(0,o);break}default:z_(`Warning: unsupported id3v2-tag-type: ${n}`);break}return l}static readNullTerminatedString(e,n){let r=n.bom?2:0;const i=wn(e,r,e.length,n.encoding),s=e.slice(r,i);return n.encoding==="utf-16le"?r=i+2:r=i+1,{text:gt(s,n.encoding),len:r}}static fixPictureMimeType(e){switch(e=e.toLocaleLowerCase(),e){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}static functionList(e){const n={};for(let r=0;r+1<e.length;r+=2){const i=e[r+1].split(",");n[e[r]]=n[e[r]]?n[e[r]].concat(i):i}return n}splitValue(e,n){let r;return this.major<4?(r=n.split(/\x00/g),r.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${e} uses non standard null-separator.`):r=n.split(/\//g)):r=n.split(/\x00/g),_n.trimArray(r)}static trimArray(e){return e.map(n=>n.replace(/\x00+$/,"").trim())}static readIdentifierAndData(e,n,r,i){const s=wn(e,n,r,i),o=gt(e.slice(n,s),i);return n=s+_n.getNullTerminatorLength(i),{id:o,data:e.slice(n,r)}}static getNullTerminatorLength(e){return e==="utf-16le"?2:1}}const U_=new TextDecoder("ascii");class ar{constructor(){this.tokenizer=void 0,this.id3Header=void 0,this.metadata=void 0,this.headerType=void 0,this.options=void 0}static removeUnsyncBytes(e){let n=0,r=0;for(;n<e.length-1;)n!==r&&(e[r]=e[n]),n+=e[n]===255&&e[n+1]===0?2:1,r++;return n<e.length&&(e[r++]=e[n]),e.slice(0,r)}static getFrameHeaderLength(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(e){return{status:{tag_alter_preservation:Ye(e,0,6),file_alter_preservation:Ye(e,0,5),read_only:Ye(e,0,4)},format:{grouping_identity:Ye(e,1,7),compression:Ye(e,1,3),encryption:Ye(e,1,2),unsynchronisation:Ye(e,1,1),data_length_indicator:Ye(e,1,0)}}}static readFrameData(e,n,r,i,s){var a,l;const o=new _n(r,s);switch(r){case 2:return o.readData(e,n.id,i);case 3:case 4:return(a=n.flags)!=null&&a.format.unsynchronisation&&(e=ar.removeUnsyncBytes(e)),(l=n.flags)!=null&&l.format.data_length_indicator&&(e=e.slice(4,e.length)),o.readData(e,n.id,i);default:throw new Error(`Unexpected majorVer: ${r}`)}}static makeDescriptionTagName(e,n){return e+(n?`:${n}`:"")}async parse(e,n,r){this.tokenizer=n,this.metadata=e,this.options=r;const i=await this.tokenizer.readToken(O0);if(i.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=i,this.headerType=`ID3v2.${i.version.major}`,i.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(i.size)}async parseExtendedHeader(){const e=await this.tokenizer.readToken(j_),n=e.size-j_.len;return n>0?this.parseExtendedHeaderData(n,e.size):this.parseId3Data(this.id3Header.size-e.size)}async parseExtendedHeaderData(e,n){return await this.tokenizer.ignore(e),this.parseId3Data(this.id3Header.size-n)}async parseId3Data(e){const n=await this.tokenizer.readToken(new ln(e));for(const r of this.parseMetadata(n))switch(r.id){case"TXXX":r.value&&await this.handleTag(r,r.value.text,()=>r.value.description);break;default:await(Array.isArray(r.value)?Promise.all(r.value.map(i=>this.addTag(r.id,i))):this.addTag(r.id,r.value))}}async handleTag(e,n,r,i=s=>s){await Promise.all(n.map(s=>this.addTag(ar.makeDescriptionTagName(e.id,r(s)),i(s))))}async addTag(e,n){await this.metadata.addTag(this.headerType,e,n)}parseMetadata(e){let n=0;const r=[];for(;n!==e.length;){const i=ar.getFrameHeaderLength(this.id3Header.version.major);if(n+i>e.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const s=e.slice(n,n+i);n+=i;const o=this.readFrameHeader(s,this.id3Header.version.major),a=e.slice(n,n+o.length);n+=o.length;const l=ar.readFrameData(a,o,this.id3Header.version.major,!this.options.skipCovers,this.metadata);l&&r.push({id:o.id,value:l})}return r}readFrameHeader(e,n){let r;switch(n){case 2:r={id:U_.decode(e.slice(0,3)),length:rn.get(e,3)},r.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;case 3:case 4:r={id:U_.decode(e.slice(0,4)),length:(n===4?LI:re).get(e,4),flags:ar.readFrameFlags(e.slice(8,10))},r.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;default:throw new Error(`Unexpected majorVer: ${n}`)}return r}}const qM={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class GM{constructor(e,n){this.isAifc=n;const r=n?22:18;if(e.chunkSize<r)throw new Error(`COMMON CHUNK size should always be at least ${r}`);this.len=e.chunkSize}get(e,n){const r=Re.get(e,n+8)-16398,i=Re.get(e,n+8+2),s={numChannels:Re.get(e,n),numSampleFrames:re.get(e,n+2),sampleSize:Re.get(e,n+6),sampleRate:r<0?i>>Math.abs(r):i<<r};if(this.isAifc){if(s.compressionType=Ve.get(e,n+18),this.len>22){const o=he.get(e,n+22);if(o>0){const a=(o+1)%2;if(23+o+a===this.len)s.compressionName=new ne(o,"latin1").get(e,n+23);else throw new Error("Illegal pstring length")}else s.compressionName=void 0}}else s.compressionName="PCM";return s}}const Np={len:8,get:(t,e)=>({chunkID:Ve.get(t,e),chunkSize:Number(BigInt(re.get(t,e+4)))})},Dp=Ne("music-metadata:parser:aiff");class KM extends Bn{constructor(){super(...arguments),this.isCompressed=null}async parse(){if((await this.tokenizer.readToken(Np)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const n=await this.tokenizer.readToken(Ve);switch(n){case"AIFF":this.metadata.setFormat("container",n),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw new Error(`Unsupported AIFF type: ${n}`)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Np.len;){Dp(`Reading AIFF chunk at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(Np),i=2*Math.round(r.chunkSize/2),s=await this.readData(r);await this.tokenizer.ignore(i-s)}}catch(r){if(r instanceof st)Dp("End-of-stream");else throw r}}async readData(e){switch(e.chunkID){case"COMM":{if(this.isCompressed===null)throw new Error("Failed to parse AIFF.COMM chunk when compression type is unknown");const n=await this.tokenizer.readToken(new GM(e,this.isCompressed));return this.metadata.setFormat("bitsPerSample",n.sampleSize),this.metadata.setFormat("sampleRate",n.sampleRate),this.metadata.setFormat("numberOfChannels",n.numChannels),this.metadata.setFormat("numberOfSamples",n.numSampleFrames),this.metadata.setFormat("duration",n.numSampleFrames/n.sampleRate),(n.compressionName||n.compressionType)&&this.metadata.setFormat("codec",n.compressionName??qM[n.compressionType]),e.chunkSize}case"ID3 ":{const n=await this.tokenizer.readToken(new ln(e.chunkSize)),r=ba(n);return await new ar().parse(this.metadata,r,this.options),e.chunkSize}case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*e.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(e);default:return Dp(`Ignore chunk id=${e.chunkID}, size=${e.chunkSize}`),0}}async readTextChunk(e){const r=(await this.tokenizer.readToken(new ne(e.chunkSize,"ascii"))).split("\0").map(i=>i.trim()).filter(i=>i==null?void 0:i.length);return await Promise.all(r.map(i=>this.metadata.addTag("AIFF",e.chunkID,i))),e.chunkSize}}class C{static fromBin(e,n=0){return new C(C.decode(e,n))}static decode(e,n=0){const r=new DataView(e.buffer,n);return`${r.getUint32(0,!0).toString(16)}-${r.getUint16(4,!0).toString(16)}-${r.getUint16(6,!0).toString(16)}-${r.getUint16(8).toString(16)}-${Qv(e.slice(n+10,n+16))}`.toUpperCase()}static decodeMediaType(e){switch(e.str){case C.AudioMedia.str:return"audio";case C.VideoMedia.str:return"video";case C.CommandMedia.str:return"command";case C.Degradable_JPEG_Media.str:return"degradable-jpeg";case C.FileTransferMedia.str:return"file-transfer";case C.BinaryMedia.str:return"binary"}}static encode(e){const n=new Uint8Array(16),r=new DataView(n.buffer);return r.setUint32(0,Number.parseInt(e.slice(0,8),16),!0),r.setUint16(4,Number.parseInt(e.slice(9,13),16),!0),r.setUint16(6,Number.parseInt(e.slice(14,18),16),!0),n.set(C_(e.slice(19,23)),8),n.set(C_(e.slice(24)),10),n}constructor(e){this.str=e}equals(e){return this.str===e.str}toBin(){return C.encode(this.str)}}C.HeaderObject=new C("75B22630-668E-11CF-A6D9-00AA0062CE6C");C.DataObject=new C("75B22636-668E-11CF-A6D9-00AA0062CE6C");C.SimpleIndexObject=new C("33000890-E5B1-11CF-89F4-00A0C90349CB");C.IndexObject=new C("D6E229D3-35DA-11D1-9034-00A0C90349BE");C.MediaObjectIndexObject=new C("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");C.TimecodeIndexObject=new C("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");C.FilePropertiesObject=new C("8CABDCA1-A947-11CF-8EE4-00C00C205365");C.StreamPropertiesObject=new C("B7DC0791-A9B7-11CF-8EE6-00C00C205365");C.HeaderExtensionObject=new C("5FBF03B5-A92E-11CF-8EE3-00C00C205365");C.CodecListObject=new C("86D15240-311D-11D0-A3A4-00A0C90348F6");C.ScriptCommandObject=new C("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");C.MarkerObject=new C("F487CD01-A951-11CF-8EE6-00C00C205365");C.BitrateMutualExclusionObject=new C("D6E229DC-35DA-11D1-9034-00A0C90349BE");C.ErrorCorrectionObject=new C("75B22635-668E-11CF-A6D9-00AA0062CE6C");C.ContentDescriptionObject=new C("75B22633-668E-11CF-A6D9-00AA0062CE6C");C.ExtendedContentDescriptionObject=new C("D2D0A440-E307-11D2-97F0-00A0C95EA850");C.ContentBrandingObject=new C("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");C.StreamBitratePropertiesObject=new C("7BF875CE-468D-11D1-8D82-006097C9A2B2");C.ContentEncryptionObject=new C("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");C.ExtendedContentEncryptionObject=new C("298AE614-2622-4C17-B935-DAE07EE9289C");C.DigitalSignatureObject=new C("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");C.PaddingObject=new C("1806D474-CADF-4509-A4BA-9AABCB96AAE8");C.ExtendedStreamPropertiesObject=new C("14E6A5CB-C672-4332-8399-A96952065B5A");C.AdvancedMutualExclusionObject=new C("A08649CF-4775-4670-8A16-6E35357566CD");C.GroupMutualExclusionObject=new C("D1465A40-5A79-4338-B71B-E36B8FD6C249");C.StreamPrioritizationObject=new C("D4FED15B-88D3-454F-81F0-ED5C45999E24");C.BandwidthSharingObject=new C("A69609E6-517B-11D2-B6AF-00C04FD908E9");C.LanguageListObject=new C("7C4346A9-EFE0-4BFC-B229-393EDE415C85");C.MetadataObject=new C("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");C.MetadataLibraryObject=new C("44231C94-9498-49D1-A141-1D134E457054");C.IndexParametersObject=new C("D6E229DF-35DA-11D1-9034-00A0C90349BE");C.MediaObjectIndexParametersObject=new C("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");C.TimecodeIndexParametersObject=new C("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");C.CompatibilityObject=new C("26F18B5D-4584-47EC-9F5F-0E651F0452C9");C.AdvancedContentEncryptionObject=new C("43058533-6981-49E6-9B74-AD12CB86D58C");C.AudioMedia=new C("F8699E40-5B4D-11CF-A8FD-00805F5C442B");C.VideoMedia=new C("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");C.CommandMedia=new C("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");C.JFIF_Media=new C("B61BE100-5B4E-11CF-A8FD-00805F5C442B");C.Degradable_JPEG_Media=new C("35907DE0-E415-11CF-A917-00805F5C442B");C.FileTransferMedia=new C("91BD222C-F21C-497A-8B6D-5AA86BFC0185");C.BinaryMedia=new C("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");C.ASF_Index_Placeholder_Object=new C("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");function XM(t){return QM[t]}function Mf(t){return Ri(gt(t,"utf-16le"))}const QM=[Mf,W_,YM,JM,ZM,BI,W_];function W_(t){return new Uint8Array(t)}function YM(t,e=0){return BI(t,e)===1}function JM(t,e=0){return J.get(t,e)}function ZM(t,e=0){return Zt.get(t,e)}function BI(t,e=0){return ke.get(t,e)}var H_;(function(t){t[t.UnicodeString=0]="UnicodeString",t[t.ByteArray=1]="ByteArray",t[t.Bool=2]="Bool",t[t.DWord=3]="DWord",t[t.QWord=4]="QWord",t[t.Word=5]="Word"})(H_||(H_={}));const eL={len:30,get:(t,e)=>({objectId:C.fromBin(t,e),objectSize:Number(Zt.get(t,e+16)),numberOfHeaderObjects:J.get(t,e+24)})},Cs={len:24,get:(t,e)=>({objectId:C.fromBin(t,e),objectSize:Number(Zt.get(t,e+16))})};class vo{constructor(e){this.len=Number(e.objectSize)-Cs.len}postProcessTag(e,n,r,i){if(n==="WM/Picture")e.push({id:n,value:tx.fromBuffer(i)});else{const s=XM(r);if(!s)throw new Error(`unexpected value headerType: ${r}`);e.push({id:n,value:s(i)})}}}class q_ extends vo{get(e,n){return null}}class M0 extends vo{get(e,n){return{fileId:C.fromBin(e,n),fileSize:Zt.get(e,n+16),creationDate:Zt.get(e,n+24),dataPacketsCount:Zt.get(e,n+32),playDuration:Zt.get(e,n+40),sendDuration:Zt.get(e,n+48),preroll:Zt.get(e,n+56),flags:{broadcast:Ye(e,n+64,24),seekable:Ye(e,n+64,25)},minimumDataPacketSize:J.get(e,n+68),maximumDataPacketSize:J.get(e,n+72),maximumBitrate:J.get(e,n+76)}}}M0.guid=C.FilePropertiesObject;class L0 extends vo{get(e,n){return{streamType:C.decodeMediaType(C.fromBin(e,n)),errorCorrectionType:C.fromBin(e,n+8)}}}L0.guid=C.StreamPropertiesObject;class F0{constructor(){this.len=22}get(e,n){const r=new DataView(e.buffer,n);return{reserved1:C.fromBin(e,n),reserved2:r.getUint16(16,!0),extensionDataSize:r.getUint16(18,!0)}}}F0.guid=C.HeaderExtensionObject;const tL={len:20,get:(t,e)=>({entryCount:new DataView(t.buffer,e).getUint16(16,!0)})};async function G_(t){const e=await t.readNumber(ke);return(await t.readToken(new ne(e*2,"utf-16le"))).replace("\0","")}async function nL(t){const e=await t.readToken(tL),n=[];for(let r=0;r<e.entryCount;++r)n.push(await iL(t));return n}async function rL(t){const e=await t.readNumber(ke),n=new Uint8Array(e);return await t.readBuffer(n),n}async function iL(t){const e=await t.readNumber(ke);return{type:{videoCodec:(e&1)===1,audioCodec:(e&2)===2},codecName:await G_(t),description:await G_(t),information:await rL(t)}}class Js extends vo{get(e,n){const r=[],i=new DataView(e.buffer,n);let s=10;for(let o=0;o<Js.contentDescTags.length;++o){const a=i.getUint16(o*2,!0);if(a>0){const l=Js.contentDescTags[o],c=s+a;r.push({id:l,value:Mf(e.slice(n+s,n+c))}),s=c}}return r}}Js.guid=C.ContentDescriptionObject;Js.contentDescTags=["Title","Author","Copyright","Description","Rating"];class $0 extends vo{get(e,n){const r=[],i=new DataView(e.buffer,n),s=i.getUint16(0,!0);let o=2;for(let a=0;a<s;a+=1){const l=i.getUint16(o,!0);o+=2;const c=Mf(e.slice(n+o,n+o+l));o+=l;const d=i.getUint16(o,!0);o+=2;const h=i.getUint16(o,!0);o+=2;const m=e.slice(n+o,n+o+h);o+=h,this.postProcessTag(r,c,d,m)}return r}}$0.guid=C.ExtendedContentDescriptionObject;class B0 extends vo{get(e,n){const r=new DataView(e.buffer,n);return{startTime:Zt.get(e,n),endTime:Zt.get(e,n+8),dataBitrate:r.getInt32(12,!0),bufferSize:r.getInt32(16,!0),initialBufferFullness:r.getInt32(20,!0),alternateDataBitrate:r.getInt32(24,!0),alternateBufferSize:r.getInt32(28,!0),alternateInitialBufferFullness:r.getInt32(32,!0),maximumObjectSize:r.getInt32(36,!0),flags:{reliableFlag:Ye(e,n+40,0),seekableFlag:Ye(e,n+40,1),resendLiveCleanpointsFlag:Ye(e,n+40,2)},streamNumber:r.getInt16(42,!0),streamLanguageId:r.getInt16(44,!0),averageTimePerFrame:r.getInt32(52,!0),streamNameCount:r.getInt32(54,!0),payloadExtensionSystems:r.getInt32(56,!0),streamNames:[],streamPropertiesObject:null}}}B0.guid=C.ExtendedStreamPropertiesObject;class Sh extends vo{get(e,n){const r=[],i=new DataView(e.buffer,n),s=i.getUint16(0,!0);let o=2;for(let a=0;a<s;a+=1){o+=4;const l=i.getUint16(o,!0);o+=2;const c=i.getUint16(o,!0);o+=2;const d=i.getUint32(o,!0);o+=4;const h=Mf(e.slice(n+o,n+o+l));o+=l;const m=e.slice(n+o,n+o+d);o+=d,this.postProcessTag(r,h,c,m)}return r}}Sh.guid=C.MetadataObject;class z0 extends Sh{}z0.guid=C.MetadataLibraryObject;class tx{static fromBuffer(e){return new tx(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=new DataView(e.buffer,n),i=r.getUint8(0),s=r.getInt32(1,!0);let o=5;for(;r.getUint16(o)!==0;)o+=2;const a=new ne(o-5,"utf-16le").get(e,5);for(;r.getUint16(o)!==0;)o+=2;const l=new ne(o-5,"utf-16le").get(e,5);return{type:xc[i],format:a,description:l,size:s,data:e.slice(o+4)}}}const Yu=Ne("music-metadata:parser:ASF"),sL="asf";class oL extends Bn{async parse(){const e=await this.tokenizer.readToken(eL);if(!e.objectId.equals(C.HeaderObject))throw new Error(`expected asf header; but was not found; got: ${e.objectId.str}`);try{await this.parseObjectHeader(e.numberOfHeaderObjects)}catch(n){Yu("Error while parsing ASF: %s",n)}}async parseObjectHeader(e){let n;do{const r=await this.tokenizer.readToken(Cs);switch(Yu("header GUID=%s",r.objectId.str),r.objectId.str){case M0.guid.str:{const i=await this.tokenizer.readToken(new M0(r));this.metadata.setFormat("duration",Number(i.playDuration/BigInt(1e3))/1e4-Number(i.preroll)/1e3),this.metadata.setFormat("bitrate",i.maximumBitrate);break}case L0.guid.str:{const i=await this.tokenizer.readToken(new L0(r));this.metadata.setFormat("container",`ASF/${i.streamType}`);break}case F0.guid.str:{const i=await this.tokenizer.readToken(new F0);await this.parseExtensionObject(i.extensionDataSize);break}case Js.guid.str:n=await this.tokenizer.readToken(new Js(r)),await this.addTags(n);break;case $0.guid.str:n=await this.tokenizer.readToken(new $0(r)),await this.addTags(n);break;case C.CodecListObject.str:{const i=await nL(this.tokenizer);i.forEach(o=>{this.metadata.addStreamInfo({type:o.type.videoCodec?Ys.video:Ys.audio,codecName:o.codecName})});const s=i.filter(o=>o.type.audioCodec).map(o=>o.codecName).join("/");this.metadata.setFormat("codec",s);break}case C.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(r.objectSize-Cs.len);break;case C.PaddingObject.str:Yu("Padding: %s bytes",r.objectSize-Cs.len),await this.tokenizer.ignore(r.objectSize-Cs.len);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${r.objectId.str}`),Yu("Ignore ASF-Object-GUID: %s",r.objectId.str),await this.tokenizer.readToken(new q_(r))}}while(--e)}async addTags(e){await Promise.all(e.map(({id:n,value:r})=>this.metadata.addTag(sL,n,r)))}async parseExtensionObject(e){do{const n=await this.tokenizer.readToken(Cs),r=n.objectSize-Cs.len;switch(n.objectId.str){case B0.guid.str:await this.tokenizer.readToken(new B0(n));break;case Sh.guid.str:{const i=await this.tokenizer.readToken(new Sh(n));await this.addTags(i);break}case z0.guid.str:{const i=await this.tokenizer.readToken(new z0(n));await this.addTags(i);break}case C.PaddingObject.str:await this.tokenizer.ignore(r);break;case C.CompatibilityObject.str:this.tokenizer.ignore(r);break;case C.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(r);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${n.objectId.str}`),await this.tokenizer.readToken(new q_(n));break}e-=n.objectSize}while(e>0)}}class wc{static fromBase64(e){return wc.fromBuffer(Uint8Array.from(atob(e),n=>n.charCodeAt(0)))}static fromBuffer(e){return new wc(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=xc[re.get(e,n)];n+=4;const i=re.get(e,n);n+=4;const s=new ne(i,"utf-8").get(e,n);n+=i;const o=re.get(e,n);n+=4;const a=new ne(o,"utf-8").get(e,n);n+=o;const l=re.get(e,n);n+=4;const c=re.get(e,n);n+=4;const d=re.get(e,n);n+=4;const h=re.get(e,n);n+=4;const m=re.get(e,n);n+=4;const p=Uint8Array.from(e.slice(n,n+m));return{type:r,format:s,description:a,width:l,height:c,colour_depth:d,indexed_color:h,data:p}}}const Ju={len:7,get:(t,e)=>({packetType:he.get(t,e),vorbis:new ne(6,"ascii").get(t,e+1)})},aL={len:23,get:(t,e)=>({version:J.get(t,e+0),channelMode:he.get(t,e+4),sampleRate:J.get(t,e+5),bitrateMax:J.get(t,e+9),bitrateNominal:J.get(t,e+13),bitrateMin:J.get(t,e+17)})},Op=Ne("music-metadata:parser:ID3");class Lf extends Bn{constructor(){super(...arguments),this.id3parser=new ar}static async startsWithID3v2Header(e){return(await e.peekToken(O0)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(e){if(e instanceof st)Op("End-of-stream");else throw e}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),Op("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new ex().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(O0)).fileIdentifier==="ID3")return Op("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}class zI{constructor(e,n){this.data=e,this.offset=n}readInt32(){const e=J.get(this.data,this.offset);return this.offset+=4,e}readStringUtf8(){const e=this.readInt32(),n=new TextDecoder("utf-8").decode(this.data.subarray(this.offset,this.offset+e));return this.offset+=e,n}parseUserComment(){const e=this.offset,n=this.readStringUtf8(),r=n.indexOf("=");return{key:n.slice(0,r).toUpperCase(),value:n.slice(r+1),len:this.offset-e}}}const Ro=Ne("music-metadata:parser:ogg:vorbis1");class Zs{constructor(e,n){this.metadata=e,this.options=n,this.pageSegments=[]}async parsePage(e,n){if(e.headerType.firstPage)this.parseFirstPage(e,n);else{if(e.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(n)}if(e.headerType.lastPage||!e.headerType.continued){if(this.pageSegments.length>0){const r=Zs.mergeUint8Arrays(this.pageSegments);await this.parseFullPage(r)}this.pageSegments=e.headerType.lastPage?[]:[n]}}e.headerType.lastPage&&this.calculateDuration(e)}static mergeUint8Arrays(e){const n=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(n);return e.forEach((i,s,o)=>{const a=o.slice(0,s).reduce((l,c)=>l+c.length,0);r.set(i,a)}),r}async flush(){await this.parseFullPage(Zs.mergeUint8Arrays(this.pageSegments))}async parseUserComment(e,n){const i=new zI(e,n).parseUserComment();return await this.addTag(i.key,i.value),i.len}async addTag(e,n){if(e==="METADATA_BLOCK_PICTURE"&&typeof n=="string"){if(this.options.skipCovers){Ro("Ignore picture");return}n=wc.fromBase64(n),Ro(`Push picture: id=${e}, format=${n.format}`)}else Ro(`Push tag: id=${e}, value=${n}`);await this.metadata.addTag("vorbis",e,n)}calculateDuration(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",e.absoluteGranulePosition/this.metadata.format.sampleRate))}parseFirstPage(e,n){this.metadata.setFormat("codec","Vorbis I"),Ro("Parse first page");const r=Ju.get(n,0);if(r.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(r.packetType===1){const i=aL.get(n,Ju.len);this.metadata.setFormat("sampleRate",i.sampleRate),this.metadata.setFormat("bitrate",i.bitrateNominal),this.metadata.setFormat("numberOfChannels",i.channelMode),Ro("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",i.sampleRate,i.bitrateNominal,i.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}async parseFullPage(e){const n=Ju.get(e,0);switch(Ro("Parse full page: type=%s, byteLength=%s",n.packetType,e.byteLength),n.packetType){case 3:return this.parseUserCommentList(e,Ju.len)}}async parseUserCommentList(e,n){const r=J.get(e,n);n+=4,n+=r;let i=J.get(e,n);for(n+=4;i-- >0;)n+=await this.parseUserComment(e,n)}}const lL=Ne("music-metadata:parser:FLAC");var Gr;(function(t){t[t.STREAMINFO=0]="STREAMINFO",t[t.PADDING=1]="PADDING",t[t.APPLICATION=2]="APPLICATION",t[t.SEEKTABLE=3]="SEEKTABLE",t[t.VORBIS_COMMENT=4]="VORBIS_COMMENT",t[t.CUESHEET=5]="CUESHEET",t[t.PICTURE=6]="PICTURE"})(Gr||(Gr={}));class cL extends Lf{constructor(){super(...arguments),this.padding=0}init(e,n,r){return super.init(e,n,r),this.vorbisParser=new Zs(e,r),this}async postId3v2Parse(){if((await this.tokenizer.readToken(Ve)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let n;do n=await this.tokenizer.readToken(uL),await this.parseDataBlock(n);while(!n.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}async parseDataBlock(e){switch(lL(`blockHeader type=${e.type}, length=${e.length}`),e.type){case Gr.STREAMINFO:return this.parseBlockStreamInfo(e.length);case Gr.PADDING:this.padding+=e.length;break;case Gr.APPLICATION:break;case Gr.SEEKTABLE:break;case Gr.VORBIS_COMMENT:return this.parseComment(e.length);case Gr.CUESHEET:break;case Gr.PICTURE:await this.parsePicture(e.length);return;default:this.metadata.addWarning(`Unknown block type: ${e.type}`)}return this.tokenizer.ignore(e.length).then()}async parseBlockStreamInfo(e){if(e!==K_.len)throw new Error("Unexpected block-stream-info length");const n=await this.tokenizer.readToken(K_);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",n.channels),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("sampleRate",n.sampleRate),n.totalSamples>0&&this.metadata.setFormat("duration",n.totalSamples/n.sampleRate)}async parseComment(e){const n=await this.tokenizer.readToken(new ln(e)),r=new zI(n,0);r.readStringUtf8();const i=r.readInt32(),s=new Array(i);for(let o=0;o<i;o++)s[o]=r.parseUserComment();await Promise.all(s.map(o=>this.vorbisParser.addTag(o.key,o.value)))}async parsePicture(e){if(this.options.skipCovers)return this.tokenizer.ignore(e);const n=await this.tokenizer.readToken(new wc(e));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",n)}}const uL={len:4,get:(t,e)=>({lastBlock:Ye(t,e,7),type:ve(t,e,1,7),length:rn.get(t,e+1)})},K_={len:34,get:(t,e)=>({minimumBlockSize:Re.get(t,e),maximumBlockSize:Re.get(t,e+2)/1e3,minimumFrameSize:rn.get(t,e+4),maximumFrameSize:rn.get(t,e+7),sampleRate:rn.get(t,e+10)>>4,channels:ve(t,e+12,4,3)+1,bitsPerSample:ve(t,e+12,7,5)+1,totalSamples:ve(t,e+13,4,36),fileMD5:new ln(16).get(t,e+18)})},VI=Ne("music-metadata:parser:MP4:atom"),bh={len:8,get:(t,e)=>{const n=re.get(t,e);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new ne(4,"latin1").get(t,e+4)}},put:(t,e,n)=>(re.put(t,e,Number(n.length)),Ve.put(t,e+4,n.name))},dL=Kv,X_={len:4,get:(t,e)=>({type:new ne(4,"ascii").get(t,e)})};class UI{constructor(e,n,r){if(this.len=e,e<n)throw new Error(`Atom ${r} expected to be ${n}, but specifies ${e} bytes long.`);e>n&&VI(`Warning: atom ${r} expected to be ${n}, but was actually ${e} bytes long.`)}}const ka={len:4,get:(t,e)=>{const n=re.get(t,e)-2082844800;return new Date(n*1e3)}};class hL extends UI{constructor(e){super(e,24,"mdhd"),this.len=e}get(e,n){return{version:he.get(e,n+0),flags:rn.get(e,n+1),creationTime:ka.get(e,n+4),modificationTime:ka.get(e,n+8),timeScale:re.get(e,n+12),duration:re.get(e,n+16),language:Re.get(e,n+20),quality:Re.get(e,n+22)}}}class fL extends UI{constructor(e){super(e,100,"mvhd"),this.len=e}get(e,n){return{version:he.get(e,n),flags:rn.get(e,n+1),creationTime:ka.get(e,n+4),modificationTime:ka.get(e,n+8),timeScale:re.get(e,n+12),duration:re.get(e,n+16),preferredRate:re.get(e,n+20),preferredVolume:Re.get(e,n+24),previewTime:re.get(e,n+72),previewDuration:re.get(e,n+76),posterTime:re.get(e,n+80),selectionTime:re.get(e,n+84),selectionDuration:re.get(e,n+88),currentTime:re.get(e,n+92),nextTrackID:re.get(e,n+96)}}}class mL{constructor(e){this.len=e}get(e,n){return{type:{set:he.get(e,n+0),type:rn.get(e,n+1)},locale:rn.get(e,n+4),value:new ln(this.len-8).get(e,n+8)}}}class pL{constructor(e){this.len=e}get(e,n){return{version:he.get(e,n),flags:rn.get(e,n+1),name:new ne(this.len-4,"utf-8").get(e,n+4)}}}class gL{constructor(e){this.len=e}get(e,n){return{version:he.get(e,n),flags:rn.get(e,n+1),creationTime:ka.get(e,n+4),modificationTime:ka.get(e,n+8),trackId:re.get(e,n+12),duration:re.get(e,n+20),layer:Re.get(e,n+24),alternateGroup:Re.get(e,n+26),volume:Re.get(e,n+28)}}}const Q_={len:8,get:(t,e)=>({version:he.get(t,e),flags:rn.get(t,e+1),numberOfEntries:re.get(t,e+4)})};class yL{constructor(e){this.len=e}get(e,n){return{dataFormat:Ve.get(e,n),dataReferenceIndex:Re.get(e,n+10),description:new ln(this.len-12).get(e,n+12)}}}class vL{constructor(e){this.len=e}get(e,n){const r=Q_.get(e,n);n+=Q_.len;const i=[];for(let s=0;s<r.numberOfEntries;++s){const o=re.get(e,n);n+=re.len,i.push(new yL(o).get(e,n)),n+=o}return{header:r,table:i}}}const Y_={len:8,get(t,e){return{version:Yr.get(t,e),revision:Yr.get(t,e+2),vendor:Rn.get(t,e+4)}}},xL={len:12,get(t,e){return{numAudioChannels:Yr.get(t,e+0),sampleSize:Yr.get(t,e+2),compressionId:Yr.get(t,e+4),packetSize:Yr.get(t,e+6),sampleRate:Re.get(t,e+8)+Re.get(t,e+10)/1e4}}};class nx{constructor(e,n){this.len=e,this.token=n}get(e,n){const r=Rn.get(e,n+4);return{version:vc.get(e,n+0),flags:Gv.get(e,n+1),numberOfEntries:r,entries:WI(e,this.token,n+8,this.len-8,r)}}}const wL={len:8,get(t,e){return{count:Rn.get(t,e+0),duration:Rn.get(t,e+4)}}};class _L extends nx{constructor(e){super(e,wL),this.len=e}}const EL={len:12,get(t,e){return{firstChunk:Rn.get(t,e),samplesPerChunk:Rn.get(t,e+4),sampleDescriptionId:Rn.get(t,e+8)}}};class SL extends nx{constructor(e){super(e,EL),this.len=e}}class bL{constructor(e){this.len=e}get(e,n){const r=Rn.get(e,n+8);return{version:vc.get(e,n),flags:Gv.get(e,n+1),sampleSize:Rn.get(e,n+4),numberOfEntries:r,entries:WI(e,Rn,n+12,this.len-12,r)}}}class kL extends nx{constructor(e){super(e,Rn),this.len=e}}class TL{constructor(e){this.len=e}get(e,n){const r=Yr.get(e,n+0);return new ne(r,"utf-8").get(e,n+2)}}function WI(t,e,n,r,i){if(VI(`remainingLen=${r}, numberOfEntries=${i} * token-len=${e.len}`),r===0)return[];if(r!==i*e.len)throw new Error("mismatch number-of-entries with remaining atom-length");const s=[];for(let o=0;o<i;++o)s.push(e.get(t,n)),n+=e.len;return s}const IL=Ne("music-metadata:parser:MP4:Atom");class kh{static async readAtom(e,n,r,i){const s=e.position,o=await e.readToken(bh);o.length===BigInt(1)&&(o.length=await e.readToken(dL));const l=new kh(o,o.length===BigInt(1),r),c=l.getPayloadLength(i);return IL(`parse atom name=${l.atomPath}, extended=${l.extended}, offset=${s}, len=${l.header.length}`),await l.readData(e,n,c),l}constructor(e,n,r){this.header=e,this.extended=n,this.parent=r,this.children=[],this.atomPath=(this.parent?`${this.parent.atomPath}.`:"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(e){return(this.header.length===BigInt(0)?e:Number(this.header.length))-this.getHeaderLength()}async readAtoms(e,n,r){for(;r>0;){const i=await kh.readAtom(e,n,this,r);this.children.push(i),r-=i.header.length===BigInt(0)?r:Number(i.header.length)}}async readData(e,n,r){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(e,n,this.getPayloadLength(r));case"meta":{const s=(await e.peekToken(bh)).name==="hdlr"?0:4;return await e.ignore(s),this.readAtoms(e,n,this.getPayloadLength(r)-s)}default:return n(this,r)}}}const vr=Ne("music-metadata:parser:MP4"),CL="iTunes",J_={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function Z_(t,e,n){return n.indexOf(t)===e}class Th extends Bn{constructor(){super(...arguments),this.tracks=[],this.atomParsers={mvhd:async e=>{const n=await this.tokenizer.readToken(new fL(e));this.metadata.setFormat("creationTime",n.creationTime),this.metadata.setFormat("modificationTime",n.modificationTime)},mdhd:async e=>{const n=await this.tokenizer.readToken(new hL(e)),r=this.getTrackDescription();r.creationTime=n.creationTime,r.modificationTime=n.modificationTime,r.timeScale=n.timeScale,r.duration=n.duration},chap:async e=>{const n=this.getTrackDescription(),r=[];for(;e>=re.len;)r.push(await this.tokenizer.readNumber(re)),e-=re.len;n.chapterList=r},tkhd:async e=>{const n=await this.tokenizer.readToken(new gL(e));this.tracks.push(n)},mdat:async e=>{if(this.audioLengthInBytes=e,this.calculateBitRate(),this.options.includeChapters){const n=this.tracks.filter(r=>r.chapterList);if(n.length===1){const r=n[0].chapterList,i=this.tracks.filter(s=>r.indexOf(s.trackId)!==-1);if(i.length===1)return this.parseChapterTrack(i[0],n[0],e)}}await this.tokenizer.ignore(e)},ftyp:async e=>{const n=[];for(;e>0;){const i=await this.tokenizer.readToken(X_);e-=X_.len;const s=i.type.replace(/\W/g,"");s.length>0&&n.push(s)}vr(`ftyp: ${n.join("/")}`);const r=n.filter(Z_).join("/");this.metadata.setFormat("container",r)},stsd:async e=>{const n=await this.tokenizer.readToken(new vL(e)),r=this.getTrackDescription();r.soundSampleDescription=n.table.map(i=>this.parseSoundSampleDescription(i))},stsc:async e=>{const n=await this.tokenizer.readToken(new SL(e));this.getTrackDescription().sampleToChunkTable=n.entries},stts:async e=>{const n=await this.tokenizer.readToken(new _L(e));this.getTrackDescription().timeToSampleTable=n.entries},stsz:async e=>{const n=await this.tokenizer.readToken(new bL(e)),r=this.getTrackDescription();r.sampleSize=n.sampleSize,r.sampleSizeTable=n.entries},stco:async e=>{const n=await this.tokenizer.readToken(new kL(e));this.getTrackDescription().chunkOffsetTable=n.entries},date:async e=>{const n=await this.tokenizer.readToken(new ne(e,"utf-8"));await this.addTag("date",n)}}}static read_BE_Integer(e,n){const r=(n?"INT":"UINT")+e.length*8+(e.length>1?"_BE":""),i=jj[r];if(!i)throw new Error(`Token for integer type not found: "${r}"`);return Number(i.get(e,0))}async parse(){this.tracks=[];let e=this.tokenizer.fileInfo.size||0;for(;!this.tokenizer.fileInfo.size||e>0;){try{if((await this.tokenizer.peekToken(bh)).name==="\0\0\0\0"){const o=`Error at offset=${this.tokenizer.position}: box.id=0`;vr(o),this.addWarning(o);break}}catch(s){if(s instanceof Error){const o=`Error at offset=${this.tokenizer.position}: ${s.message}`;vr(o),this.addWarning(o)}else throw s;break}const i=await kh.readAtom(this.tokenizer,(s,o)=>this.handleAtom(s,o),null,e);e-=i.header.length===BigInt(0)?e:Number(i.header.length)}const n=[];this.tracks.forEach(i=>{const s=[];i.soundSampleDescription.forEach(o=>{const a={},l=J_[o.dataFormat];if(l?(s.push(l.format),a.codecName=l.format):a.codecName=`<${o.dataFormat}>`,o.description){const{description:c}=o;c.sampleRate>0&&(a.type=Ys.audio,a.audio={samplingFrequency:c.sampleRate,bitDepth:c.sampleSize,channels:c.numAudioChannels})}this.metadata.addStreamInfo(a)}),s.length>=1&&n.push(s.join("/"))}),n.length>0&&this.metadata.setFormat("codec",n.filter(Z_).join("+"));const r=this.tracks.filter(i=>i.soundSampleDescription.length>=1&&i.soundSampleDescription[0].description&&i.soundSampleDescription[0].description.numAudioChannels>0);if(r.length>=1){const i=r[0];if(i.timeScale>0){const a=i.duration/i.timeScale;this.metadata.setFormat("duration",a)}const s=i.soundSampleDescription[0];if(s.description&&(this.metadata.setFormat("sampleRate",s.description.sampleRate),this.metadata.setFormat("bitsPerSample",s.description.sampleSize),this.metadata.setFormat("numberOfChannels",s.description.numAudioChannels),i.timeScale===0&&i.timeToSampleTable.length>0)){const l=i.timeToSampleTable.map(c=>c.count*c.duration).reduce((c,d)=>c+d)/s.description.sampleRate;this.metadata.setFormat("duration",l)}const o=J_[s.dataFormat];o&&this.metadata.setFormat("lossless",!o.lossy),this.calculateBitRate()}}async handleAtom(e,n){if(e.parent)switch(e.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(e)}if(this.atomParsers[e.header.name])return this.atomParsers[e.header.name](n);vr(`No parser for atom path=${e.atomPath}, payload-len=${n}, ignoring atom`),await this.tokenizer.ignore(n)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}async addTag(e,n){await this.metadata.addTag(CL,e,n)}addWarning(e){vr(`Warning: ${e}`),this.metadata.addWarning(e)}parseMetadataItemData(e){let n=e.header.name;return e.readAtoms(this.tokenizer,async(r,i)=>{const s=r.getPayloadLength(i);switch(r.header.name){case"data":return this.parseValueAtom(n,r);case"name":case"mean":case"rate":{const o=await this.tokenizer.readToken(new pL(s));n+=`:${o.name}`;break}default:{const o=await this.tokenizer.readToken(new ln(s));this.addWarning(`Unsupported meta-item: ${n}[${r.header.name}] => value=${Qv(o)} ascii=${Xv(o,"ascii")}`)}}},e.getPayloadLength(0))}async parseValueAtom(e,n){const r=await this.tokenizer.readToken(new mL(Number(n.header.length)-bh.len));if(r.type.set!==0)throw new Error(`Unsupported type-set != 0: ${r.type.set}`);switch(r.type.type){case 0:switch(e){case"trkn":case"disk":{const i=he.get(r.value,3),s=he.get(r.value,5);await this.addTag(e,`${i}/${s}`);break}case"gnre":{const i=he.get(r.value,1),s=Eh[i-1];await this.addTag(e,s);break}case"rate":{const i=new TextDecoder("ascii").decode(r.value);await this.addTag(e,i);break}default:vr(`unknown proprietary value type for: ${n.atomPath}`)}break;case 1:case 18:await this.addTag(e,new TextDecoder("utf-8").decode(r.value));break;case 13:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/jpeg",data:Uint8Array.from(r.value)});break;case 14:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/png",data:Uint8Array.from(r.value)});break;case 21:await this.addTag(e,Th.read_BE_Integer(r.value,!0));break;case 22:await this.addTag(e,Th.read_BE_Integer(r.value,!1));break;case 65:await this.addTag(e,he.get(r.value,0));break;case 66:await this.addTag(e,Re.get(r.value,0));break;case 67:await this.addTag(e,re.get(r.value,0));break;default:this.addWarning(`atom key=${e}, has unknown well-known-type (data-type): ${r.type.type}`)}}parseSoundSampleDescription(e){const n={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex};let r=0;const i=Y_.get(e.description,r);return r+=Y_.len,i.version===0||i.version===1?n.description=xL.get(e.description,r):vr(`Warning: sound-sample-description ${i} not implemented`),n}async parseChapterTrack(e,n,r){if(!e.sampleSize&&e.chunkOffsetTable.length!==e.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const i=[];for(let s=0;s<e.chunkOffsetTable.length&&r>0;++s){const a=e.chunkOffsetTable[s]-this.tokenizer.position,l=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[s];if(r-=a+l,r<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(a);const c=await this.tokenizer.readToken(new TL(l));vr(`Chapter ${s+1}: ${c}`);const d={title:c,sampleOffset:this.findSampleOffset(n,this.tokenizer.position)};vr(`Chapter title=${d.title}, offset=${d.sampleOffset}/${this.tracks[0].duration}`),i.push(d)}this.metadata.setFormat("chapters",i),await this.tokenizer.ignore(r)}findSampleOffset(e,n){let r=0;e.timeToSampleTable.forEach(s=>{r+=s.count*s.duration}),vr(`Total duration=${r}`);let i=0;for(;i<e.chunkOffsetTable.length&&e.chunkOffsetTable[i]<n;)++i;return this.getChunkDuration(i+1,e)}getChunkDuration(e,n){let r=0,i=n.timeToSampleTable[r].count,s=n.timeToSampleTable[r].duration,o=1,a=this.getSamplesPerChunk(o,n.sampleToChunkTable),l=0;for(;o<e;){const c=Math.min(i,a);l+=c*s,i-=c,a-=c,a===0?(++o,a=this.getSamplesPerChunk(o,n.sampleToChunkTable)):(++r,i=n.timeToSampleTable[r].count,s=n.timeToSampleTable[r].duration)}return l}getSamplesPerChunk(e,n){for(let r=0;r<n.length-1;++r)if(e>=n[r].firstChunk&&e<n[r+1].firstChunk)return n[r].samplesPerChunk;return n[n.length-1].samplesPerChunk}}var eE;(function(t){t[t.not_set=0]="not_set",t[t.radio=1]="radio",t[t.audiophile=2]="audiophile"})(eE||(eE={}));var tE;(function(t){t[t.unspecified=0]="unspecified",t[t.engineer=1]="engineer",t[t.user=2]="user",t[t.automatic=3]="automatic",t[t.rms_average=4]="rms_average"})(tE||(tE={}));const nE={len:2,get:(t,e)=>{const n=ve(t,e,0,3),r=ve(t,e,6,1),i=ve(t,e,7,9)/10;if(n>0)return{type:ve(t,e,0,3),origin:ve(t,e,3,3),adjustment:r?-i:i}}},AL={len:27,get:(t,e)=>{const n=re.get(t,e+2);return{revision:ve(t,e,0,4),vbr_method:ve(t,e,4,4),lowpass_filter:100*he.get(t,e+1),track_peak:n===0?null:n/2**23,track_gain:nE.get(t,6),album_gain:nE.get(t,8),music_length:re.get(t,e+20),music_crc:he.get(t,e+24),header_crc:Re.get(t,e+24)}}},rE=new ne(4,"ascii"),jp=new ne(6,"ascii"),RL={len:4,get:(t,e)=>({frames:bn(t,e,31),bytes:bn(t,e,30),toc:bn(t,e,29),vbrScale:bn(t,e,28)})};async function PL(t){const e=await t.readToken(RL),n={numFrames:null,streamSize:null,vbrScale:null};if(e.frames&&(n.numFrames=await t.readToken(re)),e.bytes&&(n.streamSize=await t.readToken(re)),e.toc&&(n.toc=new Uint8Array(100),await t.readBuffer(n.toc)),e.vbrScale&&(n.vbrScale=await t.readToken(re)),await t.peekToken(new ne(4,"ascii"))==="LAME"){await t.ignore(4),n.lame={version:await t.readToken(new ne(5,"ascii"))};const i=n.lame.version.match(/\d+.\d+/g);if(i!==null){const o=i[0].split(".").map(a=>Number.parseInt(a,10));o[0]>=3&&o[1]>=90&&(n.lame.extended=await t.readToken(AL))}}return n}const En=Ne("music-metadata:parser:mpeg"),iE=1024,sE={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,null,null,-1]},NL=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class St{constructor(e,n){this.bitrateIndex=null,this.sampRateFreqIndex=null,this.padding=null,this.privateBit=null,this.channelModeIndex=null,this.modeExtension=null,this.isOriginalMedia=null,this.version=null,this.bitrate=null,this.samplingRate=null,this.frameLength=0,this.versionIndex=ve(e,n+1,3,2),this.layer=St.LayerDescription[ve(e,n+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(e,n):this.parseMpegHeader(e,n),this.isProtectedByCRC=!bn(e,n+1,7)}calcDuration(e){return this.samplingRate==null?null:e*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return St.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}return null}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(e,n){this.container="MPEG",this.bitrateIndex=ve(e,n+2,0,4),this.sampRateFreqIndex=ve(e,n+2,4,2),this.padding=bn(e,n+2,6),this.privateBit=bn(e,n+2,7),this.channelModeIndex=ve(e,n+3,0,2),this.modeExtension=ve(e,n+3,2,2),this.isCopyrighted=bn(e,n+3,4),this.isOriginalMedia=bn(e,n+3,5),this.emphasis=ve(e,n+3,7,2),this.version=St.VersionID[this.versionIndex],this.channelMode=St.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const r=this.calcBitrate();if(!r)throw new Error("Cannot determine bit-rate");if(this.bitrate=r*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(e,n){En("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container=`ADTS/MPEG-${this.version}`;const r=ve(e,n+2,0,2);this.codec="AAC",this.codecProfile=sE.AudioObjectTypes[r],En(`MPEG-4 audio-codec=${this.codec}`);const i=ve(e,n+2,2,4);this.samplingRate=sE.SamplingFrequencies[i],En(`sampling-rate=${this.samplingRate}`);const s=ve(e,n+2,7,3);this.mp4ChannelConfig=NL[s],En(`channel-config=${this.mp4ChannelConfig?this.mp4ChannelConfig.join("+"):"?"}`),this.frameLength=ve(e,n+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return null;if(this.version&&this.bitrateIndex){const e=10*Math.floor(this.version)+this.layer;return St.bitrate_index[this.bitrateIndex][e]}return null}calcSamplingRate(){return this.sampRateFreqIndex===3||this.version===null||this.sampRateFreqIndex==null?null:St.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}St.SyncByte1=255;St.SyncByte2=224;St.VersionID=[2.5,null,2,1];St.LayerDescription=[0,3,2,1];St.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];St.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};St.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};St.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const oE={len:4,get:(t,e)=>new St(t,e)};function DL(t){return`V${Math.floor((100-t)/10)}`}class OL extends Lf{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.offset=0,this.frame_size=0,this.crc=null,this.calculateEofDuration=!1,this.samplesPerFrame=null,this.buf_frame_header=new Uint8Array(4),this.mpegOffset=null,this.syncPeek={buf:new Uint8Array(iE),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let e=!1;for(;!e;)await this.sync(),e=await this.parseCommonMpegHeader()}catch(e){if(e instanceof st){if(En("End-of-stream"),this.calculateEofDuration&&this.samplesPerFrame!==null){const n=this.frameCount*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.format.sampleRate){const r=n/this.metadata.format.sampleRate;En(`Calculate duration at EOF: ${r} sec.`,r),this.metadata.setFormat("duration",r)}}}else throw e}}finalize(){const e=this.metadata.format,n=!!this.metadata.native.ID3v1;if(this.mpegOffset!==null){if(e.duration&&this.tokenizer.fileInfo.size){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);e.codecProfile&&e.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",r*8/e.duration)}else if(this.tokenizer.fileInfo.size&&e.codecProfile==="CBR"){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);if(this.frame_size!==null&&this.samplesPerFrame!==null){const i=Math.round(r/this.frame_size)*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",i),e.sampleRate){const s=i/e.sampleRate;En("Calculate CBR duration based on file size: %s",s),this.metadata.setFormat("duration",s)}}}}}async sync(){let e=!1;for(;;){let n=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:iE,mayBeLess:!0}),this.syncPeek.len<=163)throw new st;for(;;){if(e&&(this.syncPeek.buf[n]&224)===224){this.buf_frame_header[0]=St.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[n],await this.tokenizer.ignore(n),En(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(En(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}if(e=!1,n=this.syncPeek.buf.indexOf(St.SyncByte1,n),n===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new st;await this.tokenizer.ignore(this.syncPeek.len);break}++n,e=!0}}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let e;try{e=oE.get(this.buf_frame_header,0)}catch(n){if(await this.tokenizer.ignore(1),n instanceof Error)return this.metadata.addWarning(`Parse error: ${n.message}`),!1;throw n}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",e.container),this.metadata.setFormat("codec",e.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",e.samplingRate),this.frameCount++,e.version!==null&&e.version>=2&&e.layer===0?this.parseAdts(e):this.parseAudioFrameHeader(e)}async parseAudioFrameHeader(e){this.metadata.setFormat("numberOfChannels",e.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",e.bitrate),this.frameCount<20*1e4&&En("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,e.layer,e.bitrate,e.samplingRate);const n=e.calcSlotSize();if(n===null)throw new Error("invalid slot_size");const r=e.calcSamplesPerFrame();En(`samples_per_frame=${r}`);const i=r/8;if(e.bitrate!==null&&e.samplingRate!=null){const s=i*e.bitrate/e.samplingRate+(e.padding?n:0);this.frame_size=Math.floor(s)}if(this.audioFrameHeader=e,e.bitrate!==null&&this.bitrates.push(e.bitrate),this.frameCount===1)return this.offset=oE.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=r,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=r,this.calculateEofDuration=!0),this.offset=4,e.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(e){const n=new Uint8Array(3);if(await this.tokenizer.readBuffer(n),e.frameLength+=ve(n,0,0,11),this.totalDataLength+=e.frameLength,this.samplesPerFrame=1024,e.samplingRate!==null){const r=e.samplingRate/this.samplesPerFrame,s=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*r+.5;this.metadata.setFormat("bitrate",s),En(`frame-count=${this.frameCount}, size=${e.frameLength} bytes, bit-rate=${s}`)}if(await this.tokenizer.ignore(e.frameLength>7?e.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",e.codecProfile),e.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",e.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Yr),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){if(this.audioFrameHeader){const e=this.audioFrameHeader.calculateSideInfoLength();if(e!==null){await this.tokenizer.readToken(new ln(e)),this.offset+=e,await this.readXtraInfoHeader();return}}}async readXtraInfoHeader(){const e=await this.tokenizer.readToken(rE);switch(this.offset+=rE.len,e){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":{const r=await this.readXingInfoHeader();if(r.vbrScale!==null){const i=DL(r.vbrScale);this.metadata.setFormat("codecProfile",i)}return null}case"Xtra":break;case"LAME":{const r=await this.tokenizer.readToken(jp);if(this.frame_size!==null&&this.frame_size>=this.offset+jp.len)return this.offset+=jp.len,this.metadata.setFormat("tool",`LAME ${r}`),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}}const n=this.frame_size-this.offset;return n<0?this.metadata.addWarning(`Frame ${this.frameCount}corrupt: negative frameDataLeft`):await this.skipFrameData(n),null}async readXingInfoHeader(){const e=this.tokenizer.position,n=await PL(this.tokenizer);if(this.offset+=this.tokenizer.position-e,n.lame&&(this.metadata.setFormat("tool",`LAME ${Ri(n.lame.version)}`),n.lame.extended&&(this.metadata.setFormat("trackPeakLevel",n.lame.extended.track_peak),n.lame.extended.track_gain&&this.metadata.setFormat("trackGain",n.lame.extended.track_gain.adjustment),n.lame.extended.album_gain&&this.metadata.setFormat("albumGain",n.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",n.lame.extended.music_length/1e3))),n.streamSize&&this.audioFrameHeader&&n.numFrames!==null){const i=this.audioFrameHeader.calcDuration(n.numFrames);return this.metadata.setFormat("duration",i),En("Get duration from Xing header: %s",this.metadata.format.duration),n}const r=this.frame_size-this.offset;return await this.skipFrameData(r),n}async skipFrameData(e){if(e<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(e),this.countSkipFrameData+=e}areAllSame(e){const n=e[0];return e.every(r=>r===n)}}const aE=Ne("music-metadata:parser:musepack:sv8"),jL=new ne(2,"latin1"),lE={len:5,get:(t,e)=>({crc:J.get(t,e),streamVersion:he.get(t,e+4)})},cE={len:2,get:(t,e)=>({sampleFrequency:[44100,48e3,37800,32e3][ve(t,e,0,3)],maxUsedBands:ve(t,e,3,5),channelCount:ve(t,e+1,0,4)+1,msUsed:bn(t,e+1,4),audioBlockFrames:ve(t,e+1,5,3)})};class ML{constructor(e){this.tokenizer=e}async readPacketHeader(){const e=await this.tokenizer.readToken(jL),n=await this.readVariableSizeField();return{key:e,payloadLength:n.value-2-n.len}}async readStreamHeader(e){const n={};aE(`Reading SH at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(lE);e-=lE.len,Object.assign(n,r),aE(`SH.streamVersion = ${r.streamVersion}`);const i=await this.readVariableSizeField();e-=i.len,n.sampleCount=i.value;const s=await this.readVariableSizeField();e-=s.len,n.beginningOfSilence=s.value;const o=await this.tokenizer.readToken(cE);return e-=cE.len,Object.assign(n,o),await this.tokenizer.ignore(e),n}async readVariableSizeField(e=1,n=0){let r=await this.tokenizer.readNumber(he);return r&128?(r&=127,r+=n,this.readVariableSizeField(e+1,r<<7)):{len:e,value:n+r}}}const LL=Ne("music-metadata:parser:musepack");class FL extends Bn{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(Ve)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const e=new ML(this.tokenizer);do{const n=await e.readPacketHeader();switch(LL(`packet-header key=${n.key}, payloadLength=${n.payloadLength}`),n.key){case"SH":{const r=await e.readStreamHeader(n.payloadLength);this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("sampleRate",r.sampleFrequency),this.metadata.setFormat("duration",r.sampleCount/r.sampleFrequency),this.metadata.setFormat("numberOfChannels",r.channelCount);break}case"AP":this.audioLength+=n.payloadLength,await this.tokenizer.ignore(n.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(n.payloadLength);break;case"SE":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),br.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${n.key}`)}}while(!0)}}class $L{constructor(e){this.tokenizer=e,this.pos=0,this.dword=null}async read(e){for(;this.dword===null;)this.dword=await this.tokenizer.readToken(J);let n=this.dword;return this.pos+=e,this.pos<32?(n>>>=32-this.pos,n&(1<<e)-1):(this.pos-=32,this.pos===0?(this.dword=null,n&(1<<e)-1):(this.dword=await this.tokenizer.readToken(J),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<e)-1))}async ignore(e){if(this.pos>0){const i=32-this.pos;this.dword=null,e-=i,this.pos=0}const n=e%32,r=(e-n)/32;return await this.tokenizer.ignore(r*4),this.read(n)}}const BL={len:6*4,get:(t,e)=>{const n={signature:new TextDecoder("latin1").decode(t.subarray(e,e+3)),streamMinorVersion:ve(t,e+3,0,4),streamMajorVersion:ve(t,e+3,4,4),frameCount:J.get(t,e+4),maxLevel:ke.get(t,e+8),sampleFrequency:[44100,48e3,37800,32e3][ve(t,e+10,0,2)],link:ve(t,e+10,2,2),profile:ve(t,e+10,4,4),maxBand:ve(t,e+11,0,6),intensityStereo:bn(t,e+11,6),midSideStereo:bn(t,e+11,7),titlePeak:ke.get(t,e+12),titleGain:ke.get(t,e+14),albumPeak:ke.get(t,e+16),albumGain:ke.get(t,e+18),lastFrameLength:J.get(t,e+20)>>>20&2047,trueGapless:bn(t,e+23,0)};return n.lastFrameLength=n.trueGapless?J.get(t,20)>>>20&2047:0,n}},uE=Ne("music-metadata:parser:musepack");class zL extends Bn{constructor(){super(...arguments),this.bitreader=null,this.audioLength=0,this.duration=null}async parse(){const e=await this.tokenizer.readToken(BL);if(e.signature!=="MP+")throw new Error("Unexpected magic number");uE(`stream-version=${e.streamMajorVersion}.${e.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",e.sampleFrequency);const n=1152*(e.frameCount-1)+e.lastFrameLength;this.metadata.setFormat("numberOfSamples",n),this.duration=n/e.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new $L(this.tokenizer),this.metadata.setFormat("numberOfChannels",e.midSideStereo||e.intensityStereo?2:1);const r=await this.bitreader.read(8);return this.metadata.setFormat("codec",(r/100).toFixed(2)),await this.skipAudioData(e.frameCount),uE(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),br.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(e){for(;e-- >0;){const r=await this.bitreader.read(20);this.audioLength+=20+r,await this.bitreader.ignore(r)}const n=await this.bitreader.read(11);this.audioLength+=n,this.duration!==null&&this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}const dE=Ne("music-metadata:parser:musepack");class VL extends Lf{async postId3v2Parse(){const e=await this.tokenizer.peekToken(new ne(3,"latin1"));let n;switch(e){case"MP+":{dE("Musepack stream-version 7"),n=new zL;break}case"MPC":{dE("Musepack stream-version 8"),n=new FL;break}default:throw new Error("Invalid Musepack signature prefix")}return n.init(this.metadata,this.tokenizer,this.options),n.parse()}}class UL{constructor(e){if(this.len=e,e<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(e,n){return{magicSignature:new ne(8,"ascii").get(e,n+0),version:he.get(e,n+8),channelCount:he.get(e,n+9),preSkip:ke.get(e,n+10),inputSampleRate:J.get(e,n+12),outputGain:ke.get(e,n+16),channelMapping:he.get(e,n+18)}}}class WL extends Zs{constructor(e,n,r){super(e,n),this.tokenizer=r,this.idHeader=null,this.lastPos=-1}parseFirstPage(e,n){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new UL(n.length).get(n,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}async parseFullPage(e){switch(new ne(8,"ascii").get(e,0)){case"OpusTags":await this.parseUserCommentList(e,8),this.lastPos=this.tokenizer.position-e.length;break}}calculateDuration(e){if(this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0){const n=e.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.setFormat("duration",n/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}const HL={len:80,get:(t,e)=>({speex:new ne(8,"ascii").get(t,e+0),version:MI(new ne(20,"ascii").get(t,e+8)),version_id:nt.get(t,e+28),header_size:nt.get(t,e+32),rate:nt.get(t,e+36),mode:nt.get(t,e+40),mode_bitstream_version:nt.get(t,e+44),nb_channels:nt.get(t,e+48),bitrate:nt.get(t,e+52),frame_size:nt.get(t,e+56),vbr:nt.get(t,e+60),frames_per_packet:nt.get(t,e+64),extra_headers:nt.get(t,e+68),reserved1:nt.get(t,e+72),reserved2:nt.get(t,e+76)})},qL=Ne("music-metadata:parser:ogg:speex");class GL extends Zs{constructor(e,n,r){super(e,n),this.tokenizer=r}parseFirstPage(e,n){qL("First Ogg/Speex page");const r=HL.get(n,0);this.metadata.setFormat("codec",`Speex ${r.version}`),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),r.bitrate!==-1&&this.metadata.setFormat("bitrate",r.bitrate)}}const KL={len:42,get:(t,e)=>({id:new ne(7,"ascii").get(t,e),vmaj:he.get(t,e+7),vmin:he.get(t,e+8),vrev:he.get(t,e+9),vmbw:Re.get(t,e+10),vmbh:Re.get(t,e+17),nombr:rn.get(t,e+37),nqual:he.get(t,e+40)})},Mp=Ne("music-metadata:parser:ogg:theora");class XL{constructor(e,n,r){this.metadata=e,this.tokenizer=r}async parsePage(e,n){e.headerType.firstPage&&await this.parseFirstPage(e,n)}async flush(){Mp("flush")}calculateDuration(e){Mp("duration calculation not implemented")}async parseFirstPage(e,n){Mp("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const r=KL.get(n,0);this.metadata.setFormat("bitrate",r.nombr)}}const Hr=Ne("music-metadata:parser:ogg");class rx{static sum(e,n,r){const i=new DataView(e.buffer,0);let s=0;for(let o=n;o<n+r;++o)s+=i.getUint8(o);return s}constructor(e){this.len=e.page_segments}get(e,n){return{totalPageSize:rx.sum(e,n,this.len)}}}class Ff extends Bn{constructor(){super(...arguments),this.header=null,this.pageNumber=0,this.pageConsumer=null}async parse(){Hr("pos=%s, parsePage()",this.tokenizer.position);try{let e;do{if(e=await this.tokenizer.readToken(Ff.Header),e.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=e,this.pageNumber=e.pageSequenceNo,Hr("page#=%s, Ogg.id=%s",e.pageSequenceNo,e.capturePattern);const n=await this.tokenizer.readToken(new rx(e));Hr("totalPageSize=%s",n.totalPageSize);const r=await this.tokenizer.readToken(new ln(n.totalPageSize));if(Hr("firstPage=%s, lastPage=%s, continued=%s",e.headerType.firstPage,e.headerType.lastPage,e.headerType.continued),e.headerType.firstPage){const i=new TextDecoder("ascii").decode(r.subarray(0,7));switch(i){case"vorbis":Hr("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new Zs(this.metadata,this.options);break;case"OpusHea":Hr("Set page consumer to Ogg/Opus"),this.pageConsumer=new WL(this.metadata,this.options,this.tokenizer);break;case"Speex  ":Hr("Set page consumer to Ogg/Speex"),this.pageConsumer=new GL(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":Hr("Set page consumer to Ogg/Theora"),this.pageConsumer=new XL(this.metadata,this.options,this.tokenizer);break;default:throw new Error(`gg audio-codec not recognized (id=${i})`)}}await this.pageConsumer.parsePage(e,r)}while(!e.headerType.lastPage)}catch(e){if(e instanceof Error)e instanceof st?(this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),Hr("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header)):e.message.startsWith("FourCC")&&this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),await this.pageConsumer.flush());else throw e}}}Ff.Header={len:27,get:(t,e)=>({capturePattern:Ve.get(t,e),version:he.get(t,e+4),headerType:{continued:Ye(t,e+5,0),firstPage:Ye(t,e+5,1),lastPage:Ye(t,e+5,2)},absoluteGranulePosition:Number(Zt.get(t,e+6)),streamSerialNumber:J.get(t,e+14),pageSequenceNo:J.get(t,e+18),pageChecksum:J.get(t,e+22),page_segments:he.get(t,e+26)})};const gl={len:8,get:(t,e)=>({chunkID:new ne(4,"latin1").get(t,e),chunkSize:J.get(t,e+4)})};class QL{constructor(e){this.tagHeader=e,this.len=e.chunkSize,this.len+=this.len&1}get(e,n){return new ne(this.tagHeader.chunkSize,"ascii").get(e,n)}}var V0;(function(t){t[t.PCM=1]="PCM",t[t.ADPCM=2]="ADPCM",t[t.IEEE_FLOAT=3]="IEEE_FLOAT",t[t.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",t[t.MPEG_LOAS=5634]="MPEG_LOAS",t[t.RAW_AAC1=255]="RAW_AAC1",t[t.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",t[t.DVM=8192]="DVM",t[t.RAW_SPORT=576]="RAW_SPORT",t[t.ESST_AC3=577]="ESST_AC3",t[t.DRM=9]="DRM",t[t.DTS2=8193]="DTS2",t[t.MPEG=80]="MPEG"})(V0||(V0={}));class YL{constructor(e){if(e.chunkSize<16)throw new Error("Invalid chunk size");this.len=e.chunkSize}get(e,n){return{wFormatTag:ke.get(e,n),nChannels:ke.get(e,n+2),nSamplesPerSec:J.get(e,n+4),nAvgBytesPerSec:J.get(e,n+8),nBlockAlign:ke.get(e,n+12),wBitsPerSample:ke.get(e,n+14)}}}class JL{constructor(e){if(e.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=e.chunkSize}get(e,n){return{dwSampleLength:J.get(e,n)}}}const hE={len:420,get:(t,e)=>({description:Ri(new ne(256,"ascii").get(t,e)).trim(),originator:Ri(new ne(32,"ascii").get(t,e+256)).trim(),originatorReference:Ri(new ne(32,"ascii").get(t,e+288)).trim(),originationDate:Ri(new ne(10,"ascii").get(t,e+320)).trim(),originationTime:Ri(new ne(8,"ascii").get(t,e+330)).trim(),timeReferenceLow:J.get(t,e+338),timeReferenceHigh:J.get(t,e+342),version:ke.get(t,e+346),umid:new ln(64).get(t,e+348),loudnessValue:ke.get(t,e+412),maxTruePeakLevel:ke.get(t,e+414),maxMomentaryLoudness:ke.get(t,e+416),maxShortTermLoudness:ke.get(t,e+418)})},Ei=Ne("music-metadata:parser:RIFF");class ZL extends Bn{constructor(){super(...arguments),this.blockAlign=0}async parse(){const e=await this.tokenizer.readToken(gl);if(Ei(`pos=${this.tokenizer.position}, parse: chunkID=${e.chunkID}`),e.chunkID==="RIFF")return this.parseRiffChunk(e.chunkSize).catch(n=>{if(!(n instanceof st))throw n})}async parseRiffChunk(e){const n=await this.tokenizer.readToken(Ve);switch(this.metadata.setFormat("container",n),n){case"WAVE":return this.readWaveChunk(e-Ve.len);default:throw new Error(`Unsupported RIFF format: RIFF/${n}`)}}async readWaveChunk(e){for(;e>=gl.len;){const n=await this.tokenizer.readToken(gl);switch(e-=gl.len+n.chunkSize,n.chunkSize>e&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=n,Ei(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${n.chunkID}`),n.chunkID){case"LIST":await this.parseListTag(n);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new JL(n));break;case"fmt ":{const r=await this.tokenizer.readToken(new YL(n));let i=V0[r.wFormatTag];i||(Ei(`WAVE/non-PCM format=${r.wFormatTag}`),i=`non-PCM (${r.wFormatTag})`),this.metadata.setFormat("codec",i),this.metadata.setFormat("bitsPerSample",r.wBitsPerSample),this.metadata.setFormat("sampleRate",r.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",r.nChannels),this.metadata.setFormat("bitrate",r.nBlockAlign*r.nSamplesPerSec*8),this.blockAlign=r.nBlockAlign;break}case"id3 ":case"ID3 ":{const r=await this.tokenizer.readToken(new ln(n.chunkSize)),i=ba(r);await new ar().parse(this.metadata,i,this.options);break}case"data":{this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let r=n.chunkSize;if(this.tokenizer.fileInfo.size){const s=this.tokenizer.fileInfo.size-this.tokenizer.position;s<r&&(this.metadata.addWarning("data chunk length exceeding file length"),r=s)}const i=this.fact?this.fact.dwSampleLength:r===4294967295?void 0:r/this.blockAlign;i&&(this.metadata.setFormat("numberOfSamples",i),this.metadata.format.sampleRate&&this.metadata.setFormat("duration",i/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.format.sampleRate&&this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(n.chunkSize);break}case"bext":{const r=await this.tokenizer.readToken(hE);Object.keys(r).forEach(s=>{this.metadata.addTag("exif",`bext.${s}`,r[s])});const i=n.chunkSize-hE.len;await this.tokenizer.ignore(i);break}case"\0\0\0\0":Ei(`Ignore padding chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize);break;default:Ei(`Ignore chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize)}this.header.chunkSize%2===1&&(Ei("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(e){const n=await this.tokenizer.readToken(new ne(4,"latin1"));switch(Ei("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,n),n){case"INFO":return this.parseRiffInfoTags(e.chunkSize-4);default:return this.metadata.addWarning(`Ignore chunk: RIFF/WAVE/LIST/${n}`),Ei(`Ignoring chunkID=RIFF/WAVE/LIST/${n}`),this.tokenizer.ignore(e.chunkSize-4).then()}}async parseRiffInfoTags(e){for(;e>=8;){const n=await this.tokenizer.readToken(gl),r=new QL(n),i=await this.tokenizer.readToken(r);this.addTag(n.chunkID,Ri(i)),e-=8+r.len}if(e!==0)throw new Error(`Illegal remaining size: ${e}`)}addTag(e,n){this.metadata.addTag("exif",e,n)}}const eF=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],Zu={len:32,get:(t,e)=>{const n=J.get(t,e+24),r={BlockID:Ve.get(t,e),blockSize:J.get(t,e+4),version:ke.get(t,e+8),totalSamples:J.get(t,e+12),blockIndex:J.get(t,e+16),blockSamples:J.get(t,e+20),flags:{bitsPerSample:(1+Ih(n,0,2))*8,isMono:wr(n,2),isHybrid:wr(n,3),isJointStereo:wr(n,4),crossChannel:wr(n,5),hybridNoiseShaping:wr(n,6),floatingPoint:wr(n,7),samplingRate:eF[Ih(n,23,4)],isDSD:wr(n,31)},crc:new ln(4).get(t,e+28)};return r.flags.isDSD&&(r.totalSamples*=8),r}},Lp={len:1,get:(t,e)=>({functionId:Ih(t[e],0,6),isOptional:wr(t[e],5),isOddSize:wr(t[e],6),largeBlock:wr(t[e],7)})};function wr(t,e){return Ih(t,e,1)===1}function Ih(t,e,n){return t>>>e&4294967295>>>32-n}const bs=Ne("music-metadata:parser:WavPack");class tF extends Bn{constructor(){super(...arguments),this.audioDataSize=0}async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),br.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(Ve)!=="wvpk")break;const n=await this.tokenizer.readToken(Zu);if(n.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");bs(`WavPack header blockIndex=${n.blockIndex}, len=${Zu.len}`),n.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!n.flags.isHybrid),this.metadata.setFormat("bitsPerSample",n.flags.bitsPerSample),n.flags.isDSD||(this.metadata.setFormat("sampleRate",n.flags.samplingRate),this.metadata.setFormat("duration",n.totalSamples/n.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",n.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",n.totalSamples),this.metadata.setFormat("codec",n.flags.isDSD?"DSD":"PCM"));const r=n.blockSize-(Zu.len-8);await(n.blockIndex===0?this.parseMetadataSubBlock(n,r):this.tokenizer.ignore(r)),n.blockSamples>0&&(this.audioDataSize+=n.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Zu.len);this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(e,n){let r=n;for(;r>Lp.len;){const i=await this.tokenizer.readToken(Lp),s=await this.tokenizer.readNumber(i.largeBlock?vh:he),o=new Uint8Array(s*2-(i.isOddSize?1:0));switch(await this.tokenizer.readBuffer(o),bs(`Metadata Sub-Blocks functionId=0x${i.functionId.toString(16)}, id.largeBlock=${i.largeBlock},data-size=${o.length}`),i.functionId){case 0:break;case 14:{bs("ID_DSD_BLOCK");const a=1<<he.get(o,0),l=e.flags.samplingRate*a*8;if(!e.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",l),this.metadata.setFormat("duration",e.totalSamples/l);break}case 36:bs("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",o);break;case 47:bs(`ID_BLOCK_CHECKSUM: checksum=${Qv(o)}`);break;default:bs(`Ignore unsupported meta-sub-block-id functionId=0x${i.functionId.toString(16)}`);break}r-=Lp.len+(i.largeBlock?vh.len:he.len)+s*2,bs(`remainingLength=${r}`),i.isOddSize&&this.tokenizer.ignore(1)}if(r!==0)throw new Error("metadata-sub-block should fit it remaining length")}}const ed={len:12,get:(t,e)=>({id:Ve.get(t,e),size:Zt.get(t,e+4)})},nF={len:16,get:(t,e)=>({fileSize:xh.get(t,e),metadataPointer:xh.get(t,e+8)})};var fE;(function(t){t[t.mono=1]="mono",t[t.stereo=2]="stereo",t[t.channels=3]="channels",t[t.quad=4]="quad",t[t["4 channels"]=5]="4 channels",t[t["5 channels"]=6]="5 channels",t[t["5.1 channels"]=7]="5.1 channels"})(fE||(fE={}));const rF={len:40,get:(t,e)=>({formatVersion:nt.get(t,e),formatID:nt.get(t,e+4),channelType:nt.get(t,e+8),channelNum:nt.get(t,e+12),samplingFrequency:nt.get(t,e+16),bitsPerSample:nt.get(t,e+20),sampleCount:xh.get(t,e+24),blockSizePerChannel:nt.get(t,e+32)})},Fp=Ne("music-metadata:parser:DSF");class iF extends Lf{async postId3v2Parse(){const e=this.tokenizer.position,n=await this.tokenizer.readToken(ed);if(n.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const r=await this.tokenizer.readToken(nF);if(r.metadataPointer===BigInt(0))Fp("No ID3v2 tag present");else return Fp(`expect ID3v2 at offset=${r.metadataPointer}`),await this.parseChunks(r.fileSize-n.size),await this.tokenizer.ignore(Number(r.metadataPointer)-this.tokenizer.position-e),new ar().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(e){for(;e>=ed.len;){const n=await this.tokenizer.readToken(ed);switch(Fp(`Parsing chunk name=${n.id} size=${n.size}`),n.id){case"fmt ":{const r=await this.tokenizer.readToken(rF);this.metadata.setFormat("numberOfChannels",r.channelNum),this.metadata.setFormat("sampleRate",r.samplingFrequency),this.metadata.setFormat("bitsPerSample",r.bitsPerSample),this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("duration",Number(r.sampleCount)/r.samplingFrequency);const i=r.bitsPerSample*r.samplingFrequency*r.channelNum;this.metadata.setFormat("bitrate",i);return}default:this.tokenizer.ignore(Number(n.size)-ed.len);break}e-=n.size}}}const Po={len:12,get:(t,e)=>({chunkID:Ve.get(t,e),chunkSize:II.get(t,e+4)})},Qt=Ne("music-metadata:parser:aiff");class sF extends Bn{async parse(){const e=await this.tokenizer.readToken(Po);if(e.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const n=(await this.tokenizer.readToken(Ve)).trim();switch(n){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${n}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(e.chunkSize-BigInt(Ve.len));default:throw new Error(`Unsupported DSDIFF type: ${n}`)}}async readFmt8Chunks(e){for(;e>=Po.len;){const n=await this.tokenizer.readToken(Po);Qt(`Chunk id=${n.chunkID}`),await this.readData(n),e-=BigInt(Po.len)+n.chunkSize}}async readData(e){Qt(`Reading data of chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);const n=this.tokenizer.position;switch(e.chunkID.trim()){case"FVER":{const i=await this.tokenizer.readToken(J);Qt(`DSDIFF version=${i}`);break}case"PROP":{if(await this.tokenizer.readToken(Ve)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(e.chunkSize-BigInt(Ve.len));break}case"ID3":{const i=await this.tokenizer.readToken(new ln(Number(e.chunkSize))),s=ba(i);await new ar().parse(this.metadata,s,this.options);break}case"DSD":this.metadata.format.numberOfChannels&&this.metadata.setFormat("numberOfSamples",Number(e.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.format.numberOfSamples&&this.metadata.format.sampleRate&&this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break;default:Qt(`Ignore chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);break}const r=e.chunkSize-BigInt(this.tokenizer.position-n);r>0&&(Qt(`After Parsing chunk, remaining ${r} bytes`),await this.tokenizer.ignore(Number(r)))}async handleSoundPropertyChunks(e){for(Qt(`Parsing sound-property-chunks, remainingSize=${e}`);e>0;){const n=await this.tokenizer.readToken(Po);Qt(`Sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`);const r=this.tokenizer.position;switch(n.chunkID.trim()){case"FS":{const s=await this.tokenizer.readToken(re);this.metadata.setFormat("sampleRate",s);break}case"CHNL":{const s=await this.tokenizer.readToken(Re);this.metadata.setFormat("numberOfChannels",s),await this.handleChannelChunks(n.chunkSize-BigInt(Re.len));break}case"CMPR":{const s=(await this.tokenizer.readToken(Ve)).trim(),o=await this.tokenizer.readToken(he),a=await this.tokenizer.readToken(new ne(o,"ascii"));s==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${s} (${a})`);break}case"ABSS":{const s=await this.tokenizer.readToken(Re),o=await this.tokenizer.readToken(he),a=await this.tokenizer.readToken(he),l=await this.tokenizer.readToken(re);Qt(`ABSS ${s}:${o}:${a}.${l}`);break}case"LSCO":{const s=await this.tokenizer.readToken(Re);Qt(`LSCO lsConfig=${s}`);break}default:Qt(`Unknown sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`),await this.tokenizer.ignore(Number(n.chunkSize))}const i=n.chunkSize-BigInt(this.tokenizer.position-r);i>0&&(Qt(`After Parsing sound-property-chunk ${n.chunkSize}, remaining ${i} bytes`),await this.tokenizer.ignore(Number(i))),e-=BigInt(Po.len)+n.chunkSize,Qt(`Parsing sound-property-chunks, remainingSize=${e}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const n=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",n)}}async handleChannelChunks(e){Qt(`Parsing channel-chunks, remainingSize=${e}`);const n=[];for(;e>=Ve.len;){const r=await this.tokenizer.readToken(Ve);Qt(`Channel[ID=${r}]`),n.push(r),e-=BigInt(Ve.len)}return Qt(`Channels: ${n.join(", ")}`),n}}var A;(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(A||(A={}));const oF={name:"dtd",container:{440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:A.uint},17143:{name:"ebmlReadVersion",value:A.uint},17138:{name:"ebmlMaxIDWidth",value:A.uint},17139:{name:"ebmlMaxSizeWidth",value:A.uint},17026:{name:"docType",value:A.string},17031:{name:"docTypeVersion",value:A.uint},17029:{name:"docTypeReadVersion",value:A.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",multiple:!0,container:{21419:{name:"id",value:A.binary},21420:{name:"position",value:A.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:A.uid},29572:{name:"filename",value:A.string},3979555:{name:"prevUID",value:A.uid},3965867:{name:"prevFilename",value:A.string},4110627:{name:"nextUID",value:A.uid},4096955:{name:"nextFilename",value:A.string},2807729:{name:"timecodeScale",value:A.uint},17545:{name:"duration",value:A.float},17505:{name:"dateUTC",value:A.uint},31657:{name:"title",value:A.string},19840:{name:"muxingApp",value:A.string},22337:{name:"writingApp",value:A.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:A.uid},22743:{name:"silentTracks ",multiple:!0},167:{name:"position",value:A.uid},171:{name:"prevSize",value:A.uid},160:{name:"blockGroup"},163:{name:"simpleBlock"}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:A.uint},29637:{name:"uid",value:A.uid},131:{name:"trackType",value:A.uint},185:{name:"flagEnabled",value:A.bool},136:{name:"flagDefault",value:A.bool},21930:{name:"flagForced",value:A.bool},156:{name:"flagLacing",value:A.bool},28135:{name:"minCache",value:A.uint},28136:{name:"maxCache",value:A.uint},2352003:{name:"defaultDuration",value:A.uint},2306383:{name:"timecodeScale",value:A.float},21358:{name:"name",value:A.string},2274716:{name:"language",value:A.string},134:{name:"codecID",value:A.string},25506:{name:"codecPrivate",value:A.binary},2459272:{name:"codecName",value:A.string},3839639:{name:"codecSettings",value:A.string},3883072:{name:"codecInfoUrl",value:A.string},2536e3:{name:"codecDownloadUrl",value:A.string},170:{name:"codecDecodeAll",value:A.bool},28587:{name:"trackOverlay",value:A.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:A.bool},21432:{name:"stereoMode",value:A.uint},176:{name:"pixelWidth",value:A.uint},186:{name:"pixelHeight",value:A.uint},21680:{name:"displayWidth",value:A.uint},21690:{name:"displayHeight",value:A.uint},21683:{name:"aspectRatioType",value:A.uint},3061028:{name:"colourSpace",value:A.uint},3126563:{name:"gammaValue",value:A.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:A.float},30901:{name:"outputSamplingFrequency",value:A.float},159:{name:"channels",value:A.uint},148:{name:"channels",value:A.uint},32123:{name:"channelPositions",value:A.binary},25188:{name:"bitDepth",value:A.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:A.uint},20530:{name:"scope",value:A.bool},20531:{name:"type",value:A.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:A.uint},16981:{name:"contentCompSettings",value:A.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:A.uint},18402:{name:"contentEncKeyID",value:A.binary},18403:{name:"contentSignature ",value:A.binary},18404:{name:"ContentSigKeyID  ",value:A.binary},18405:{name:"contentSigAlgo ",value:A.uint},18406:{name:"contentSigHashAlgo ",value:A.uint}}},25188:{name:"bitDepth",value:A.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:A.uid},183:{name:"positions",container:{247:{name:"track",value:A.uint},241:{name:"clusterPosition",value:A.uint},21368:{name:"blockNumber",value:A.uint},234:{name:"codecState",value:A.uint},219:{name:"reference",container:{150:{name:"time",value:A.uint},151:{name:"cluster",value:A.uint},21343:{name:"number",value:A.uint},235:{name:"codecState",value:A.uint}}},240:{name:"relativePosition",value:A.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:A.string},18030:{name:"name",value:A.string},18016:{name:"mimeType",value:A.string},18012:{name:"data",value:A.binary},18094:{name:"uid",value:A.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:A.uid},145:{name:"timeStart",value:A.uint},146:{name:"timeEnd",value:A.uid},152:{name:"hidden",value:A.bool},17816:{name:"enabled",value:A.uid},143:{name:"track",container:{137:{name:"trackNumber",value:A.uid},128:{name:"display",container:{133:{name:"string",value:A.string},17276:{name:"language ",value:A.string},17278:{name:"country ",value:A.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:A.uid},25540:{name:"tagChapterUID",value:A.uint},25542:{name:"tagAttachmentUID",value:A.uid},25546:{name:"targetType",value:A.string},26826:{name:"targetTypeValue",value:A.uint},25545:{name:"tagEditionUID",value:A.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:A.string},17543:{name:"string",value:A.string},17541:{name:"binary",value:A.binary},17530:{name:"language",value:A.string},17531:{name:"languageIETF",value:A.string},17540:{name:"default",value:A.bool}}}}}}}}}}},No=Ne("music-metadata:parser:ebml");var lr;(function(t){t[t.ReadNext=0]="ReadNext",t[t.IgnoreElement=2]="IgnoreElement",t[t.SkipSiblings=3]="SkipSiblings",t[t.TerminateParsing=4]="TerminateParsing",t[t.SkipElement=5]="SkipElement"})(lr||(lr={}));class aF{constructor(e){this.tokenizer=e,this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(A.uint,n=>this.readUint(n)),this.parserMap.set(A.string,n=>this.readString(n)),this.parserMap.set(A.binary,n=>this.readBuffer(n)),this.parserMap.set(A.uid,async n=>this.readBuffer(n)),this.parserMap.set(A.bool,n=>this.readFlag(n)),this.parserMap.set(A.float,n=>this.readFloat(n))}async iterate(e,n,r){return this.parseContainer(HI(e),n,r)}async parseContainer(e,n,r){const i={};for(;this.tokenizer.position<n;){let s;const o=this.tokenizer.position;try{s=await this.readElement()}catch(l){if(l instanceof st)break;throw l}const a=e.container[s.id];if(a)switch(r.startNext(a)){case lr.ReadNext:if(s.id,No(`Read element: name=${As(a)}{id=0x${s.id.toString(16)}, container=${!!a.container}} at position=${o}`),a.container){const c=await this.parseContainer(a,s.len>=0?this.tokenizer.position+s.len:-1,r);a.multiple?(i[a.name]||(i[a.name]=[]),i[a.name].push(c)):i[a.name]=c,await r.elementValue(a,c,o)}else{const c=this.parserMap.get(a.value);if(typeof c=="function"){const d=await c(s);i[a.name]=d,await r.elementValue(a,d,o)}}break;case lr.SkipElement:No(`Go to next element: name=${As(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`);break;case lr.IgnoreElement:No(`Ignore element: name=${As(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(s.len);break;case lr.SkipSiblings:No(`Ignore remaining container, at: name=${As(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(n-this.tokenizer.position);break;case lr.TerminateParsing:return No(`Terminate parsing at element: name=${As(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),i}else switch(s.id){case 236:this.padding+=s.len,await this.tokenizer.ignore(s.len);break;default:No(`parseEbml: parent=${As(e)}, unknown child: id=${s.id.toString(16)} at position=${o}`),this.padding+=s.len,await this.tokenizer.ignore(s.len)}}return i}async readVintData(e){const n=await this.tokenizer.peekNumber(he);let r=128,i=1;for(;!(n&r);){if(i>e)throw new Error("VINT value exceeding maximum size");++i,r>>=1}const s=new Uint8Array(i);return await this.tokenizer.readBuffer(s),s}async readElement(){const e=await this.readVintData(this.ebmlMaxIDLength),n=await this.readVintData(this.ebmlMaxSizeLength);return n[0]^=128>>n.length-1,{id:$p(e,e.length),len:$p(n,n.length)}}async readFloat(e){switch(e.len){case 0:return 0;case 4:return this.tokenizer.readNumber(CI);case 8:return this.tokenizer.readNumber(P0);case 10:return this.tokenizer.readNumber(P0);default:throw new Error(`Invalid IEEE-754 float length: ${e.len}`)}}async readFlag(e){return await this.readUint(e)===1}async readUint(e){const n=await this.readBuffer(e);return $p(n,e.len)}async readString(e){return(await this.tokenizer.readToken(new ne(e.len,"utf-8"))).replace(/\x00.*$/g,"")}async readBuffer(e){const n=new Uint8Array(e.len);return await this.tokenizer.readBuffer(n),n}}function $p(t,e){return Number(lF(t,e))}function lF(t,e){const n=new Uint8Array(8),r=t.subarray(0,e);try{return n.set(r,8-e),Kv.get(n,0)}catch{return BigInt(-1)}}function HI(t){return t.container&&Object.keys(t.container).map(e=>{const n=t.container[e];return n.id=Number.parseInt(e),n}).forEach(e=>{e.parent=t,HI(e)}),t}function As(t){let e="";return t.parent&&t.parent.name!=="dtd"&&(e+=`${As(t.parent)}/`),e+t.name}const td=Ne("music-metadata:parser:matroska");class cF extends Bn{constructor(){super(...arguments),this.seekHeadOffset=0,this.flagUseIndexToSkipClusters=!1}init(e,n,r){return super.init(e,n,r),this.flagUseIndexToSkipClusters=r.mkvUseIndex??!1,this}async parse(){const e=this.tokenizer.fileInfo.size??Number.MAX_SAFE_INTEGER,n=new aF(this.tokenizer);td("Initializing DTD end MatroskaIterator"),await n.iterate(oF,e,{startNext:r=>{switch(r.id){case 475249515:return td(`Skip element: name=${r.name}, id=0x${r.id.toString(16)}`),lr.IgnoreElement;case 524531317:if(this.flagUseIndexToSkipClusters&&this.seekHead){const i=this.seekHead.seek.find(s=>s.position+this.seekHeadOffset>this.tokenizer.position);if(i){const s=i.position+this.seekHeadOffset-this.tokenizer.position;return td(`Use index to go to next position, ignoring ${s} bytes`),this.tokenizer.ignore(s),lr.SkipElement}}return lr.IgnoreElement;default:return lr.ReadNext}},elementValue:async(r,i,s)=>{switch(td(`Received: name=${r.name}, value=${i}`),r.id){case 17026:this.metadata.setFormat("container",`EBML/${i}`);break;case 290298740:this.seekHead=i,this.seekHeadOffset=s;break;case 357149030:{const o=i,a=o.timecodeScale?o.timecodeScale:1e6;if(typeof o.duration=="number"){const l=o.duration*a/1e9;await this.addTag("segment:title",o.title),this.metadata.setFormat("duration",Number(l))}}break;case 374648427:{const o=i;if(o!=null&&o.entries){o.entries.forEach(l=>{const c={codecName:l.codecID.replace("A_","").replace("V_",""),codecSettings:l.codecSettings,flagDefault:l.flagDefault,flagLacing:l.flagLacing,flagEnabled:l.flagEnabled,language:l.language,name:l.name,type:l.trackType,audio:l.audio,video:l.video};this.metadata.addStreamInfo(c)});const a=o.entries.filter(l=>l.trackType===Ys.audio).reduce((l,c)=>!l||c.flagDefault&&!l.flagDefault||c.trackNumber<l.trackNumber?c:l,null);a&&(this.metadata.setFormat("codec",a.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",a.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",a.audio.channels))}}break;case 307544935:{const o=i;await Promise.all(o.tag.map(async a=>{const l=a.target,c=l!=null&&l.targetTypeValue?D0[l.targetTypeValue]:l!=null&&l.targetType?l.targetType:"track";await Promise.all(a.simpleTags.map(async d=>{const h=d.string?d.string:d.binary;await this.addTag(`${c}:${d.name}`,h)}))}))}break;case 423732329:{const o=i;await Promise.all(o.attachedFiles.filter(a=>a.mimeType.startsWith("image/")).map(a=>this.addTag("picture",{data:a.data,format:a.mimeType,description:a.description,name:a.name})))}break}}})}async addTag(e,n){await this.metadata.addTag("matroska",e,n)}}const Ch=Ne("music-metadata:parser:factory");function uF(t){const e=Yv.parse(t),n=lM(e.type);return{type:n.type,subtype:n.subtype,suffix:n.suffix,parameters:e.parameters}}async function dF(t,e){const{mimeType:n,path:r,url:i}=t.fileInfo,s=qI(n)||U0(r)||U0(i);return s||Ch(`No parser found for MIME-type / extension: ${n}`),hF(t,s,e)}async function hF(t,e,n){if(!e){Ch("Guess parser on content...");const s=new Uint8Array(4100);if(await t.peekBuffer(s,{mayBeLess:!0}),t.fileInfo.path&&(e=U0(t.fileInfo.path)),!e){const o=await DI(s);if(!o)throw new Error("Failed to determine audio format");if(Ch(`Guessed file type is mime=${o.mime}, extension=${o.ext}`),e=qI(o.mime),!e)throw new Error(`Guessed MIME-type not supported: ${o.mime}`)}}const r=await fF(e),i=new zM(n);return await r.init(i,t,n??{}).parse(),i.toCommonMetadata()}function U0(t){if(!t)return;switch(mF(t).toLocaleLowerCase()||t){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}async function fF(t){switch(t){case"aiff":return new KM;case"adts":case"mpeg":return new OL;case"apev2":return new br;case"asf":return new oL;case"dsf":return new iF;case"dsdiff":return new sF;case"flac":return new cL;case"mp4":return new Th;case"musepack":return new VL;case"ogg":return new Ff;case"riff":return new ZL;case"wavpack":return new tF;case"matroska":return new cF;default:throw new Error(`Unknown parser type: ${t}`)}}function mF(t){const e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}function qI(t){let e;if(!t)return;try{e=uF(t)}catch{Ch(`Invalid HTTP Content-Type header value: ${t}`);return}const n=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(n){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(n){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(n){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}async function pF(t,e={}){const n={mimeType:t.type,size:t.size};return t instanceof File&&(n.path=t.name),gF(t.stream(),n,e)}function gF(t,e,n={}){return yF(TI(t,{fileInfo:typeof e=="string"?{mimeType:e}:e}),n)}function yF(t,e){return dF(t,e)}let Ah=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function GI(t,e){return function(){return t.apply(e,arguments)}}const{toString:vF}=Object.prototype,{getPrototypeOf:ix}=Object,$f=(t=>e=>{const n=vF.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),zr=t=>(t=t.toLowerCase(),e=>$f(e)===t),Bf=t=>e=>typeof e===t,{isArray:Xa}=Array,_c=Bf("undefined");function xF(t){return t!==null&&!_c(t)&&t.constructor!==null&&!_c(t.constructor)&&Qn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const KI=zr("ArrayBuffer");function wF(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&KI(t.buffer),e}const _F=Bf("string"),Qn=Bf("function"),XI=Bf("number"),zf=t=>t!==null&&typeof t=="object",EF=t=>t===!0||t===!1,Pd=t=>{if($f(t)!=="object")return!1;const e=ix(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},SF=zr("Date"),bF=zr("File"),kF=zr("Blob"),TF=zr("FileList"),IF=t=>zf(t)&&Qn(t.pipe),CF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Qn(t.append)&&((e=$f(t))==="formdata"||e==="object"&&Qn(t.toString)&&t.toString()==="[object FormData]"))},AF=zr("URLSearchParams"),RF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Xa(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function QI(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const YI=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),JI=t=>!_c(t)&&t!==YI;function W0(){const{caseless:t}=JI(this)&&this||{},e={},n=(r,i)=>{const s=t&&QI(e,i)||i;Pd(e[s])&&Pd(r)?e[s]=W0(e[s],r):Pd(r)?e[s]=W0({},r):Xa(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Zc(arguments[r],n);return e}const PF=(t,e,n,{allOwnKeys:r}={})=>(Zc(e,(i,s)=>{n&&Qn(i)?t[s]=GI(i,n):t[s]=i},{allOwnKeys:r}),t),NF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),DF=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},OF=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&ix(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},jF=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},MF=t=>{if(!t)return null;if(Xa(t))return t;let e=t.length;if(!XI(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},LF=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ix(Uint8Array)),FF=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},$F=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},BF=zr("HTMLFormElement"),zF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),mE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),VF=zr("RegExp"),ZI=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Zc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},UF=t=>{ZI(t,(e,n)=>{if(Qn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Qn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},WF=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Xa(t)?r(t):r(String(t).split(e)),n},HF=()=>{},qF=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Bp="abcdefghijklmnopqrstuvwxyz",pE="0123456789",e2={DIGIT:pE,ALPHA:Bp,ALPHA_DIGIT:Bp+Bp.toUpperCase()+pE},GF=(t=16,e=e2.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function KF(t){return!!(t&&Qn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const XF=t=>{const e=new Array(10),n=(r,i)=>{if(zf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Xa(r)?[]:{};return Zc(r,(o,a)=>{const l=n(o,i+1);!_c(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},QF=zr("AsyncFunction"),YF=t=>t&&(zf(t)||Qn(t))&&Qn(t.then)&&Qn(t.catch),P={isArray:Xa,isArrayBuffer:KI,isBuffer:xF,isFormData:CF,isArrayBufferView:wF,isString:_F,isNumber:XI,isBoolean:EF,isObject:zf,isPlainObject:Pd,isUndefined:_c,isDate:SF,isFile:bF,isBlob:kF,isRegExp:VF,isFunction:Qn,isStream:IF,isURLSearchParams:AF,isTypedArray:LF,isFileList:TF,forEach:Zc,merge:W0,extend:PF,trim:RF,stripBOM:NF,inherits:DF,toFlatObject:OF,kindOf:$f,kindOfTest:zr,endsWith:jF,toArray:MF,forEachEntry:FF,matchAll:$F,isHTMLForm:BF,hasOwnProperty:mE,hasOwnProp:mE,reduceDescriptors:ZI,freezeMethods:UF,toObjectSet:WF,toCamelCase:zF,noop:HF,toFiniteNumber:qF,findKey:QI,global:YI,isContextDefined:JI,ALPHABET:e2,generateString:GF,isSpecCompliantForm:KF,toJSONObject:XF,isAsyncFn:QF,isThenable:YF};function we(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}P.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const t2=we.prototype,n2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{n2[t]={value:t}});Object.defineProperties(we,n2);Object.defineProperty(t2,"isAxiosError",{value:!0});we.from=(t,e,n,r,i,s)=>{const o=Object.create(t2);return P.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),we.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const JF=null;function H0(t){return P.isPlainObject(t)||P.isArray(t)}function r2(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function gE(t,e,n){return t?t.concat(e).map(function(i,s){return i=r2(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function ZF(t){return P.isArray(t)&&!t.some(H0)}const e6=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function Vf(t,e,n){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,_){return!P.isUndefined(_[x])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(P.isDate(y))return y.toISOString();if(!l&&P.isBlob(y))throw new we("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(y)||P.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,x,_){let v=y;if(y&&!_&&typeof y=="object"){if(P.endsWith(x,"{}"))x=r?x:x.slice(0,-2),y=JSON.stringify(y);else if(P.isArray(y)&&ZF(y)||(P.isFileList(y)||P.endsWith(x,"[]"))&&(v=P.toArray(y)))return x=r2(x),v.forEach(function(w,E){!(P.isUndefined(w)||w===null)&&e.append(o===!0?gE([x],E,s):o===null?x:x+"[]",c(w))}),!1}return H0(y)?!0:(e.append(gE(_,x,s),c(y)),!1)}const h=[],m=Object.assign(e6,{defaultVisitor:d,convertValue:c,isVisitable:H0});function p(y,x){if(!P.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(y),P.forEach(y,function(v,g){(!(P.isUndefined(v)||v===null)&&i.call(e,v,P.isString(g)?g.trim():g,x,m))===!0&&p(v,x?x.concat(g):[g])}),h.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return p(t),e}function yE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function sx(t,e){this._pairs=[],t&&Vf(t,this,e)}const i2=sx.prototype;i2.append=function(e,n){this._pairs.push([e,n])};i2.toString=function(e){const n=e?function(r){return e.call(this,r,yE)}:yE;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function t6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function s2(t,e,n){if(!e)return t;const r=n&&n.encode||t6,i=n&&n.serialize;let s;if(i?s=i(e,n):s=P.isURLSearchParams(e)?e.toString():new sx(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class n6{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(r){r!==null&&e(r)})}}const vE=n6,o2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r6=typeof URLSearchParams<"u"?URLSearchParams:sx,i6=typeof FormData<"u"?FormData:null,s6=typeof Blob<"u"?Blob:null,o6=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),a6=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),kr={isBrowser:!0,classes:{URLSearchParams:r6,FormData:i6,Blob:s6},isStandardBrowserEnv:o6,isStandardBrowserWebWorkerEnv:a6,protocols:["http","https","file","blob","url","data"]};function l6(t,e){return Vf(t,new kr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return kr.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function c6(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function u6(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function a2(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&P.isArray(i)?i.length:o,l?(P.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!P.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&P.isArray(i[o])&&(i[o]=u6(i[o])),!a)}if(P.isFormData(t)&&P.isFunction(t.entries)){const n={};return P.forEachEntry(t,(r,i)=>{e(c6(r),i,n,0)}),n}return null}function d6(t,e,n){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ox={transitional:o2,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=P.isObject(e);if(s&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return i&&i?JSON.stringify(a2(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return l6(e,this.formSerializer).toString();if((a=P.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Vf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),d6(e)):e}],transformResponse:[function(e){const n=this.transitional||ox.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&P.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?we.from(a,we.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kr.classes.FormData,Blob:kr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{ox.headers[t]={}});const ax=ox,h6=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),f6=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&h6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},xE=Symbol("internals");function yl(t){return t&&String(t).trim().toLowerCase()}function Nd(t){return t===!1||t==null?t:P.isArray(t)?t.map(Nd):String(t)}function m6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const p6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zp(t,e,n,r,i){if(P.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!P.isString(e)){if(P.isString(r))return e.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(e)}}function g6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function y6(t,e){const n=P.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Uf{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=yl(l);if(!d)throw new Error("header name must be a non-empty string");const h=P.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=Nd(a))}const o=(a,l)=>P.forEach(a,(c,d)=>s(c,d,l));return P.isPlainObject(e)||e instanceof this.constructor?o(e,n):P.isString(e)&&(e=e.trim())&&!p6(e)?o(f6(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=yl(e),e){const r=P.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return m6(i);if(P.isFunction(n))return n.call(this,i,r);if(P.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=yl(e),e){const r=P.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||zp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=yl(o),o){const a=P.findKey(r,o);a&&(!n||zp(r,r[a],a,n))&&(delete r[a],i=!0)}}return P.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||zp(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return P.forEach(this,(i,s)=>{const o=P.findKey(r,s);if(o){n[o]=Nd(i),delete n[s];return}const a=e?g6(s):String(s).trim();a!==s&&delete n[s],n[a]=Nd(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return P.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[xE]=this[xE]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=yl(o);r[a]||(y6(i,o),r[a]=!0)}return P.isArray(e)?e.forEach(s):s(e),this}}Uf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(Uf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});P.freezeMethods(Uf);const ri=Uf;function Vp(t,e){const n=this||ax,r=e||n,i=ri.from(r.headers);let s=r.data;return P.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function l2(t){return!!(t&&t.__CANCEL__)}function eu(t,e,n){we.call(this,t??"canceled",we.ERR_CANCELED,e,n),this.name="CanceledError"}P.inherits(eu,we,{__CANCEL__:!0});function v6(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new we("Request failed with status code "+n.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const x6=kr.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),P.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),P.isString(s)&&l.push("path="+s),P.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function w6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _6(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function c2(t,e){return t&&!w6(e)?_6(t,e):e}const E6=kr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=P.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function S6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function b6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let h=s,m=0;for(;h!==i;)m+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(m*1e3/p):void 0}}function wE(t,e){let n=0;const r=b6(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),c=s<=o;n=s;const d={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:i};d[e?"download":"upload"]=!0,t(d)}}const k6=typeof XMLHttpRequest<"u",T6=k6&&function(t){return new Promise(function(n,r){let i=t.data;const s=ri.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;P.isFormData(i)&&(kr.isStandardBrowserEnv||kr.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?P.isString(c=s.getContentType())&&s.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+x))}const h=c2(t.baseURL,t.url);d.open(t.method.toUpperCase(),s2(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const y=ri.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};v6(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new we("Request aborted",we.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new we("Network Error",we.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let x=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||o2;t.timeoutErrorMessage&&(x=t.timeoutErrorMessage),r(new we(x,_.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,t,d)),d=null},kr.isStandardBrowserEnv){const y=E6(h)&&t.xsrfCookieName&&x6.read(t.xsrfCookieName);y&&s.set(t.xsrfHeaderName,y)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&P.forEach(s.toJSON(),function(x,_){d.setRequestHeader(_,x)}),P.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",wE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",wE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{d&&(r(!y||y.type?new eu(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=S6(h);if(p&&kr.protocols.indexOf(p)===-1){r(new we("Unsupported protocol "+p+":",we.ERR_BAD_REQUEST,t));return}d.send(i||null)})},q0={http:JF,xhr:T6};P.forEach(q0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const _E=t=>`- ${t}`,I6=t=>P.isFunction(t)||t===null||t===!1,u2={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!I6(n)&&(r=q0[(o=String(n)).toLowerCase()],r===void 0))throw new we(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(_E).join(`
`):" "+_E(s[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:q0};function Up(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new eu(null,t)}function EE(t){return Up(t),t.headers=ri.from(t.headers),t.data=Vp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),u2.getAdapter(t.adapter||ax.adapter)(t).then(function(r){return Up(t),r.data=Vp.call(t,t.transformResponse,r),r.headers=ri.from(r.headers),r},function(r){return l2(r)||(Up(t),r&&r.response&&(r.response.data=Vp.call(t,t.transformResponse,r.response),r.response.headers=ri.from(r.response.headers))),Promise.reject(r)})}const SE=t=>t instanceof ri?t.toJSON():t;function Ta(t,e){e=e||{};const n={};function r(c,d,h){return P.isPlainObject(c)&&P.isPlainObject(d)?P.merge.call({caseless:h},c,d):P.isPlainObject(d)?P.merge({},d):P.isArray(d)?d.slice():d}function i(c,d,h){if(P.isUndefined(d)){if(!P.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function s(c,d){if(!P.isUndefined(d))return r(void 0,d)}function o(c,d){if(P.isUndefined(d)){if(!P.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>i(SE(c),SE(d),!0)};return P.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||i,m=h(t[d],e[d],d);P.isUndefined(m)&&h!==a||(n[d]=m)}),n}const d2="1.6.0",lx={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{lx[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const bE={};lx.transitional=function(e,n,r){function i(s,o){return"[Axios v"+d2+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new we(i(o," has been removed"+(n?" in "+n:"")),we.ERR_DEPRECATED);return n&&!bE[o]&&(bE[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function C6(t,e,n){if(typeof t!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new we("option "+s+" must be "+l,we.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new we("Unknown option "+s,we.ERR_BAD_OPTION)}}const G0={assertOptions:C6,validators:lx},Si=G0.validators;class Rh{constructor(e){this.defaults=e,this.interceptors={request:new vE,response:new vE}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ta(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&G0.assertOptions(r,{silentJSONParsing:Si.transitional(Si.boolean),forcedJSONParsing:Si.transitional(Si.boolean),clarifyTimeoutError:Si.transitional(Si.boolean)},!1),i!=null&&(P.isFunction(i)?n.paramsSerializer={serialize:i}:G0.assertOptions(i,{encode:Si.function,serialize:Si.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&P.merge(s.common,s[n.method]);s&&P.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=ri.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let d,h=0,m;if(!l){const y=[EE.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),m=y.length,d=Promise.resolve(n);h<m;)d=d.then(y[h++],y[h++]);return d}m=a.length;let p=n;for(h=0;h<m;){const y=a[h++],x=a[h++];try{p=y(p)}catch(_){x.call(this,_);break}}try{d=EE.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,m=c.length;h<m;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Ta(this.defaults,e);const n=c2(e.baseURL,e.url);return s2(n,e.params,e.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(e){Rh.prototype[e]=function(n,r){return this.request(Ta(r||{},{method:e,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Ta(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Rh.prototype[e]=n(),Rh.prototype[e+"Form"]=n(!0)});const Dd=Rh;class cx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new eu(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new cx(function(i){e=i}),cancel:e}}}const A6=cx;function R6(t){return function(n){return t.apply(null,n)}}function P6(t){return P.isObject(t)&&t.isAxiosError===!0}const K0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(K0).forEach(([t,e])=>{K0[e]=t});const N6=K0;function h2(t){const e=new Dd(t),n=GI(Dd.prototype.request,e);return P.extend(n,Dd.prototype,e,{allOwnKeys:!0}),P.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return h2(Ta(t,i))},n}const ft=h2(ax);ft.Axios=Dd;ft.CanceledError=eu;ft.CancelToken=A6;ft.isCancel=l2;ft.VERSION=d2;ft.toFormData=Vf;ft.AxiosError=we;ft.Cancel=ft.CanceledError;ft.all=function(e){return Promise.all(e)};ft.spread=R6;ft.isAxiosError=P6;ft.mergeConfig=Ta;ft.AxiosHeaders=ri;ft.formToJSON=t=>a2(P.isHTMLForm(t)?new FormData(t):t);ft.getAdapter=u2.getAdapter;ft.HttpStatusCode=N6;ft.default=ft;const D6=ft,f2=D6.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),O6=t=>new Date(t.toDate().getTime()).toLocaleString(),ii=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),en=(t,e)=>{const n=ii();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},ux=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+Ah(4),j6=async t=>{if(!t)return;const e=await pF(t);if(!e)return;const{common:{title:n,artist:r},format:{duration:i}}=e,s={name:"",singer:"",image:null,duration:0};return s.name=n||t.name,s.singer=r||"...",s.duration=i||0,s},Ia=t=>{const e=Math.floor(t/60),n=Math.floor(t%60);return`${e}:${n.toString().padStart(2,"0")}`},M6=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},dx=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),hx=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),X0=async t=>new Promise(e=>setTimeout(e,t)),L6=(t,e,n,r,i)=>{if(!i||!r){console.log("song list item lack of props");return}e||n&&n(!0);let s=[...r];const o=s.indexOf(t);o===-1?s.push(t):s.splice(o,1),i(s),s.length||n&&n(!1)};let Q0=yh[0];const F6=ii(),kE=F6.theme;kE&&yh.forEach(t=>{t.id===kE&&(Q0=t)});const m2={theme:{...Q0,alpha:Q0.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},$6=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},B6=()=>{const[t,e]=f.useReducer($6,m2),n=f.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},z6={state:m2,setTheme:()=>{}},p2=f.createContext(z6),V6=({children:t})=>u.jsx(p2.Provider,{value:B6(),children:t}),te=()=>{const{state:{...t},...e}=f.useContext(p2);return{...t,...e}};function bt({className:t}){const{theme:e}=te();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const Wf=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(bt,{className:"h-[18px] w-[18px]"}),u.jsx(bt,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(bt,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(bt,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),g2=[...Array(1).keys()].map(t=>u.jsx(bt,{className:"w-full h-[40px] mb-[10px]"},t)),U6=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(bt,{className:"pt-[100%] rounded-[8px]"}),u.jsx(bt,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var W6=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Tl=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],i=W6.indexOf(r);e=e*83+i}return e},Wp=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Hp=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},H6=t=>t<0?-1:1,qp=(t,e)=>H6(t)*Math.pow(Math.abs(t),e),TE=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},q6=t=>{if(!t||t.length<6)throw new TE("The blurhash string must be at least 6 characters");let e=Tl(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new TE(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},G6=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Wp(e),Wp(n),Wp(r)]},K6=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,i=t%19;return[qp((n-9)/9,2)*e,qp((r-9)/9,2)*e,qp((i-9)/9,2)*e]},X6=(t,e,n,r)=>{q6(t),r=r|1;let i=Tl(t[0]),s=Math.floor(i/9)+1,o=i%9+1,a=(Tl(t[1])+1)/166,l=new Array(o*s);for(let h=0;h<l.length;h++)if(h===0){let m=Tl(t.substring(2,6));l[h]=G6(m)}else{let m=Tl(t.substring(4+h*2,6+h*2));l[h]=K6(m,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let m=0;m<e;m++){let p=0,y=0,x=0;for(let w=0;w<s;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*m*E/e)*Math.cos(Math.PI*h*w/n),T=l[E+w*o];p+=T[0]*S,y+=T[1]*S,x+=T[2]*S}let _=Hp(p),v=Hp(y),g=Hp(x);d[4*m+0+h*c]=_,d[4*m+1+h*c]=v,d[4*m+2+h*c]=g,d[4*m+3+h*c]=255}return d},Q6=X6,Y6=Object.defineProperty,J6=Object.defineProperties,Z6=Object.getOwnPropertyDescriptors,Ph=Object.getOwnPropertySymbols,y2=Object.prototype.hasOwnProperty,v2=Object.prototype.propertyIsEnumerable,IE=(t,e,n)=>e in t?Y6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y0=(t,e)=>{for(var n in e||(e={}))y2.call(e,n)&&IE(t,n,e[n]);if(Ph)for(var n of Ph(e))v2.call(e,n)&&IE(t,n,e[n]);return t},J0=(t,e)=>J6(t,Z6(e)),x2=(t,e)=>{var n={};for(var r in t)y2.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ph)for(var r of Ph(t))e.indexOf(r)<0&&v2.call(t,r)&&(n[r]=t[r]);return n},w2=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:i}=this.props;if(this.canvas){let s=Q6(e,i,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(i,n);a.data.set(s),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:i}=e,s=x2(e,["hash","height","width"]);return f.createElement("canvas",J0(Y0({},s),{height:r,width:i,ref:this.handleRef}))}};w2.defaultProps={height:128,width:128};var e$={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},_2=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:i,punch:s,resolutionX:o,resolutionY:a,style:l}=e,c=x2(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",J0(Y0({},c),{style:J0(Y0({display:"inline-block",height:r,width:i},l),{position:"relative"})}),f.createElement(w2,{hash:n,height:a,width:o,punch:s,style:e$}))}};_2.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const t$="/HD-MP3/assets/logo-17dffbdd.png";function yi({src:t,classNames:e,blurHashEncode:n,onError:r}){const[i,s]=f.useState(!1),o=f.useRef(null),a=()=>{s(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",s(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!i&&u.jsx(u.Fragment,{children:n?u.jsx(_2,{hash:n,height:"100%",width:"100%"}):u.jsx(bt,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${i?"":"hidden"}`,src:t||t$,ref:o})]})}const n$=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(X,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(gh,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),r$=mI("",{variants:{variant:{default:"p-4",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function xo({children:t,theme:e,className:n,color:r="container",variant:i}){const s={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${s[r]} border-[1px] border-${e.alpha} ${r$({variant:i,className:n})}`,children:t})}function Gp({className:t,icon:e,label:n,to:r,arrowIcon:i,children:s}){return r?u.jsxs(Qi,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),s,i&&u.jsx("span",{children:i})]}):u.jsx("p",{children:"No onClick"})}const fx={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},i$=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],i=r.findIndex(s=>s.id===n.id);return i===-1?t:(r[i]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],i=r.findIndex(s=>s.id===n.id);return i===-1?t:(r[i]=n,{...t,userPlaylists:r})}case 9:return fx;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},s$=()=>{const[t,e]=f.useReducer(i$,fx),n=f.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=f.useCallback(d=>e({type:2,payload:{songs:d}}),[]),i=f.useCallback(d=>e({type:3,payload:{song:d}}),[]),s=f.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=f.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=f.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=f.useCallback(()=>e({type:9}),[]),c=f.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:s,updateUserSong:i,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},o$={state:fx,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},E2=f.createContext(o$),a$=({children:t})=>u.jsx(E2.Provider,{value:s$(),children:t}),at=()=>{const{state:{...t},...e}=f.useContext(E2);return{...t,...e}};function l$({data:t,theme:e,selectedSongs:n,active:r,onClick:i,isChecked:s,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=p=>{!o||!n||!a||s!==void 0&&L6(p,s,a,n,o)},m={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${m.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:s?u.jsx("button",{onClick:()=>h(t),className:`${m.songListButton} text-[inherit]`,children:d()?u.jsx(Rd,{className:"w-[18px]"}):u.jsx(gc,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${m.songListButton} block`,children:u.jsx(gc,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:p=>s?h(t):i(p),children:[u.jsxs("div",{className:`${m.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(yi,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(Df,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(is,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const S2=f.forwardRef(l$);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},c$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},k2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new u$;const m=s<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d$=function(t){const e=b2(t);return k2.encodeByteArray(e,!0)},Nh=function(t){return d$(t).replace(/\./g,"")},T2=function(t){try{return k2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$=()=>h$().__FIREBASE_DEFAULTS__,m$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&T2(t[1]);return e&&JSON.parse(e)},Hf=()=>{try{return f$()||m$()||p$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I2=t=>{var e,n;return(n=(e=Hf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},C2=t=>{const e=I2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},A2=()=>{var t;return(t=Hf())===null||t===void 0?void 0:t.config},R2=t=>{var e;return(e=Hf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Nh(JSON.stringify(n)),Nh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function v$(){var t;const e=(t=Hf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _$(){const t=Kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E$(){try{return typeof indexedDB=="object"}catch{return!1}}function S$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="FirebaseError";class Vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=b$,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?k$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Vr(i,a,r)}}function k$(t,e){return t.replace(T$,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const T$=/\{\$([^}]+)}/g;function I$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(CE(s)&&CE(o)){if(!Dh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function CE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function C$(t,e){const n=new A$(t,e);return n.subscribe.bind(n)}class A${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");R$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Kp),i.error===void 0&&(i.error=Kp),i.complete===void 0&&(i.complete=Kp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P$=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new g$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(D$(e))try{this.getOrInitializeService({instanceIdentifier:Rs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rs){return this.instances.has(e)}getOptions(e=Rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rs){return this.component?this.component.multipleInstances?e:Rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function N$(t){return t===Rs?void 0:t}function D$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new P$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const j$={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},M$=Ee.INFO,L$={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},F$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=L$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mx{constructor(e){this.name=e,this._logLevel=M$,this._logHandler=F$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const $$=(t,e)=>e.some(n=>t instanceof n);let AE,RE;function B$(){return AE||(AE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z$(){return RE||(RE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N2=new WeakMap,Z0=new WeakMap,D2=new WeakMap,Xp=new WeakMap,px=new WeakMap;function V$(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Yi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&N2.set(n,t)}).catch(()=>{}),px.set(e,t),e}function U$(t){if(Z0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Z0.set(t,e)}let ey={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Z0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W$(t){ey=t(ey)}function H$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qp(this),e,...n);return D2.set(r,e.sort?e.sort():[e]),Yi(r)}:z$().includes(t)?function(...e){return t.apply(Qp(this),e),Yi(N2.get(this))}:function(...e){return Yi(t.apply(Qp(this),e))}}function q$(t){return typeof t=="function"?H$(t):(t instanceof IDBTransaction&&U$(t),$$(t,B$())?new Proxy(t,ey):t)}function Yi(t){if(t instanceof IDBRequest)return V$(t);if(Xp.has(t))return Xp.get(t);const e=q$(t);return e!==t&&(Xp.set(t,e),px.set(e,t)),e}const Qp=t=>px.get(t);function G$(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Yi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Yi(o.result),l.oldVersion,l.newVersion,Yi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const K$=["get","getKey","getAll","getAllKeys","count"],X$=["put","add","delete","clear"],Yp=new Map;function PE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yp.get(e))return Yp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=X$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||K$.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Yp.set(e,s),s}W$(t=>({...t,get:(e,n,r)=>PE(e,n)||t.get(e,n,r),has:(e,n)=>!!PE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ty="@firebase/app",NE="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new mx("@firebase/app"),J$="@firebase/app-compat",Z$="@firebase/analytics-compat",e9="@firebase/analytics",t9="@firebase/app-check-compat",n9="@firebase/app-check",r9="@firebase/auth",i9="@firebase/auth-compat",s9="@firebase/database",o9="@firebase/database-compat",a9="@firebase/functions",l9="@firebase/functions-compat",c9="@firebase/installations",u9="@firebase/installations-compat",d9="@firebase/messaging",h9="@firebase/messaging-compat",f9="@firebase/performance",m9="@firebase/performance-compat",p9="@firebase/remote-config",g9="@firebase/remote-config-compat",y9="@firebase/storage",v9="@firebase/storage-compat",x9="@firebase/firestore",w9="@firebase/firestore-compat",_9="firebase",E9="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="[DEFAULT]",S9={[ty]:"fire-core",[J$]:"fire-core-compat",[e9]:"fire-analytics",[Z$]:"fire-analytics-compat",[n9]:"fire-app-check",[t9]:"fire-app-check-compat",[r9]:"fire-auth",[i9]:"fire-auth-compat",[s9]:"fire-rtdb",[o9]:"fire-rtdb-compat",[a9]:"fire-fn",[l9]:"fire-fn-compat",[c9]:"fire-iid",[u9]:"fire-iid-compat",[d9]:"fire-fcm",[h9]:"fire-fcm-compat",[f9]:"fire-perf",[m9]:"fire-perf-compat",[p9]:"fire-rc",[g9]:"fire-rc-compat",[y9]:"fire-gcs",[v9]:"fire-gcs-compat",[x9]:"fire-fst",[w9]:"fire-fst-compat","fire-js":"fire-js",[_9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Map,ry=new Map;function b9(t,e){try{t.container.addComponent(e)}catch(n){eo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function to(t){const e=t.name;if(ry.has(e))return eo.debug(`There were multiple attempts to register component ${e}.`),!1;ry.set(e,t);for(const n of Oh.values())b9(n,t);return!0}function qf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ji=new tu("app","Firebase",k9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=E9;function O2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ny,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ji.create("bad-app-name",{appName:String(i)});if(n||(n=A2()),!n)throw Ji.create("no-options");const s=Oh.get(i);if(s){if(Dh(n,s.options)&&Dh(r,s.config))return s;throw Ji.create("duplicate-app",{appName:i})}const o=new O$(i);for(const l of ry.values())o.addComponent(l);const a=new T9(n,r,o);return Oh.set(i,a),a}function gx(t=ny){const e=Oh.get(t);if(!e&&t===ny&&A2())return O2();if(!e)throw Ji.create("no-app",{appName:t});return e}function Pr(t,e,n){var r;let i=(r=S9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eo.warn(a.join(" "));return}to(new ss(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="firebase-heartbeat-database",C9=1,Ec="firebase-heartbeat-store";let Jp=null;function j2(){return Jp||(Jp=G$(I9,C9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ec)}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function A9(t){try{return await(await j2()).transaction(Ec).objectStore(Ec).get(M2(t))}catch(e){if(e instanceof Vr)eo.warn(e.message);else{const n=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});eo.warn(n.message)}}}async function DE(t,e){try{const r=(await j2()).transaction(Ec,"readwrite");await r.objectStore(Ec).put(e,M2(t)),await r.done}catch(n){if(n instanceof Vr)eo.warn(n.message);else{const r=Ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});eo.warn(r.message)}}}function M2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=1024,P9=30*24*60*60*1e3;class N9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=OE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=P9}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=OE(),{heartbeatsToSend:n,unsentEntries:r}=D9(this._heartbeatsCache.heartbeats),i=Nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function OE(){return new Date().toISOString().substring(0,10)}function D9(t,e=R9){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),jE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class O9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E$()?S$().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await A9(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return DE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return DE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jE(t){return Nh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t){to(new ss("platform-logger",e=>new Q$(e),"PRIVATE")),to(new ss("heartbeat",e=>new N9(e),"PRIVATE")),Pr(ty,NE,t),Pr(ty,NE,"esm2017"),Pr("fire-js","")}j9("");function yx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function L2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M9=L2,F2=new tu("auth","Firebase",L2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new mx("@firebase/auth");function L9(t,...e){jh.logLevel<=Ee.WARN&&jh.warn(`Auth (${wo}): ${t}`,...e)}function Od(t,...e){jh.logLevel<=Ee.ERROR&&jh.error(`Auth (${wo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,...e){throw vx(t,...e)}function Nr(t,...e){return vx(t,...e)}function $2(t,e,n){const r=Object.assign(Object.assign({},M9()),{[e]:n});return new tu("auth","Firebase",r).create(e,{appName:t.name})}function F9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lr(t,"argument-error"),$2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return F2.create(t,...e)}function ce(t,e,...n){if(!t)throw vx(e,...n)}function Jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Od(e),new Error(e)}function ui(t,e){t||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $9(){return ME()==="http:"||ME()==="https:"}function ME(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($9()||x$()||"connection"in navigator)?navigator.onLine:!0}function z9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.shortDelay=e,this.longDelay=n,ui(n>e,"Short delay should be less than long delay!"),this.isMobile=y$()||w$()}get(){return B9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e){ui(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=new ru(3e4,6e4);function z2(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function iu(t,e,n,r,i={}){return V2(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=nu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),B2.fetch()(U2(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function V2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},V9),e);try{const i=new H9(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw nd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw nd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $2(t,d,c);Lr(t,d)}}catch(i){if(i instanceof Vr)throw i;Lr(t,"network-request-failed",{message:String(i)})}}async function W9(t,e,n,r,i={}){const s=await iu(t,e,n,r,i);return"mfaPendingCredential"in s&&Lr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function U2(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?xx(t.config,i):`${t.config.apiScheme}://${i}`}class H9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nr(this.auth,"network-request-failed")),U9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(t,e){return iu(t,"POST","/v1/accounts:delete",e)}async function G9(t,e){return iu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K9(t,e=!1){const n=wt(t),r=await n.getIdToken(e),i=wx(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Vl(Zp(i.auth_time)),issuedAtTime:Vl(Zp(i.iat)),expirationTime:Vl(Zp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zp(t){return Number(t)*1e3}function wx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Od("JWT malformed, contained fewer than 3 sections"),null;try{const i=T2(n);return i?JSON.parse(i):(Od("Failed to decode base64 JWT payload"),null)}catch(i){return Od("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function X9(t){const e=wx(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vr&&Q9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Q9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vl(this.lastLoginAt),this.creationTime=Vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Sc(t,G9(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eB(s.providerUserInfo):[],a=Z9(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new W2(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function J9(t){const e=wt(t);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z9(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eB(t){return t.map(e=>{var{providerId:n}=e,r=yx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tB(t,e){const n=await V2(t,{},async()=>{const r=nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=U2(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",B2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X9(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ce(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await tB(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new bc;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bc,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=yx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new W2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Sc(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K9(this,e)}reload(){return J9(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Sc(this,q9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:T,stsTokenManager:b}=n;ce(w&&b,e,"internal-error");const k=bc.fromJSON(this.name,b);ce(typeof w=="string",e,"internal-error"),bi(h,e.name),bi(m,e.name),ce(typeof E=="boolean",e,"internal-error"),ce(typeof S=="boolean",e,"internal-error"),bi(p,e.name),bi(y,e.name),bi(x,e.name),bi(_,e.name),bi(v,e.name),bi(g,e.name);const R=new Vs({uid:w,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:S,photoURL:y,phoneNumber:p,tenantId:x,stsTokenManager:k,createdAt:v,lastLoginAt:g});return T&&Array.isArray(T)&&(R.providerData=T.map(O=>Object.assign({},O))),_&&(R._redirectEventId=_),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new bc;i.updateFromServerResponse(n);const s=new Vs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new Map;function Zr(t){ui(t instanceof Function,"Expected a class definition");let e=LE.get(t);return e?(ui(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H2.type="NONE";const FE=H2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e,n){return`firebase:${t}:${e}:${n}`}class oa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=jd(this.userKey,i.apiKey,s),this.fullPersistenceKey=jd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oa(Zr(FE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Zr(FE);const o=jd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Vs._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new oa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new oa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q2(e))return"Blackberry";if(Y2(e))return"Webos";if(_x(e))return"Safari";if((e.includes("chrome/")||G2(e))&&!e.includes("edge/"))return"Chrome";if(X2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function q2(t=Kt()){return/firefox\//i.test(t)}function _x(t=Kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G2(t=Kt()){return/crios\//i.test(t)}function K2(t=Kt()){return/iemobile/i.test(t)}function X2(t=Kt()){return/android/i.test(t)}function Q2(t=Kt()){return/blackberry/i.test(t)}function Y2(t=Kt()){return/webos/i.test(t)}function Gf(t=Kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nB(t=Kt()){var e;return Gf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rB(){return _$()&&document.documentMode===10}function J2(t=Kt()){return Gf(t)||X2(t)||Y2(t)||Q2(t)||/windows phone/i.test(t)||K2(t)}function iB(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e=[]){let n;switch(t){case"Browser":n=$E(Kt());break;case"Worker":n=`${$E(Kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oB(t,e={}){return iu(t,"GET","/v2/passwordPolicy",z2(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=6;class lB{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:aB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BE(this),this.idTokenSubscription=new BE(this),this.beforeStateQueue=new sB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await oa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?wt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oB(this),n=new lB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[Zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&L9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kf(t){return wt(t)}class BE{constructor(e){this.auth=e,this.observer=null,this.addObserver=C$(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function dB(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Nr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",uB().appendChild(r)})}function hB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(t,e){const n=qf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Dh(s,e??{}))return i;Lr(i,"already-initialized")}return n.initialize({options:e})}function mB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pB(t,e,n){const r=Kf(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=eC(e),{host:o,port:a}=gB(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||yB()}function eC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gB(t){const e=eC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:zE(o)}}}function zE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,n){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t,e){return W9(t,"POST","/v1/accounts:signInWithIdp",z2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB="http://localhost";class no extends tC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=yx(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new no(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return aa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,aa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,aa(e,n)}buildRequest(){const e={requestUri:vB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Ex{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends su{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return no._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Er.credential(n,r)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends su{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends su{constructor(){super("twitter.com")}static credential(e,n){return no._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Di.credential(n,r)}catch{return null}}}Di.TWITTER_SIGN_IN_METHOD="twitter.com";Di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Vs._fromIdTokenResponse(e,r,i),o=VE(r);return new Ca({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=VE(r);return new Ca({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function VE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends Vr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Lh(e,n,r,i)}}function nC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(t,s,e,r):s})}async function xB(t,e,n=!1){const r=await Sc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ca._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Sc(t,nC(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=wx(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Ca._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Lr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _B(t,e,n=!1){const r="signIn",i=await nC(t,r,e),s=await Ca._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function EB(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function SB(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function bB(t,e,n,r){return wt(t).onAuthStateChanged(e,n,r)}function rC(t){return wt(t).signOut()}const Fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fh,"1"),this.storage.removeItem(Fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(){const t=Kt();return _x(t)||Gf(t)}const TB=1e3,IB=10;class sC extends iC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=kB()&&iB(),this.fallbackToPolling=J2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);rB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,IB):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sC.type="LOCAL";const CB=sC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC extends iC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oC.type="SESSION";const aC=oC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await AB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Sx("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function PB(t){Dr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function NB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OB(){return lC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firebaseLocalStorageDb",jB=1,$h="firebaseLocalStorage",uC="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qf(t,e){return t.transaction([$h],e?"readwrite":"readonly").objectStore($h)}function MB(){const t=indexedDB.deleteDatabase(cC);return new ou(t).toPromise()}function sy(){const t=indexedDB.open(cC,jB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($h,{keyPath:uC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($h)?e(r):(r.close(),await MB(),e(await sy()))})})}async function UE(t,e,n){const r=Qf(t,!0).put({[uC]:e,value:n});return new ou(r).toPromise()}async function LB(t,e){const n=Qf(t,!1).get(e),r=await new ou(n).toPromise();return r===void 0?null:r.value}function WE(t,e){const n=Qf(t,!0).delete(e);return new ou(n).toPromise()}const FB=800,$B=3;class dC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$B)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(OB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await NB(),!this.activeServiceWorker)return;this.sender=new RB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sy();return await UE(e,Fh,"1"),await WE(e,Fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>UE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>LB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>WE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Qf(i,!1).getAll();return new ou(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dC.type="LOCAL";const BB=dC;new ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e){return e?Zr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx extends tC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return aa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return aa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return aa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zB(t){return _B(t.auth,new bx(t),t.bypassAuthState)}function VB(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),wB(n,new bx(t),t.bypassAuthState)}async function UB(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),xB(n,new bx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zB;case"linkViaPopup":case"linkViaRedirect":return UB;case"reauthViaPopup":case"reauthViaRedirect":return VB;default:Lr(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB=new ru(2e3,1e4);async function HB(t,e,n){const r=Kf(t);F9(t,e,Ex);const i=hC(r,n);return new Ms(r,"signInViaPopup",e,i).executeNotNull()}class Ms extends fC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=Sx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WB.get())};e()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="pendingRedirect",Md=new Map;class GB extends fC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const r=await KB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KB(t,e){const n=YB(e),r=QB(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function XB(t,e){Md.set(t._key(),e)}function QB(t){return Zr(t._redirectPersistence)}function YB(t){return jd(qB,t.config.apiKey,t.name)}async function JB(t,e,n=!1){const r=Kf(t),i=hC(r,e),o=await new GB(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=10*60*1e3;class ez{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZB&&this.cachedEventUids.clear(),this.cachedEventUids.has(HE(e))}saveEventToCache(e){this.cachedEventUids.add(HE(e)),this.lastProcessedEventTime=Date.now()}}function HE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nz(t,e={}){return iu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iz=/^https?/;async function sz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nz(t);for(const n of e)try{if(oz(n))return}catch{}Lr(t,"unauthorized-domain")}function oz(t){const e=iy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iz.test(n))return!1;if(rz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az=new ru(3e4,6e4);function qE(){const t=Dr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lz(t){return new Promise((e,n)=>{var r,i,s;function o(){qE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qE(),n(Nr(t,"network-request-failed"))},timeout:az.get()})}if(!((i=(r=Dr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Dr().gapi)===null||s===void 0)&&s.load)o();else{const a=hB("iframefcb");return Dr()[a]=()=>{gapi.load?o():n(Nr(t,"network-request-failed"))},dB(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function cz(t){return Ld=Ld||lz(t),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=new ru(5e3,15e3),dz="__/auth/iframe",hz="emulator/auth/iframe",fz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pz(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xx(e,hz):`https://${t.config.authDomain}/${dz}`,r={apiKey:e.apiKey,appName:t.name,v:wo},i=mz.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${nu(r).slice(1)}`}async function gz(t){const e=await cz(t),n=Dr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:pz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fz,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Nr(t,"network-request-failed"),a=Dr().setTimeout(()=>{s(o)},uz.get());function l(){Dr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vz=500,xz=600,wz="_blank",_z="http://localhost";class GE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ez(t,e,n,r=vz,i=xz){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},yz),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Kt().toLowerCase();n&&(a=G2(c)?wz:n),q2(c)&&(e=e||_z,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(nB(c)&&a!=="_self")return Sz(e||"",a),new GE(null);const h=window.open(e||"",a,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new GE(h)}function Sz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz="__/auth/handler",kz="emulator/auth/handler",Tz=encodeURIComponent("fac");async function KE(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wo,eventId:i};if(e instanceof Ex){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",I$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof su){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${Tz}=${encodeURIComponent(l)}`:"";return`${Iz(t)}?${nu(a).slice(1)}${c}`}function Iz({config:t}){return t.emulator?xx(t,kz):`https://${t.authDomain}/${bz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="webStorageSupport";class Cz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aC,this._completeRedirectFn=JB,this._overrideRedirectResult=XB}async _openPopup(e,n,r,i){var s;ui((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await KE(e,n,r,iy(),i);return Ez(e,o,Sx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await KE(e,n,r,iy(),i);return PB(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ui(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gz(e),r=new ez(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eg,{type:eg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[eg];o!==void 0&&n(!!o),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J2()||_x()||Gf()}}const Az=Cz;var XE="@firebase/auth",QE="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Nz(t){to(new ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z2(t)},c=new cB(r,i,s,l);return mB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),to(new ss("auth-internal",e=>{const n=Kf(e.getProvider("auth").getImmediate());return(r=>new Rz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(XE,QE,Pz(t)),Pr(XE,QE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=5*60,Oz=R2("authIdTokenMaxAge")||Dz;let YE=null;const jz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Oz)return;const i=n==null?void 0:n.token;YE!==i&&(YE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Mz(t=gx()){const e=qf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fB(t,{popupRedirectResolver:Az,persistence:[BB,CB,aC]}),r=R2("authTokenSyncURL");if(r){const s=jz(r);SB(n,s,()=>s(n.currentUser)),EB(n,o=>s(o))}const i=I2("auth");return i&&pB(n,`http://${i}`),n}Nz("Browser");var Lz="firebase",Fz="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(Lz,Fz,"app");var $z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,kx=kx||{},ae=$z||self;function Yf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function au(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Bz(t){return Object.prototype.hasOwnProperty.call(t,tg)&&t[tg]||(t[tg]=++zz)}var tg="closure_uid_"+(1e9*Math.random()>>>0),zz=0;function Vz(t,e,n){return t.call.apply(t.bind,arguments)}function Uz(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Wt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Wt=Vz:Wt=Uz,Wt.apply(null,arguments)}function rd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function It(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function xs(){this.s=this.s,this.o=this.o}var Wz=0;xs.prototype.s=!1;xs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Wz!=0)&&Bz(this)};xs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Tx(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function JE(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Yf(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ht(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var Hz=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function kc(t){return/^[\s\xa0]*$/.test(t)}function Jf(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function Sr(t){return Jf().indexOf(t)!=-1}function Ix(t){return Ix[" "](t),t}Ix[" "]=function(){};function qz(t,e){var n=FV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Gz=Sr("Opera"),Aa=Sr("Trident")||Sr("MSIE"),gC=Sr("Edge"),oy=gC||Aa,yC=Sr("Gecko")&&!(Jf().toLowerCase().indexOf("webkit")!=-1&&!Sr("Edge"))&&!(Sr("Trident")||Sr("MSIE"))&&!Sr("Edge"),Kz=Jf().toLowerCase().indexOf("webkit")!=-1&&!Sr("Edge");function vC(){var t=ae.document;return t?t.documentMode:void 0}var ay;e:{var ng="",rg=function(){var t=Jf();if(yC)return/rv:([^\);]+)(\)|;)/.exec(t);if(gC)return/Edge\/([\d\.]+)/.exec(t);if(Aa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Kz)return/WebKit\/(\S+)/.exec(t);if(Gz)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(rg&&(ng=rg?rg[1]:""),Aa){var ig=vC();if(ig!=null&&ig>parseFloat(ng)){ay=String(ig);break e}}ay=ng}var ly;if(ae.document&&Aa){var ZE=vC();ly=ZE||parseInt(ay,10)||void 0}else ly=void 0;var Xz=ly;function Tc(t,e){if(Ht.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yC){e:{try{Ix(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Qz[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tc.$.h.call(this)}}It(Tc,Ht);var Qz={2:"touch",3:"pen",4:"mouse"};Tc.prototype.h=function(){Tc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var lu="closure_listenable_"+(1e6*Math.random()|0),Yz=0;function Jz(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Yz,this.fa=this.ia=!1}function Zf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Cx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Zz(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function xC(t){const e={};for(const n in t)e[n]=t[n];return e}const eS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<eS.length;s++)n=eS[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function em(t){this.src=t,this.g={},this.h=0}em.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=uy(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Jz(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function cy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=pC(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Zf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function uy(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Ax="closure_lm_"+(1e6*Math.random()|0),sg={};function _C(t,e,n,r,i){if(r&&r.once)return SC(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)_C(t,e[s],n,r,i);return null}return n=Nx(n),t&&t[lu]?t.O(e,n,au(r)?!!r.capture:!!r,i):EC(t,e,n,!1,r,i)}function EC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=au(i)?!!i.capture:!!i,a=Px(t);if(a||(t[Ax]=a=new em(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=eV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Hz||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(kC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function eV(){function t(n){return e.call(t.src,t.listener,n)}const e=tV;return t}function SC(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)SC(t,e[s],n,r,i);return null}return n=Nx(n),t&&t[lu]?t.P(e,n,au(r)?!!r.capture:!!r,i):EC(t,e,n,!0,r,i)}function bC(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)bC(t,e[s],n,r,i);else r=au(r)?!!r.capture:!!r,n=Nx(n),t&&t[lu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=uy(s,n,r,i),-1<n&&(Zf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Px(t))&&(e=t.g[e.toString()],t=-1,e&&(t=uy(e,n,r,i)),(n=-1<t?e[t]:null)&&Rx(n))}function Rx(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[lu])cy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(kC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Px(e))?(cy(n,t),n.h==0&&(n.src=null,e[Ax]=null)):Zf(t)}}}function kC(t){return t in sg?sg[t]:sg[t]="on"+t}function tV(t,e){if(t.fa)t=!0;else{e=new Tc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Rx(t),t=n.call(r,e)}return t}function Px(t){return t=t[Ax],t instanceof em?t:null}var og="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nx(t){return typeof t=="function"?t:(t[og]||(t[og]=function(e){return t.handleEvent(e)}),t[og])}function Tt(){xs.call(this),this.i=new em(this),this.S=this,this.J=null}It(Tt,xs);Tt.prototype[lu]=!0;Tt.prototype.removeEventListener=function(t,e,n,r){bC(this,t,e,n,r)};function Ot(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ht(e,t);else if(e instanceof Ht)e.target=e.target||t;else{var i=e;e=new Ht(r,t),wC(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=id(o,r,!0,e)&&i}if(o=e.g=t,i=id(o,r,!0,e)&&i,i=id(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=id(o,r,!1,e)&&i}Tt.prototype.N=function(){if(Tt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zf(n[r]);delete t.g[e],t.h--}}this.J=null};Tt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Tt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function id(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&cy(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Dx=ae.JSON.stringify;class nV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function rV(){var t=Ox;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class iV{constructor(){this.h=this.g=null}add(e,n){const r=TC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var TC=new nV(()=>new sV,t=>t.reset());class sV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function oV(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function aV(t){ae.setTimeout(()=>{throw t},0)}let Ic,Cc=!1,Ox=new iV,IC=()=>{const t=ae.Promise.resolve(void 0);Ic=()=>{t.then(lV)}};var lV=()=>{for(var t;t=rV();){try{t.h.call(t.g)}catch(n){aV(n)}var e=TC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Cc=!1};function tm(t,e){Tt.call(this),this.h=t||1,this.g=e||ae,this.j=Wt(this.qb,this),this.l=Date.now()}It(tm,Tt);z=tm.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ot(this,"tick"),this.ga&&(jx(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function jx(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){tm.$.N.call(this),jx(this),delete this.g};function Mx(t,e,n){if(typeof t=="function")n&&(t=Wt(t,n));else if(t&&typeof t.handleEvent=="function")t=Wt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function CC(t){t.g=Mx(()=>{t.g=null,t.i&&(t.i=!1,CC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class cV extends xs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CC(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ac(t){xs.call(this),this.h=t,this.g={}}It(Ac,xs);var tS=[];function AC(t,e,n,r){Array.isArray(n)||(n&&(tS[0]=n.toString()),n=tS);for(var i=0;i<n.length;i++){var s=_C(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function RC(t){Cx(t.g,function(e,n){this.g.hasOwnProperty(n)&&Rx(e)},t),t.g={}}Ac.prototype.N=function(){Ac.$.N.call(this),RC(this)};Ac.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function nm(){this.g=!0}nm.prototype.Ea=function(){this.g=!1};function uV(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function dV(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Jo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+fV(t,n)+(r?" "+r:"")})}function hV(t,e){t.info(function(){return"TIMEOUT: "+e})}nm.prototype.info=function(){};function fV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Dx(n)}catch{return e}}var _o={},nS=null;function rm(){return nS=nS||new Tt}_o.Ta="serverreachability";function PC(t){Ht.call(this,_o.Ta,t)}It(PC,Ht);function Rc(t){const e=rm();Ot(e,new PC(e))}_o.STAT_EVENT="statevent";function NC(t,e){Ht.call(this,_o.STAT_EVENT,t),this.stat=e}It(NC,Ht);function tn(t){const e=rm();Ot(e,new NC(e,t))}_o.Ua="timingevent";function DC(t,e){Ht.call(this,_o.Ua,t),this.size=e}It(DC,Ht);function cu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}var im={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},OC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Lx(){}Lx.prototype.h=null;function rS(t){return t.h||(t.h=t.i())}function jC(){}var uu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fx(){Ht.call(this,"d")}It(Fx,Ht);function $x(){Ht.call(this,"c")}It($x,Ht);var dy;function sm(){}It(sm,Lx);sm.prototype.g=function(){return new XMLHttpRequest};sm.prototype.i=function(){return{}};dy=new sm;function du(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ac(this),this.P=mV,t=oy?125:void 0,this.V=new tm(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MC}function MC(){this.i=null,this.g="",this.h=!1}var mV=45e3,hy={},Bh={};z=du.prototype;z.setTimeout=function(t){this.P=t};function fy(t,e,n){t.L=1,t.v=am(di(e)),t.s=n,t.S=!0,LC(t,null)}function LC(t,e){t.G=Date.now(),hu(t),t.A=di(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),HC(n.i,"t",r),t.C=0,n=t.l.J,t.h=new MC,t.g=hA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new cV(Wt(t.Pa,t,t.g),t.O)),AC(t.U,t.g,"readystatechange",t.nb),e=t.I?xC(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Rc(),uV(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&Tr(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const d=Tr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||oy||this.g&&(this.h.h||this.g.ja()||aS(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Rc(3):Rc(2)),om(this);var n=this.g.da();this.ca=n;t:if(FC(this)){var r=aS(this.g);t="";var i=r.length,s=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ls(this),Ul(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,dV(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kc(a)){var c=a;break t}}c=null}if(n=c)Jo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,my(this,n);else{this.i=!1,this.o=3,tn(12),Ls(this),Ul(this);break e}}this.S?($C(this,d,o),oy&&this.i&&d==3&&(AC(this.U,this.V,"tick",this.mb),this.V.start())):(Jo(this.j,this.m,o,null),my(this,o)),d==4&&Ls(this),this.i&&!this.J&&(d==4?lA(this.l,this):(this.i=!1,hu(this)))}else jV(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,tn(12)):(this.o=0,tn(13)),Ls(this),Ul(this)}}}catch{}finally{}};function FC(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function $C(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=pV(t,n),i==Bh){e==4&&(t.o=4,tn(14),r=!1),Jo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==hy){t.o=4,tn(15),Jo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Jo(t.j,t.m,i,null),my(t,i);FC(t)&&i!=Bh&&i!=hy&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,tn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hx(e),e.M=!0,tn(11))):(Jo(t.j,t.m,n,"[Invalid Chunked Response]"),Ls(t),Ul(t))}z.mb=function(){if(this.g){var t=Tr(this.g),e=this.g.ja();this.C<e.length&&(om(this),$C(this,t,e),this.i&&t!=4&&hu(this))}};function pV(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Bh:(n=Number(e.substring(n,r)),isNaN(n)?hy:(r+=1,r+n>e.length?Bh:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,Ls(this)};function hu(t){t.Y=Date.now()+t.P,BC(t,t.P)}function BC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=cu(Wt(t.lb,t),e)}function om(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(hV(this.j,this.A),this.L!=2&&(Rc(),tn(17)),Ls(this),this.o=2,Ul(this)):BC(this,this.Y-t)};function Ul(t){t.l.H==0||t.J||lA(t.l,t)}function Ls(t){om(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,jx(t.V),RC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function my(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||py(n.i,t))){if(!t.K&&py(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Uh(n),dm(n);else break e;Wx(n),tn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=cu(Wt(n.ib,n),6e3));if(1>=KC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Fs(n,11)}else if((t.K||n.g==t)&&Uh(n),!kc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Bx(s,s.h),s.h=null))}if(r.F){const x=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(r.Da=x,Le(r.I,r.F,x))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=dA(r,r.J?r.pa:null,r.Y),o.K){XC(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(om(a),hu(a)),r.g=o}else oA(r);0<n.j.length&&hm(n)}else c[0]!="stop"&&c[0]!="close"||Fs(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Fs(n,7):Ux(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Rc(4)}catch{}}function gV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Yf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function yV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Yf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function zC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Yf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=yV(t),r=gV(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var VC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Us(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Us){this.h=t.h,zh(this,t.j),this.s=t.s,this.g=t.g,Vh(this,t.m),this.l=t.l;var e=t.i,n=new Pc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),iS(this,n),this.o=t.o}else t&&(e=String(t).match(VC))?(this.h=!1,zh(this,e[1]||"",!0),this.s=Il(e[2]||""),this.g=Il(e[3]||"",!0),Vh(this,e[4]),this.l=Il(e[5]||"",!0),iS(this,e[6]||"",!0),this.o=Il(e[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}Us.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Cl(e,sS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Cl(e,sS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Cl(n,n.charAt(0)=="/"?_V:wV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Cl(n,SV)),t.join("")};function di(t){return new Us(t)}function zh(t,e,n){t.j=n?Il(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Vh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function iS(t,e,n){e instanceof Pc?(t.i=e,bV(t.i,t.h)):(n||(e=Cl(e,EV)),t.i=new Pc(e,t.h))}function Le(t,e,n){t.i.set(e,n)}function am(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Il(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,xV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var sS=/[#\/\?@]/g,wV=/[#\?:]/g,_V=/[#\?]/g,EV=/[#\?@]/g,SV=/#/g;function Pc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ws(t){t.g||(t.g=new Map,t.h=0,t.i&&vV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=Pc.prototype;z.add=function(t,e){ws(this),this.i=null,t=Qa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function UC(t,e){ws(t),e=Qa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function WC(t,e){return ws(t),e=Qa(t,e),t.g.has(e)}z.forEach=function(t,e){ws(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};z.ta=function(){ws(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};z.Z=function(t){ws(this);let e=[];if(typeof t=="string")WC(this,t)&&(e=e.concat(this.g.get(Qa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return ws(this),this.i=null,t=Qa(this,t),WC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function HC(t,e,n){UC(t,e),0<n.length&&(t.i=null,t.g.set(Qa(t,e),Tx(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Qa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function bV(t,e){e&&!t.j&&(ws(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(UC(this,r),HC(this,i,n))},t)),t.j=e}var kV=class{constructor(t,e){this.g=t,this.map=e}};function qC(t){this.l=t||TV,ae.PerformanceNavigationTiming?(t=ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var TV=10;function GC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function KC(t){return t.h?1:t.g?t.g.size:0}function py(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Bx(t,e){t.g?t.g.add(e):t.h=e}function XC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}qC.prototype.cancel=function(){if(this.i=QC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function QC(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Tx(t.i)}var IV=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function CV(){this.g=new IV}function AV(t,e,n){const r=n||"";try{zC(t,function(i,s){let o=i;au(i)&&(o=Dx(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function RV(t,e){const n=new nm;if(ae.Image){const r=new Image;r.onload=rd(sd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=rd(sd,n,r,"TestLoadImage: error",!1,e),r.onabort=rd(sd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=rd(sd,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function sd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function lm(t){this.l=t.fc||null,this.j=t.ob||!1}It(lm,Lx);lm.prototype.g=function(){return new cm(this.l,this.j)};lm.prototype.i=function(t){return function(){return t}}({});function cm(t,e){Tt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}It(cm,Tt);var zx=0;z=cm.prototype;z.open=function(t,e){if(this.readyState!=zx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Nc(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fu(this)),this.readyState=zx};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Nc(this)),this.g&&(this.readyState=3,Nc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;YC(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function YC(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fu(this):Nc(this),this.readyState==3&&YC(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,fu(this))};z.Ya=function(t){this.g&&(this.response=t,fu(this))};z.ka=function(){this.g&&fu(this)};function fu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Nc(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Nc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(cm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var PV=ae.JSON.parse;function Je(t){Tt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=JC,this.L=this.M=!1}It(Je,Tt);var JC="",NV=/^https?$/i,DV=["POST","PUT"];z=Je.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():dy.g(),this.C=this.u?rS(this.u):rS(dy),this.g.onreadystatechange=Wt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){oS(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ae.FormData&&t instanceof ae.FormData,!(0<=pC(DV,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tA(this),0<this.B&&((this.L=OV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wt(this.ua,this)):this.A=Mx(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){oS(this,s)}};function OV(t){return Aa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof kx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ot(this,"timeout"),this.abort(8))};function oS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ZC(t),um(t)}function ZC(t){t.F||(t.F=!0,Ot(t,"complete"),Ot(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ot(this,"complete"),Ot(this,"abort"),um(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),um(this,!0)),Je.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?eA(this):this.kb())};z.kb=function(){eA(this)};function eA(t){if(t.h&&typeof kx<"u"&&(!t.C[1]||Tr(t)!=4||t.da()!=2)){if(t.v&&Tr(t)==4)Mx(t.La,0,t);else if(Ot(t,"readystatechange"),Tr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(VC)[1]||null;!i&&ae.self&&ae.self.location&&(i=ae.self.location.protocol.slice(0,-1)),r=!NV.test(i?i.toLowerCase():"")}n=r}if(n)Ot(t,"complete"),Ot(t,"success");else{t.m=6;try{var s=2<Tr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",ZC(t)}}finally{um(t)}}}}function um(t,e){if(t.g){tA(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ot(t,"ready");try{n.onreadystatechange=r}catch{}}}function tA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function Tr(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),PV(e)}};function aS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case JC:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function jV(t){const e={};t=(t.g&&2<=Tr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(kc(t[r]))continue;var n=oV(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}Zz(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function nA(t){let e="";return Cx(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Vx(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=nA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Le(t,e,n))}function vl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function rA(t){this.Ga=0,this.j=[],this.l=new nm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vl("baseRetryDelayMs",5e3,t),this.hb=vl("retryDelaySeedMs",1e4,t),this.eb=vl("forwardChannelMaxRetries",2,t),this.xa=vl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new qC(t&&t.concurrentRequestLimit),this.Ja=new CV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=rA.prototype;z.ra=8;z.H=1;function Ux(t){if(iA(t),t.H==3){var e=t.W++,n=di(t.I);if(Le(n,"SID",t.K),Le(n,"RID",e),Le(n,"TYPE","terminate"),mu(t,n),e=new du(t,t.l,e),e.L=2,e.v=am(di(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=hA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),hu(e)}uA(t)}function dm(t){t.g&&(Hx(t),t.g.cancel(),t.g=null)}function iA(t){dm(t),t.u&&(ae.clearTimeout(t.u),t.u=null),Uh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ae.clearTimeout(t.m),t.m=null)}function hm(t){if(!GC(t.i)&&!t.m){t.m=!0;var e=t.Na;Ic||IC(),Cc||(Ic(),Cc=!0),Ox.add(e,t),t.C=0}}function MV(t,e){return KC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=cu(Wt(t.Na,t,e),cA(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new du(this,this.l,t);let s=this.s;if(this.U&&(s?(s=xC(s),wC(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=sA(this,i,e),n=di(this.I),Le(n,"RID",t),Le(n,"CVER",22),this.F&&Le(n,"X-HTTP-Session-Id",this.F),mu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(nA(s)))+"&"+e:this.o&&Vx(n,this.o,s)),Bx(this.i,i),this.bb&&Le(n,"TYPE","init"),this.P?(Le(n,"$req",e),Le(n,"SID","null"),i.aa=!0,fy(i,n,null)):fy(i,n,e),this.H=2}}else this.H==3&&(t?lS(this,t):this.j.length==0||GC(this.i)||lS(this))};function lS(t,e){var n;e?n=e.m:n=t.W++;const r=di(t.I);Le(r,"SID",t.K),Le(r,"RID",n),Le(r,"AID",t.V),mu(t,r),t.o&&t.s&&Vx(r,t.o,t.s),n=new du(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=sA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Bx(t.i,n),fy(n,r,e)}function mu(t,e){t.na&&Cx(t.na,function(n,r){Le(e,r,n)}),t.h&&zC({},function(n,r){Le(e,r,n)})}function sA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Wt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const d=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{AV(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function oA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ic||IC(),Cc||(Ic(),Cc=!0),Ox.add(e,t),t.A=0}}function Wx(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=cu(Wt(t.Ma,t),cA(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,aA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=cu(Wt(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,tn(10),dm(this),aA(this))};function Hx(t){t.B!=null&&(ae.clearTimeout(t.B),t.B=null)}function aA(t){t.g=new du(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=di(t.wa);Le(e,"RID","rpc"),Le(e,"SID",t.K),Le(e,"AID",t.V),Le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Le(e,"TO",t.qa),Le(e,"TYPE","xmlhttp"),mu(t,e),t.o&&t.s&&Vx(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=am(di(e)),n.s=null,n.S=!0,LC(n,t)}z.ib=function(){this.v!=null&&(this.v=null,dm(this),Wx(this),tn(19))};function Uh(t){t.v!=null&&(ae.clearTimeout(t.v),t.v=null)}function lA(t,e){var n=null;if(t.g==e){Uh(t),Hx(t),t.g=null;var r=2}else if(py(t.i,e))n=e.F,XC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=rm(),Ot(r,new DC(r,n)),hm(t)}else oA(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&MV(t,e)||r==2&&Wx(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Fs(t,5);break;case 4:Fs(t,10);break;case 3:Fs(t,6);break;default:Fs(t,2)}}}function cA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Fs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Wt(t.pb,t);n||(n=new Us("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||zh(n,"https"),am(n)),RV(n.toString(),r)}else tn(2);t.H=0,t.h&&t.h.za(e),uA(t),iA(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),tn(2)):(this.l.info("Failed to ping google.com"),tn(1))};function uA(t){if(t.H=0,t.ma=[],t.h){const e=QC(t.i);(e.length!=0||t.j.length!=0)&&(JE(t.ma,e),JE(t.ma,t.j),t.i.i.length=0,Tx(t.j),t.j.length=0),t.h.ya()}}function dA(t,e,n){var r=n instanceof Us?di(n):new Us(n);if(r.g!="")e&&(r.g=e+"."+r.g),Vh(r,r.m);else{var i=ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Us(null);r&&zh(s,r),e&&(s.g=e),i&&Vh(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Le(r,n,e),Le(r,"VER",t.ra),mu(t,r),r}function hA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Je(new lm({ob:!0})):new Je(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function fA(){}z=fA.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function Wh(){if(Aa&&!(10<=Number(Xz)))throw Error("Environmental error: no available transport.")}Wh.prototype.g=function(t,e){return new On(t,e)};function On(t,e){Tt.call(this),this.g=new rA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!kc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ya(this)}It(On,Tt);On.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;tn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=dA(t,null,t.Y),hm(t)};On.prototype.close=function(){Ux(this.g)};On.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Dx(t),t=n);e.j.push(new kV(e.fb++,t)),e.H==3&&hm(e)};On.prototype.N=function(){this.g.h=null,delete this.j,Ux(this.g),delete this.g,On.$.N.call(this)};function mA(t){Fx.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}It(mA,Fx);function pA(){$x.call(this),this.status=1}It(pA,$x);function Ya(t){this.g=t}It(Ya,fA);Ya.prototype.Ba=function(){Ot(this.g,"a")};Ya.prototype.Aa=function(t){Ot(this.g,new mA(t))};Ya.prototype.za=function(t){Ot(this.g,new pA)};Ya.prototype.ya=function(){Ot(this.g,"b")};function LV(){this.blockSize=-1}function mr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}It(mr,LV);mr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ag(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}mr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)ag(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ag(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ag(this,r),i=0;break}}this.h=i,this.i+=e};mr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ie(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var FV={};function qx(t){return-128<=t&&128>t?qz(t,function(e){return new Ie([e|0],0>e?-1:0)}):new Ie([t|0],0>t?-1:0)}function Ir(t){if(isNaN(t)||!isFinite(t))return la;if(0>t)return Pt(Ir(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=gy;return new Ie(e,0)}function gA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Pt(gA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ir(Math.pow(e,8)),r=la,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ir(Math.pow(e,s)),r=r.R(s).add(Ir(o))):(r=r.R(n),r=r.add(Ir(o)))}return r}var gy=4294967296,la=qx(0),yy=qx(1),cS=qx(16777216);z=Ie.prototype;z.ea=function(){if(qn(this))return-Pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:gy+r)*e,e*=gy}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ei(this))return"0";if(qn(this))return"-"+Pt(this).toString(t);for(var e=Ir(Math.pow(t,6)),n=this,r="";;){var i=qh(n,e).g;n=Hh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ei(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ei(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function qn(t){return t.h==-1}z.X=function(t){return t=Hh(this,t),qn(t)?-1:ei(t)?0:1};function Pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ie(n,~t.h).add(yy)}z.abs=function(){return qn(this)?Pt(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ie(n,n[n.length-1]&-2147483648?-1:0)};function Hh(t,e){return t.add(Pt(e))}z.R=function(t){if(ei(this)||ei(t))return la;if(qn(this))return qn(t)?Pt(this).R(Pt(t)):Pt(Pt(this).R(t));if(qn(t))return Pt(this.R(Pt(t)));if(0>this.X(cS)&&0>t.X(cS))return Ir(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,od(n,2*r+2*i),n[2*r+2*i+1]+=s*l,od(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,od(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,od(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ie(n,0)};function od(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function xl(t,e){this.g=t,this.h=e}function qh(t,e){if(ei(e))throw Error("division by zero");if(ei(t))return new xl(la,la);if(qn(t))return e=qh(Pt(t),e),new xl(Pt(e.g),Pt(e.h));if(qn(e))return e=qh(t,Pt(e)),new xl(Pt(e.g),e.h);if(30<t.g.length){if(qn(t)||qn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=yy,r=e;0>=r.X(t);)n=uS(n),r=uS(r);var i=Do(n,1),s=Do(r,1);for(r=Do(r,2),n=Do(n,2);!ei(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Do(r,1),n=Do(n,1)}return e=Hh(t,i.R(e)),new xl(i,e)}for(i=la;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ir(n),o=s.R(e);qn(o)||0<o.X(t);)n-=r,s=Ir(n),o=s.R(e);ei(s)&&(s=yy),i=i.add(s),t=Hh(t,o)}return new xl(i,t)}z.gb=function(t){return qh(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ie(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ie(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ie(n,this.h^t.h)};function uS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ie(n,t.h)}function Do(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ie(i,t.h)}Wh.prototype.createWebChannel=Wh.prototype.g;On.prototype.send=On.prototype.u;On.prototype.open=On.prototype.m;On.prototype.close=On.prototype.close;im.NO_ERROR=0;im.TIMEOUT=8;im.HTTP_ERROR=6;OC.COMPLETE="complete";jC.EventType=uu;uu.OPEN="a";uu.CLOSE="b";uu.ERROR="c";uu.MESSAGE="d";Tt.prototype.listen=Tt.prototype.O;Je.prototype.listenOnce=Je.prototype.P;Je.prototype.getLastError=Je.prototype.Sa;Je.prototype.getLastErrorCode=Je.prototype.Ia;Je.prototype.getStatus=Je.prototype.da;Je.prototype.getResponseJson=Je.prototype.Wa;Je.prototype.getResponseText=Je.prototype.ja;Je.prototype.send=Je.prototype.ha;Je.prototype.setWithCredentials=Je.prototype.Oa;mr.prototype.digest=mr.prototype.l;mr.prototype.reset=mr.prototype.reset;mr.prototype.update=mr.prototype.j;Ie.prototype.add=Ie.prototype.add;Ie.prototype.multiply=Ie.prototype.R;Ie.prototype.modulo=Ie.prototype.gb;Ie.prototype.compare=Ie.prototype.X;Ie.prototype.toNumber=Ie.prototype.ea;Ie.prototype.toString=Ie.prototype.toString;Ie.prototype.getBits=Ie.prototype.D;Ie.fromNumber=Ir;Ie.fromString=gA;var $V=function(){return new Wh},BV=function(){return rm()},lg=im,zV=OC,VV=_o,dS={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ad=jC,UV=Je,WV=mr,ca=Ie;const hS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new mx("@firebase/firestore");function fS(){return ro.logLevel}function Y(t,...e){if(ro.logLevel<=Ee.DEBUG){const n=e.map(Gx);ro.debug(`Firestore (${Ja}): ${t}`,...n)}}function hi(t,...e){if(ro.logLevel<=Ee.ERROR){const n=e.map(Gx);ro.error(`Firestore (${Ja}): ${t}`,...n)}}function Ra(t,...e){if(ro.logLevel<=Ee.WARN){const n=e.map(Gx);ro.warn(`Firestore (${Ja}): ${t}`,...n)}}function Gx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: `+t;throw hi(e),new Error(e)}function Be(t,e){t||se()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class qV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GV{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new si;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new si,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new si)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string"),new yA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new Bt(e)}}class KV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new KV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new QV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=JV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Pa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new xt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new xt(0,0))}static max(){return new le(new xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends Dc{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const ZV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Dc{construct(e,n,r){return new Ut(e,n,r)}static isValidIdentifier(e){return ZV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ut(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(n)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Fe.fromString(e))}static fromName(e){return new Z(Fe.fromString(e).popFirst(5))}static empty(){return new Z(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Fe(e.slice()))}}function eU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new os(i,Z.empty(),e)}function tU(t){return new os(t.readTime,t.key,-1)}class os{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new os(le.min(),Z.empty(),-1)}static max(){return new os(le.max(),Z.empty(),-1)}}function nU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==rU)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function gu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Kx.ae=-1;function fm(t){return t==null}function Gh(t){return t===0&&1/t==-1/0}function sU(t){return typeof t=="number"&&Number.isInteger(t)&&!Gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=i??Rt.EMPTY,this.right=s??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pS(this.data.getIterator())}getIteratorFrom(e){return new pS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class pS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new ur([])}unionWith(e){let n=new qt(Ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ur(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wA("Invalid base64 string: "+s):s}}(e);return new Xt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const oU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(t){if(Be(!!t),typeof t=="string"){let e=0;const n=oU.exec(t);if(Be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function io(t){return typeof t=="string"?Xt.fromBase64String(t):Xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qx(t){const e=t.mapValue.fields.__previous_value__;return Xx(e)?Qx(e):e}function Oc(t){const e=as(t.mapValue.fields.__local_write_time__.timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class jc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new jc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof jc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xx(t)?4:lU(t)?9007199254740991:10:se()}function Fr(t,e){if(t===e)return!0;const n=so(t);if(n!==so(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oc(t).isEqual(Oc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=as(i.timestampValue),a=as(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return io(i.bytesValue).isEqual(io(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ut(i.geoPointValue.latitude)===ut(s.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ut(i.integerValue)===ut(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ut(i.doubleValue),a=ut(s.doubleValue);return o===a?Gh(o)===Gh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Pa(t.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(mS(o)!==mS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Fr(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function Mc(t,e){return(t.values||[]).find(n=>Fr(n,e))!==void 0}function Na(t,e){if(t===e)return 0;const n=so(t),r=so(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ut(s.integerValue||s.doubleValue),l=ut(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return gS(t.timestampValue,e.timestampValue);case 4:return gS(Oc(t),Oc(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=io(s),l=io(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Se(a[c],l[c]);if(d!==0)return d}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(ut(s.latitude),ut(o.latitude));return a!==0?a:Se(ut(s.longitude),ut(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Na(a[c],l[c]);if(d)return d}return Se(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===cd.mapValue&&o===cd.mapValue)return 0;if(s===cd.mapValue)return 1;if(o===cd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=Se(l[h],d[h]);if(m!==0)return m;const p=Na(a[l[h]],c[d[h]]);if(p!==0)return p}return Se(l.length,d.length)}(t.mapValue,e.mapValue);default:throw se()}}function gS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=as(t),r=as(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function Da(t){return vy(t)}function vy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=as(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return io(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${vy(n.fields[o])}`;return i+"}"}(t.mapValue):se()}function yS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xy(t){return!!t&&"integerValue"in t}function Yx(t){return!!t&&"arrayValue"in t}function vS(t){return!!t&&"nullValue"in t}function xS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fd(t){return!!t&&"mapValue"in t}function Wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Za(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(n)}setAll(e){let n=Ut.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Wl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Fd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Fd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Za(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Gn(Wl(this.value))}}function _A(t){const e=[];return Za(t.fields,(n,r)=>{const i=new Ut([n]);if(Fd(r)){const s=_A(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Vt(e,0,le.min(),le.min(),le.min(),Gn.empty(),0)}static newFoundDocument(e,n,r,i){return new Vt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Vt(e,2,n,le.min(),le.min(),Gn.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,le.min(),le.min(),Gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.position=e,this.inclusive=n}}function wS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=Na(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _S(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n="asc"){this.field=e,this.dir=n}}function cU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{}class ht extends EA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dU(e,n,r):n==="array-contains"?new mU(e,r):n==="in"?new pU(e,r):n==="not-in"?new gU(e,r):n==="array-contains-any"?new yU(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hU(e,r):new fU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Na(n,this.value)):n!==null&&so(this.value)===so(n)&&this.matchesComparison(Na(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pr extends EA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new pr(e,n)}matches(e){return SA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function SA(t){return t.op==="and"}function bA(t){return uU(t)&&SA(t)}function uU(t){for(const e of t.filters)if(e instanceof pr)return!1;return!0}function wy(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(bA(t))return t.filters.map(e=>wy(e)).join(",");{const e=t.filters.map(n=>wy(n)).join(",");return`${t.op}(${e})`}}function kA(t,e){return t instanceof ht?function(r,i){return i instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&Fr(r.value,i.value)}(t,e):t instanceof pr?function(r,i){return i instanceof pr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&kA(o,i.filters[a]),!0):!1}(t,e):void se()}function TA(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Da(n.value)}`}(t):t instanceof pr?function(n){return n.op.toString()+" {"+n.getFilters().map(TA).join(" ,")+"}"}(t):"Filter"}class dU extends ht{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class hU extends ht{constructor(e,n){super(e,"in",n),this.keys=IA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fU extends ht{constructor(e,n){super(e,"not-in",n),this.keys=IA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class mU extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yx(n)&&Mc(n.arrayValue,this.value)}}class pU extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mc(this.value.arrayValue,n)}}class gU extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mc(this.value.arrayValue,n)}}class yU extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function ES(t,e=null,n=[],r=[],i=null,s=null,o=null){return new vU(t,e,n,r,i,s,o)}function Jx(t){const e=de(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Da(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Da(r)).join(",")),e.he=n}return e.he}function Zx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_S(t.startAt,e.startAt)&&_S(t.endAt,e.endAt)}function _y(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function xU(t,e,n,r,i,s,o,a){return new yu(t,e,n,r,i,s,o,a)}function ew(t){return new yu(t)}function SS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CA(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function tw(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function AA(t){return t.collectionGroup!==null}function ql(t){const e=de(t);if(e.Pe===null){e.Pe=[];const n=tw(e),r=CA(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Hl(n)),e.Pe.push(new Hl(Ut.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Hl(Ut.keyField(),s))}}}return e.Pe}function fi(t){const e=de(t);return e.Ie||(e.Ie=wU(e,ql(t))),e.Ie}function wU(t,e){if(t.limitType==="F")return ES(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Hl(i.field,s)});const n=t.endAt?new Kh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kh(t.startAt.position,t.startAt.inclusive):null;return ES(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ey(t,e){e.getFirstInequalityField(),tw(t);const n=t.filters.concat([e]);return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sy(t,e,n){return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mm(t,e){return Zx(fi(t),fi(e))&&t.limitType===e.limitType}function RA(t){return`${Jx(fi(t))}|lt:${t.limitType}`}function by(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TA(i)).join(", ")}]`),fm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Da(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Da(i)).join(",")),`Target(${r})`}(fi(t))}; limitType=${t.limitType})`}function pm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ql(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=wS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ql(r),i)||r.endAt&&!function(o,a,l){const c=wS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ql(r),i))}(t,e)}function _U(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PA(t){return(e,n)=>{let r=!1;for(const i of ql(t)){const s=EU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function EU(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Na(l,c):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Za(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=new Ke(Z.comparator);function mi(){return SU}const NA=new Ke(Z.comparator);function Al(...t){let e=NA;for(const n of t)e=e.insert(n.key,n);return e}function DA(t){let e=NA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $s(){return Gl()}function OA(){return Gl()}function Gl(){return new el(t=>t.toString(),(t,e)=>t.isEqual(e))}const bU=new Ke(Z.comparator),kU=new qt(Z.comparator);function ge(...t){let e=kU;for(const n of t)e=e.add(n);return e}const TU=new qt(Se);function IU(){return TU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function MA(t){return{integerValue:""+t}}function CU(t,e){return sU(e)?MA(e):jA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this._=void 0}}function AU(t,e,n){return t instanceof Xh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Xx(s)&&(s=Qx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Lc?FA(t,e):t instanceof Fc?$A(t,e):function(i,s){const o=LA(i,s),a=bS(o)+bS(i.Ee);return xy(o)&&xy(i.Ee)?MA(a):jA(i.serializer,a)}(t,e)}function RU(t,e,n){return t instanceof Lc?FA(t,e):t instanceof Fc?$A(t,e):n}function LA(t,e){return t instanceof Qh?function(r){return xy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xh extends gm{}class Lc extends gm{constructor(e){super(),this.elements=e}}function FA(t,e){const n=BA(e);for(const r of t.elements)n.some(i=>Fr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fc extends gm{constructor(e){super(),this.elements=e}}function $A(t,e){let n=BA(e);for(const r of t.elements)n=n.filter(i=>!Fr(i,r));return{arrayValue:{values:n}}}class Qh extends gm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function bS(t){return ut(t.integerValue||t.doubleValue)}function BA(t){return Yx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function PU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Lc&&i instanceof Lc||r instanceof Fc&&i instanceof Fc?Pa(r.elements,i.elements,Fr):r instanceof Qh&&i instanceof Qh?Fr(r.Ee,i.Ee):r instanceof Xh&&i instanceof Xh}(t.transform,e.transform)}class NU{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ym{}function zA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nw(t.key,Or.none()):new vu(t.key,t.data,Or.none());{const n=t.data,r=Gn.empty();let i=new qt(Ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Eo(t.key,r,new ur(i.toArray()),Or.none())}}function DU(t,e,n){t instanceof vu?function(i,s,o){const a=i.value.clone(),l=TS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Eo?function(i,s,o){if(!$d(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=TS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(VA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Kl(t,e,n,r){return t instanceof vu?function(s,o,a,l){if(!$d(s.precondition,o))return a;const c=s.value.clone(),d=IS(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Eo?function(s,o,a,l){if(!$d(s.precondition,o))return a;const c=IS(s.fieldTransforms,l,o),d=o.data;return d.setAll(VA(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return $d(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function OU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=LA(r.transform,i||null);s!=null&&(n===null&&(n=Gn.empty()),n.set(r.field,s))}return n||null}function kS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pa(r,i,(s,o)=>PU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vu extends ym{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Eo extends ym{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function TS(t,e,n){const r=new Map;Be(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,RU(o,a,n[i]))}return r}function IS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,AU(s,o,e))}return r}class nw extends ym{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jU extends ym{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&DU(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=zA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Pa(this.mutations,e.mutations,(n,r)=>kS(n,r))&&Pa(this.baseMutations,e.baseMutations,(n,r)=>kS(n,r))}}class rw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Be(e.mutations.length===r.length);let i=function(){return bU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,xe;function $U(t){switch(t){default:return se();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function UA(t){if(t===void 0)return hi("GRPC error has no .code"),N.UNKNOWN;switch(t){case ct.OK:return N.OK;case ct.CANCELLED:return N.CANCELLED;case ct.UNKNOWN:return N.UNKNOWN;case ct.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ct.INTERNAL:return N.INTERNAL;case ct.UNAVAILABLE:return N.UNAVAILABLE;case ct.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ct.NOT_FOUND:return N.NOT_FOUND;case ct.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ct.ABORTED:return N.ABORTED;case ct.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ct.DATA_LOSS:return N.DATA_LOSS;default:return se()}}(xe=ct||(ct={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=new ca([4294967295,4294967295],0);function CS(t){const e=BU().encode(t),n=new WV;return n.update(e),new Uint8Array(n.digest())}function AS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ca([n,r],0),new ca([i,s],0)]}class iw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ca.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(ca.fromNumber(r)));return i.compare(zU)===1&&(i=new ca([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=CS(e),[r,i]=AS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new iw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=CS(e),[r,i]=AS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vm(le.min(),i,new Ke(Se),mi(),ge())}}class xu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xu(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class WA{constructor(e,n){this.targetId=e,this.ye=n}}class HA{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class RS{constructor(){this.we=0,this.Se=NS(),this.be=Xt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ge(),n=ge(),r=ge();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se()}}),new xu(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=NS()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class VU{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=mi(),this.Ue=PS(),this.We=new Ke(Se)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(_y(s))if(r===0){const o=new Z(s.path);this.je(n,o,Vt.newNoDocument(o,le.min()))}else Be(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=io(r).toUint8Array()}catch(l){if(l instanceof wA)return Ra("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new iw(o,i,s)}catch(l){return Ra(l instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&_y(a.target)){const l=new Z(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Vt.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=ge();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new vm(e,n,this.We,this.$e,r);return this.$e=mi(),this.Ue=PS(),this.We=new Ke(Se),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new RS,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new qt(Se),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new RS),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function PS(){return new Ke(Z.comparator)}function NS(){return new Ke(Z.comparator)}const UU=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),WU=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),HU=(()=>({and:"AND",or:"OR"}))();class qU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ky(t,e){return t.useProto3Json||fm(e)?e:{value:e}}function Yh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GU(t,e){return Yh(t,e.toTimestamp())}function jr(t){return Be(!!t),le.fromTimestamp(function(n){const r=as(n);return new xt(r.seconds,r.nanos)}(t))}function sw(t,e){return function(r){return new Fe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function GA(t){const e=Fe.fromString(t);return Be(YA(e)),e}function Ty(t,e){return sw(t.databaseId,e.path)}function cg(t,e){const n=GA(e);if(n.get(1)!==t.databaseId.projectId)throw new W(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(KA(n))}function Iy(t,e){return sw(t.databaseId,e)}function KU(t){const e=GA(t);return e.length===4?Fe.emptyPath():KA(e)}function Cy(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KA(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function DS(t,e,n){return{name:Ty(t,e),fields:n.value.mapValue.fields}}function XU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Be(d===void 0||typeof d=="string"),Xt.fromBase64String(d||"")):(Be(d===void 0||d instanceof Uint8Array),Xt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?N.UNKNOWN:UA(c.code);return new W(d,c.message||"")}(o);n=new HA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=cg(t,r.document.name),s=jr(r.document.updateTime),o=r.document.createTime?jr(r.document.createTime):le.min(),a=new Gn({mapValue:{fields:r.document.fields}}),l=Vt.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Bd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=cg(t,r.document),s=r.readTime?jr(r.readTime):le.min(),o=Vt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Bd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=cg(t,r.document),s=r.removedTargetIds||[];n=new Bd([],s,i,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new FU(i,s),a=r.targetId;n=new WA(a,o)}}return n}function QU(t,e){let n;if(e instanceof vu)n={update:DS(t,e.key,e.value)};else if(e instanceof nw)n={delete:Ty(t,e.key)};else if(e instanceof Eo)n={update:DS(t,e.key,e.data),updateMask:s8(e.fieldMask)};else{if(!(e instanceof jU))return se();n={verify:Ty(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:GU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function YU(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?jr(i.updateTime):jr(s);return o.isEqual(le.min())&&(o=jr(s)),new NU(o,i.transformResults||[])}(n,e))):[]}function JU(t,e){return{documents:[Iy(t,e.path)]}}function ZU(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Iy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Iy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return QA(pr.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Mo(h.field),direction:n8(h.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ky(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function e8(t){let e=KU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Be(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=XA(h);return m instanceof pr&&bA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(y){return new Hl(Lo(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,fm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new Kh(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,p=h.values||[];return new Kh(p,m)}(n.endAt)),xU(e,i,o,s,a,"F",l,c)}function t8(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Lo(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Lo(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lo(n.unaryFilter.field);return ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lo(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Lo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pr.create(n.compositeFilter.filters.map(r=>XA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function n8(t){return UU[t]}function r8(t){return WU[t]}function i8(t){return HU[t]}function Mo(t){return{fieldPath:t.canonicalString()}}function Lo(t){return Ut.fromServerFormat(t.fieldPath)}function QA(t){return t instanceof ht?function(n){if(n.op==="=="){if(xS(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NAN"}};if(vS(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xS(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NAN"}};if(vS(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(n.field),op:r8(n.op),value:n.value}}}(t):t instanceof pr?function(n){const r=n.getFilters().map(i=>QA(i));return r.length===1?r[0]:{compositeFilter:{op:i8(n.op),filters:r}}}(t):se()}function s8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r,i,s=le.min(),o=le.min(),a=Xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e){this.ht=e}}function a8(t){const e=e8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(){this._n=new c8}addToCollectionParentIndex(e,n){return this._n.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(os.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class c8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Oa(0)}static Bn(){return new Oa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this.changes=new el(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Kl(r.mutation,i,ur.empty(),xt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=$s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Al();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=mi();const o=Gl(),a=function(){return Gl()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Eo)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Kl(d.mutation,c,d.mutation.getFieldMask(),xt.now())):o.set(c.key,ur.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new d8(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Gl();let i=new Ke((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||ur.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||ge()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=OA();d.forEach(m=>{if(!s.has(m)){const p=zA(n.get(m),r.get(m));p!==null&&h.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return Z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve($s());let a=-1,l=s;return o.next(c=>F.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ge())).next(d=>({batchId:a,changes:DA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=Al();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Al();return this.indexManager.getCollectionParents(e,i).next(o=>F.forEach(o,a=>{const l=function(d,h){return new yu(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,Vt.newInvalidDocument(c)))});let o=Al();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&Kl(c.mutation,l,ur.empty(),xt.now()),pm(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return F.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jr(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:a8(i.bundledQuery),readTime:jr(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(){this.overlays=new Ke(Z.comparator),this.hr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$s();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=$s(),s=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=$s(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=$s(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return F.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LU(n,r));let s=this.hr.get(n);s===void 0&&(s=ge(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Pr=new qt(_t.Ir),this.Tr=new qt(_t.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new _t(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Z(new Fe([])),r=new _t(n,e),i=new _t(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Z(new Fe([])),r=new _t(n,e),i=new _t(n,e+1);let s=ge();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new _t(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Z.comparator(e.key,n.key)||Se(e.pr,n.pr)}static Er(e,n){return Se(e.pr,n.pr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new qt(_t.Ir)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new _t(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),i=new _t(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(Se);return n.forEach(i=>{const s=new _t(i,0),o=new _t(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),F.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const o=new _t(new Z(s),0);let a=new qt(Se);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),F.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Be(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return F.forEach(n.mutations,i=>{const s=new _t(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new _t(n,0),i=this.wr.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.Cr=e,this.docs=function(){return new Ke(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=mi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=mi();const o=n.path,a=new Z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||nU(tU(d),r)<=0||(i.has(d.key)||pm(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){se()}Fr(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new y8(this)}getSize(e){return F.resolve(this.size)}}class y8 extends u8{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.persistence=e,this.Mr=new el(n=>Jx(n),Zx),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ow,this.targetCount=0,this.Br=Oa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),F.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Oa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.qn(n),F.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Kx(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new v8(this),this.indexManager=new l8,this.remoteDocumentCache=function(i){return new g8(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new o8(n),this.$r=new f8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new m8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new p8(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new w8(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return F.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class w8 extends iU{constructor(e){super(),this.currentSequenceNumber=e}}class aw{constructor(e){this.persistence=e,this.zr=new ow,this.jr=null}static Hr(e){return new aw(e)}get Jr(){if(this.jr)return this.jr;throw se()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),F.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,r=>{const i=Z.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return F.or([()=>F.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new lw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Wi(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.zi(e,n))}Wi(e,n){if(SS(n))return F.resolve(null);let r=fi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sy(n,null,"F"),r=fi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Sy(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,i){return SS(n)||i.isEqual(le.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.Hi(n,o,r,i)?this.zi(e,n):(fS()<=Ee.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),by(n)),this.Ji(e,o,n,eU(i,-1)))})}ji(e,n){let r=new qt(PA(e));return n.forEach((i,s)=>{pm(e,s)&&(r=r.add(s))}),r}Hi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}zi(e,n){return fS()<=Ee.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",by(n)),this.Ui.getDocumentsMatchingQuery(e,n,os.min())}Ji(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,n,r,i){this.persistence=e,this.Yi=n,this.serializer=i,this.Zi=new Ke(Se),this.Xi=new el(s=>Jx(s),Zx),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h8(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function S8(t,e,n,r){return new E8(t,e,n,r)}async function JA(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ge();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function b8(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let p=F.resolve();return m.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(x=>{const _=c.docVersions.get(y);Be(_!==null),x.version.compareTo(_)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ZA(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function k8(t,e){const n=de(t),r=e.snapshotVersion;let i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,h)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Xt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(h,p),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,p,d)&&a.push(n.Qr.updateTargetData(s,p))});let l=mi(),c=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(T8(s,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(le.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Zi=i,s))}function T8(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=mi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Y("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:i}})}function I8(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function C8(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Bi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Zi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Ay(t,e,n){const r=de(t),i=r.Zi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!gu(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(i.target)}function OS(t,e,n){const r=de(t);let i=le.min(),s=ge();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=de(l),m=h.Xi.get(d);return m!==void 0?F.resolve(h.Zi.get(m)):h.Qr.getTargetData(c,d)}(r,o,fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ge())).next(a=>(A8(r,_U(e),a),{documents:a,_s:s})))}function A8(t,e,n){let r=t.es.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.es.set(e,r)}class jS{constructor(){this.activeTargetIds=IU()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R8{constructor(){this.Ys=new jS,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new jS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud=null;function ug(){return ud===null?ud=function(){return 268435456+Math.round(2147483648*Math.random())}():ud++,"0x"+ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class O8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${i}/databases/${s}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get mo(){return!1}fo(n,r,i,s,o){const a=ug(),l=this.po(n,r);Y("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,s,o),this.wo(n,l,c,i).then(d=>(Y("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Ra("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}So(n,r,i,s,o,a){return this.fo(n,r,i,s,o)}yo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}po(n,r){const i=N8[n];return`${this.Ao}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,i){const s=ug();return new Promise((o,a)=>{const l=new UV;l.setWithCredentials(!0),l.listenOnce(zV.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lg.NO_ERROR:const d=l.getResponseJson();Y(Ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case lg.TIMEOUT:Y(Ft,`RPC '${e}' ${s} timed out`),a(new W(N.DEADLINE_EXCEEDED,"Request time out"));break;case lg.HTTP_ERROR:const h=l.getStatus();if(Y(Ft,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(v)>=0?v:N.UNKNOWN}(p.status);a(new W(y,p.message))}else a(new W(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(N.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{Y(Ft,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Y(Ft,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}bo(e,n,r){const i=ug(),s=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$V(),a=BV(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Y(Ft,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,p=!1;const y=new D8({_o:_=>{p?Y(Ft,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(m||(Y(Ft,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),Y(Ft,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},ao:()=>h.close()}),x=(_,v,g)=>{_.listen(v,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return x(h,ad.EventType.OPEN,()=>{p||Y(Ft,`RPC '${e}' stream ${i} transport opened.`)}),x(h,ad.EventType.CLOSE,()=>{p||(p=!0,Y(Ft,`RPC '${e}' stream ${i} transport closed`),y.To())}),x(h,ad.EventType.ERROR,_=>{p||(p=!0,Ra(Ft,`RPC '${e}' stream ${i} transport errored:`,_),y.To(new W(N.UNAVAILABLE,"The operation could not be completed")))}),x(h,ad.EventType.MESSAGE,_=>{var v;if(!p){const g=_.data[0];Be(!!g);const w=g,E=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(E){Y(Ft,`RPC '${e}' stream ${i} received error:`,E);const S=E.status;let T=function(R){const O=ct[R];if(O!==void 0)return UA(O)}(S),b=E.message;T===void 0&&(T=N.INTERNAL,b="Unknown error status: "+S+" with message "+E.message),p=!0,y.To(new W(T,b)),h.close()}else Y(Ft,`RPC '${e}' stream ${i} received:`,g),y.Eo(g)}}),x(a,VV.STAT_EVENT,_=>{_.stat===dS.PROXY?Y(Ft,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===dS.NOPROXY&&Y(Ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function dg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){return new qU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=i,this.Co=s,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.ko=r,this.qo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new eR(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(hi(n.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Qo===n&&this.n_(r,i)},r=>{e(()=>{const i=new W(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(i)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(i=>{r(()=>this.r_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j8 extends tR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=XU(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?jr(o.readTime):le.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Cy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=_y(l)?{documents:JU(s,l)}:{query:ZU(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qA(s,o.resumeToken);const c=ky(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Yh(s,o.snapshotVersion.toTimestamp());const c=ky(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=t8(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Cy(this.serializer),n.removeTarget=e,this.Yo(n)}}class M8 extends tR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=YU(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.l_(r,n)}return Be(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Cy(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>QU(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.I_=!1}T_(){if(this.I_)throw new W(N.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.fo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(N.UNKNOWN,i.toString())})}So(e,n,r,i){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(N.UNKNOWN,s.toString())})}terminate(){this.I_=!0}}class F8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(hi(n),this.R_=!1):Y("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=s,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{So(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=de(l);c.S_.add(4),await wu(c),c.v_.set("Unknown"),c.S_.delete(4),await wm(c)}(this))})}),this.v_=new F8(r,i)}}async function wm(t){if(So(t))for(const e of t.b_)await e(!0)}async function wu(t){for(const e of t.b_)await e(!1)}function nR(t,e){const n=de(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),dw(n)?uw(n):tl(n).Go()&&cw(n,e))}function rR(t,e){const n=de(t),r=tl(n);n.w_.delete(e),r.Go()&&iR(n,e),n.w_.size===0&&(r.Go()?r.Ho():So(n)&&n.v_.set("Unknown"))}function cw(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tl(t).o_(e)}function iR(t,e){t.C_.Le(e),tl(t).__(e)}function uw(t){t.C_=new VU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),tl(t).start(),t.v_.V_()}function dw(t){return So(t)&&!tl(t).Wo()&&t.w_.size>0}function So(t){return de(t).S_.size===0}function sR(t){t.C_=void 0}async function B8(t){t.w_.forEach((e,n)=>{cw(t,e)})}async function z8(t,e){sR(t),dw(t)?(t.v_.g_(e),uw(t)):t.v_.set("Unknown")}async function V8(t,e,n){if(t.v_.set("Online"),e instanceof HA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.w_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.w_.delete(a),i.C_.removeTarget(a))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jh(t,r)}else if(e instanceof Bd?t.C_.Ge(e):e instanceof WA?t.C_.Xe(e):t.C_.He(e),!n.isEqual(le.min()))try{const r=await ZA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.w_.get(c);d&&s.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.w_.get(l);if(!d)return;s.w_.set(l,d.withResumeToken(Xt.EMPTY_BYTE_STRING,d.snapshotVersion)),iR(s,l);const h=new Bi(d.target,l,c,d.sequenceNumber);cw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await Jh(t,r)}}async function Jh(t,e,n){if(!gu(e))throw e;t.S_.add(1),await wu(t),t.v_.set("Offline"),n||(n=()=>ZA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await wm(t)})}function oR(t,e){return e().catch(n=>Jh(t,n,e))}async function _m(t){const e=de(t),n=ls(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;U8(e);)try{const i=await I8(e.localStore,r);if(i===null){e.y_.length===0&&n.Ho();break}r=i.batchId,W8(e,i)}catch(i){await Jh(e,i)}aR(e)&&lR(e)}function U8(t){return So(t)&&t.y_.length<10}function W8(t,e){t.y_.push(e);const n=ls(t);n.Go()&&n.u_&&n.c_(e.mutations)}function aR(t){return So(t)&&!ls(t).Wo()&&t.y_.length>0}function lR(t){ls(t).start()}async function H8(t){ls(t).P_()}async function q8(t){const e=ls(t);for(const n of t.y_)e.c_(n.mutations)}async function G8(t,e,n){const r=t.y_.shift(),i=rw.from(r,e,n);await oR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _m(t)}async function K8(t,e){e&&ls(t).u_&&await async function(r,i){if(function(o){return $U(o)&&o!==N.ABORTED}(i.code)){const s=r.y_.shift();ls(r).jo(),await oR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await _m(r)}}(t,e),aR(t)&&lR(t)}async function LS(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=So(n);n.S_.add(3),await wu(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await wm(n)}async function X8(t,e){const n=de(t);e?(n.S_.delete(2),await wm(n)):e||(n.S_.add(2),await wu(n),n.v_.set("Unknown"))}function tl(t){return t.F_||(t.F_=function(n,r,i){const s=de(n);return s.T_(),new j8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:B8.bind(null,t),lo:z8.bind(null,t),s_:V8.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),dw(t)?uw(t):t.v_.set("Unknown")):(await t.F_.stop(),sR(t))})),t.F_}function ls(t){return t.M_||(t.M_=function(n,r,i){const s=de(n);return s.T_(),new M8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:H8.bind(null,t),lo:K8.bind(null,t),h_:q8.bind(null,t),l_:G8.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await _m(t)):(await t.M_.stop(),t.y_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new hw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fw(t,e){if(hi("AsyncQueue",`${e}: ${t}`),gu(t))return new W(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Al(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new ua(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.x_=new Ke(Z.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):se():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ja{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ja(e,n,ua.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(){this.N_=void 0,this.listeners=[]}}class Y8{constructor(){this.queries=new el(e=>RA(e),mm),this.onlineState="Unknown",this.B_=new Set}}async function cR(t,e){const n=de(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Q8),i)try{s.N_=await n.onListen(r)}catch(o){const a=fw(o,`Initialization of query '${by(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.L_(n.onlineState),s.N_&&e.k_(s.N_)&&mw(n)}async function uR(t,e){const n=de(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function J8(t,e){const n=de(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.k_(i)&&(r=!0);o.N_=i}}r&&mw(n)}function Z8(t,e,n){const r=de(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function mw(t){t.B_.forEach(e=>{e.next()})}class dR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.key=e}}class fR{constructor(e){this.key=e}}class e7{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ge(),this.mutatedKeys=ge(),this.ia=PA(e),this.sa=new ua(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new FS,i=n?n.sa:this.sa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),p=pm(this.query,h)?h:null,y=!!m&&this.mutatedKeys.has(m.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?y!==x&&(r.track({type:3,doc:p}),_=!0):this.ua(m,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.ia(p,l)>0||c&&this.ia(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(p?(o=o.add(p),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:s}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const s=e.aa.O_();s.sort((c,d)=>function(m,p){const y=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return y(m)-y(p)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,s.length!==0||l?{snapshot:new ja(this.query,e.sa,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new FS,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ge(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new fR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new hR(r))}),n}Ia(e){this.ta=e._s,this.ra=ge();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return ja.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class t7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class n7{constructor(e){this.key=e,this.Ea=!1}}class r7{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new el(a=>RA(a),mm),this.Ra=new Map,this.Va=new Set,this.ma=new Ke(Z.comparator),this.fa=new Map,this.ga=new ow,this.pa={},this.ya=new Map,this.wa=Oa.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function i7(t,e){const n=m7(t);let r,i;const s=n.Aa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ta();else{const o=await C8(n.localStore,fi(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await s7(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&nR(n.remoteStore,o)}return i}async function s7(t,e,n,r,i){t.ba=(h,m,p)=>async function(x,_,v,g){let w=_.view._a(v);w.Hi&&(w=await OS(x.localStore,_.query,!1).then(({documents:T})=>_.view._a(T,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,x.isPrimaryClient,E);return BS(x,_.targetId,S.ha),S.snapshot}(t,h,m,p);const s=await OS(t.localStore,e,!0),o=new e7(e,s._s),a=o._a(s.documents),l=xu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);BS(t,n,c.ha);const d=new t7(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function o7(t,e){const n=de(t),r=n.Aa.get(e),i=n.Ra.get(r.targetId);if(i.length>1)return n.Ra.set(r.targetId,i.filter(s=>!mm(s,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ay(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),rR(n.remoteStore,r.targetId),Ry(n,r.targetId)}).catch(pu)):(Ry(n,r.targetId),await Ay(n.localStore,r.targetId,!0))}async function a7(t,e,n){const r=p7(t);try{const i=await function(o,a){const l=de(o),c=xt.now(),d=a.reduce((p,y)=>p.add(y.key),ge());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=mi(),x=ge();return l.ts.getEntries(p,d).next(_=>{y=_,y.forEach((v,g)=>{g.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(_=>{h=_;const v=[];for(const g of a){const w=OU(g,h.get(g.key).overlayedDocument);w!=null&&v.push(new Eo(g.key,w,_A(w.value.mapValue),Or.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,v,a)}).next(_=>{m=_;const v=_.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(p,_.batchId,v)})}).then(()=>({batchId:m.batchId,changes:DA(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Ke(Se)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,i.batchId,n),await _u(r,i.changes),await _m(r.remoteStore)}catch(i){const s=fw(i,"Failed to persist write");n.reject(s)}}async function mR(t,e){const n=de(t);try{const r=await k8(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.fa.get(s);o&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ea=!0:i.modifiedDocuments.size>0?Be(o.Ea):i.removedDocuments.size>0&&(Be(o.Ea),o.Ea=!1))}),await _u(n,r,e)}catch(r){await pu(r)}}function $S(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Aa.forEach((s,o)=>{const a=o.view.L_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.listeners)m.L_(a)&&(c=!0)}),c&&mw(l)}(r.eventManager,e),i.length&&r.da.s_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function l7(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.fa.get(e),s=i&&i.key;if(s){let o=new Ke(Z.comparator);o=o.insert(s,Vt.newNoDocument(s,le.min()));const a=ge().add(s),l=new vm(le.min(),new Map,new Ke(Se),o,a);await mR(r,l),r.ma=r.ma.remove(s),r.fa.delete(e),pw(r)}else await Ay(r.localStore,e,!1).then(()=>Ry(r,e,n)).catch(pu)}async function c7(t,e){const n=de(t),r=e.batch.batchId;try{const i=await b8(n.localStore,e);gR(n,r,null),pR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _u(n,i)}catch(i){await pu(i)}}async function u7(t,e,n){const r=de(t);try{const i=await function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Be(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);gR(r,e,n),pR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _u(r,i)}catch(i){await pu(i)}}function pR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function gR(t,e,n){const r=de(t);let i=r.pa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.pa[r.currentUser.toKey()]=i}}function Ry(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||yR(t,r)})}function yR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(rR(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),pw(t))}function BS(t,e,n){for(const r of n)r instanceof hR?(t.ga.addReference(r.key,e),d7(t,r)):r instanceof fR?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||yR(t,r.key)):se()}function d7(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.Va.add(r),pw(t))}function pw(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new Z(Fe.fromString(e)),r=t.wa.next();t.fa.set(r,new n7(n)),t.ma=t.ma.insert(n,r),nR(t.remoteStore,new Bi(fi(ew(n.path)),r,"TargetPurposeLimboResolution",Kx.ae))}}async function _u(t,e,n){const r=de(t),i=[],s=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const d=lw.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.da.s_(i),await async function(l,c){const d=de(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,m=>F.forEach(m.qi,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>F.forEach(m.Qi,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!gu(h))throw h;Y("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const p=d.Zi.get(m),y=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(m,x)}}}(r.localStore,s))}async function h7(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await JA(n.localStore,e);n.currentUser=e,function(s,o){s.ya.forEach(a=>{a.forEach(l=>{l.reject(new W(N.CANCELLED,o))})}),s.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _u(n,r.rs)}}function f7(t,e){const n=de(t),r=n.fa.get(e);if(r&&r.Ea)return ge().add(r.key);{let i=ge();const s=n.Ra.get(e);if(!s)return i;for(const o of s){const a=n.Aa.get(o);i=i.unionWith(a.view.oa)}return i}}function m7(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l7.bind(null,e),e.da.s_=J8.bind(null,e.eventManager),e.da.Da=Z8.bind(null,e.eventManager),e}function p7(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u7.bind(null,e),e}class zS{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return S8(this.persistence,new _8,e.initialUser,this.serializer)}createPersistence(e){return new x8(aw.Hr,this.serializer)}createSharedClientState(e){return new R8}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class g7{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$S(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=h7.bind(null,this.syncEngine),await X8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Y8}()}createDatastore(e){const n=xm(e.databaseInfo.databaseId),r=function(s){return new O8(s)}(e.databaseInfo);return function(s,o,a,l){return new L8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new $8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$S(this.syncEngine,n,0),function(){return MS.v()?new MS:new P8}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new r7(i,s,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=de(n);Y("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await wu(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=vA.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Y("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Y("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hg(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await JA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function VS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await x7(t);Y("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>LS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>LS(e.remoteStore,s)),t._onlineComponents=e}function v7(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function x7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await hg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!v7(n))throw n;Ra("Error using user provided cache. Falling back to memory cache: "+n),await hg(t,new zS)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await hg(t,new zS);return t._offlineComponents}async function xR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await VS(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await VS(t,new g7))),t._onlineComponents}function w7(t){return xR(t).then(e=>e.syncEngine)}async function wR(t){const e=await xR(t),n=e.eventManager;return n.onListen=i7.bind(null,e.syncEngine),n.onUnlisten=o7.bind(null,e.syncEngine),n}function _7(t,e,n={}){const r=new si;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new vR({next:m=>{o.enqueueAndForget(()=>uR(s,h));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new W(N.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new W(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new dR(ew(a.path),d,{includeMetadataChanges:!0,z_:!0});return cR(s,h)}(await wR(t),t.asyncQueue,e,n,r)),r.promise}function E7(t,e,n={}){const r=new si;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new vR({next:m=>{o.enqueueAndForget(()=>uR(s,h)),m.fromCache&&l.source==="server"?c.reject(new W(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new dR(a,d,{includeMetadataChanges:!0,z_:!0});return cR(s,h)}(await wR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e,n){if(!n)throw new W(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S7(t,e,n,r){if(e===!0&&r===!0)throw new W(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WS(t){if(!Z.isDocumentKey(t))throw new W(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HS(t){if(Z.isDocumentKey(t))throw new W(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Em(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function cs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Em(t);throw new W(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_R((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new W(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new W(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HV;switch(r.type){case"firstParty":return new XV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=US.get(n);r&&(Y("ComponentProvider","Removing Datastore"),US.delete(n),r.terminate())}(this),Promise.resolve()}}function b7(t,e,n,r={}){var i;const s=(t=cs(t,Sm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Bt.MOCK_USER;else{a=P2(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new W(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Bt(c)}t._authCredentials=new qV(new yA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class Zi extends nl{constructor(e,n,r){super(e,n,ew(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Z(e))}withConverter(e){return new Zi(this.firestore,e,this._path)}}function bm(t,e,...n){if(t=wt(t),ER("collection","path",e),t instanceof Sm){const r=Fe.fromString(e,...n);return HS(r),new Zi(t,null,r)}{if(!(t instanceof gn||t instanceof Zi))throw new W(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return HS(r),new Zi(t.firestore,null,r)}}function gw(t,e,...n){if(t=wt(t),arguments.length===1&&(e=vA.V()),ER("doc","path",e),t instanceof Sm){const r=Fe.fromString(e,...n);return WS(r),new gn(t,null,new Z(r))}{if(!(t instanceof gn||t instanceof Zi))throw new W(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return WS(r),new gn(t.firestore,t instanceof Zi?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new eR(this,"async_queue_retry"),this.tu=()=>{const n=dg();n&&Y("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=dg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=dg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new si;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!gu(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw hi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const i=hw.createAndSchedule(this,e,n,r,s=>this.su(s));return this.Ja.push(i),i}nu(){this.Ya&&se()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class Eu extends Sm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new k7}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||SR(this),this._firestoreClient.terminate()}}function T7(t,e){const n=typeof t=="object"?t:gx(),r=typeof t=="string"?t:e||"(default)",i=qf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=C2("firestore");s&&b7(i,...s)}return i}function yw(t){return t._firestoreClient||SR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function SR(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new aU(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_R(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new y7(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ma(Xt.fromBase64String(e))}catch(n){throw new W(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ma(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=/^__.*__$/;class C7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,n,this.fieldTransforms):new vu(e,this.data,n,this.fieldTransforms)}}function kR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class ww{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.cu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new ww(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.Tu(e),i}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.cu(),i}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Zh(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(kR(this.lu)&&I7.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class A7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xm(e)}mu(e,n,r,i=!1){return new ww({lu:e,methodName:n,Vu:r,path:Ut.emptyPath(),Iu:!1,Ru:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TR(t){const e=t._freezeSettings(),n=xm(t._databaseId);return new A7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function R7(t,e,n,r,i,s={}){const o=t.mu(s.merge||s.mergeFields?2:0,e,n,i);AR("Data must be an object, but it was:",o,r);const a=IR(r,o);let l,c;if(s.merge)l=new ur(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=N7(e,h,n);if(!o.contains(m))throw new W(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);O7(d,m)||d.push(m)}l=new ur(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new C7(new Gn(a),l,c)}function P7(t,e,n,r=!1){return _w(n,t.mu(r?4:3,e))}function _w(t,e){if(CR(t=wt(t)))return AR("Unsupported field value:",e,t),IR(t,e);if(t instanceof bR)return function(r,i){if(!kR(i.lu))throw i.Au(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Au(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=_w(a,i.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=xt.fromDate(r);return{timestampValue:Yh(i.serializer,s)}}if(r instanceof xt){const s=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yh(i.serializer,s)}}if(r instanceof xw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ma)return{bytesValue:qA(i.serializer,r._byteString)};if(r instanceof gn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Au(`Unsupported field value: ${Em(r)}`)}(t,e)}function IR(t,e){const n={};return xA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Za(t,(r,i)=>{const s=_w(i,e.Pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function CR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof xw||t instanceof Ma||t instanceof gn||t instanceof bR)}function AR(t,e,n){if(!CR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Em(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function N7(t,e,n){if((e=wt(e))instanceof vw)return e._internalPath;if(typeof e=="string")return RR(t,e);throw Zh("Field path arguments must be of type string or ",t,!1,void 0,n)}const D7=new RegExp("[~\\*/\\[\\]]");function RR(t,e,n){if(e.search(D7)>=0)throw Zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vw(...e.split("."))._internalPath}catch{throw Zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new W(N.INVALID_ARGUMENT,a+t+l)}function O7(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ew("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class j7 extends PR{data(){return super.data()}}function Ew(t,e){return typeof e=="string"?RR(t,e):e instanceof vw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sw{}class L7 extends Sw{}function rl(t,e,...n){let r=[];e instanceof Sw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof bw).length,a=s.filter(l=>l instanceof km).length;if(o>1||o>0&&a>0)throw new W(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class km extends L7{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new km(e,n,r)}_apply(e){const n=this._parse(e);return NR(e._query,n),new nl(e.firestore,e.converter,Ey(e._query,n))}_parse(e){const n=TR(e.firestore);return function(s,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new W(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){KS(h,d);const p=[];for(const y of h)p.push(GS(l,s,y));m={arrayValue:{values:p}}}else m=GS(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||KS(h,d),m=P7(a,o,h,d==="in"||d==="not-in");return ht.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function il(t,e,n){const r=e,i=Ew("where",t);return km._create(i,r,n)}class bw extends Sw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)NR(o,l),o=Ey(o,l)}(e._query,n),new nl(e.firestore,e.converter,Ey(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function GS(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new W(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AA(e)&&n.indexOf("/")!==-1)throw new W(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!Z.isDocumentKey(r))throw new W(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yS(t,new Z(r))}if(n instanceof gn)return yS(t,n._key);throw new W(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Em(n)}.`)}function KS(t,e){if(!Array.isArray(t)||t.length===0)throw new W(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NR(t,e){if(e.isInequality()){const r=tw(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new W(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=CA(t);s!==null&&F7(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function F7(t,e,n){if(!n.isEqual(e))throw new W(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class $7{convertValue(e,n="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Za(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new xw(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const n=as(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Be(YA(r));const i=new jc(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(n)||hi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DR extends PR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ew("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zd extends DR{data(e={}){return super.data(e)}}class z7{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zd(this._firestore,this._userDataWriter,r.key,r,new Pl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new zd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new zd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:V7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function V7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(t){t=cs(t,gn);const e=cs(t.firestore,Eu);return _7(yw(e),t._key).then(n=>q7(e,t,n))}class OR extends $7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ma(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function sl(t){t=cs(t,nl);const e=cs(t.firestore,Eu),n=yw(e),r=new OR(e);return M7(t._query),E7(n,t._query).then(i=>new z7(e,r,t,i))}function W7(t,e,n){t=cs(t,gn);const r=cs(t.firestore,Eu),i=B7(t.converter,e,n);return jR(r,[R7(TR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Or.none())])}function H7(t){return jR(cs(t.firestore,Eu),[new nw(t._key,Or.none())])}function jR(t,e){return function(r,i){const s=new si;return r.asyncQueue.enqueueAndForget(async()=>a7(await w7(r),i,s)),s.promise}(yw(t),e)}function q7(t,e,n){const r=n.docs.get(e._key),i=new OR(t);return new DR(t,i,e._key,r,new Pl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ja=i})(wo),to(new ss("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Eu(new GV(r.getProvider("auth-internal")),new YV(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pr(hS,"4.1.2",e),Pr(hS,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firebasestorage.googleapis.com",LR="storageBucket",G7=2*60*1e3,K7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et extends Vr{constructor(e,n,r=0){super(fg(e),`Firebase Storage: ${n} (${fg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ze;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ze||(Ze={}));function fg(t){return"storage/"+t}function kw(){const t="An unknown error occurred, please check the error payload for server response.";return new et(Ze.UNKNOWN,t)}function X7(t){return new et(Ze.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Q7(t){return new et(Ze.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Y7(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new et(Ze.UNAUTHENTICATED,t)}function J7(){return new et(Ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Z7(t){return new et(Ze.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function eW(){return new et(Ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tW(){return new et(Ze.CANCELED,"User canceled the upload/download.")}function nW(t){return new et(Ze.INVALID_URL,"Invalid URL '"+t+"'.")}function rW(t){return new et(Ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function iW(){return new et(Ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LR+"' property when initializing the app?")}function sW(){return new et(Ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oW(){return new et(Ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function aW(t){return new et(Ze.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Py(t){return new et(Ze.INVALID_ARGUMENT,t)}function FR(){return new et(Ze.APP_DELETED,"The Firebase app was deleted.")}function lW(t){return new et(Ze.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xl(t,e){return new et(Ze.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wl(t){throw new et(Ze.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=In.makeFromUrl(e,n)}catch{return new In(e,"")}if(r.path==="")return r;throw rW(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),y={bucket:1,path:3},x=n===MR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",v=new RegExp(`^https?://${x}/${i}/${_}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:p,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],T=S.regex.exec(e);if(T){const b=T[S.indices.bucket];let k=T[S.indices.path];k||(k=""),r=new In(b,k),S.postModify(r);break}}if(r==null)throw nW(e);return r}}class cW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(p,l())},_)}function m(){s&&clearTimeout(s)}function p(_,...v){if(c){m();return}if(_){m(),d.call(null,_,...v);return}if(l()||o){m(),d.call(null,_,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function x(_){y||(y=!0,m(),!c&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function dW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(t){return t!==void 0}function fW(t){return typeof t=="object"&&!Array.isArray(t)}function Tw(t){return typeof t=="string"||t instanceof String}function XS(t){return Iw()&&t instanceof Blob}function Iw(){return typeof Blob<"u"&&!v$()}function QS(t,e,n,r){if(r<e)throw Py(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Py(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function $R(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ws;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ws||(Ws={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e,n,r,i,s,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new dd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ws.NO_ERROR,l=s.getStatus();if(!a||mW(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Ws.ABORT;r(!1,new dd(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new dd(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());hW(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=kw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?FR():tW();o(l)}else{const l=eW();o(l)}};this.canceled_?n(!1,new dd(!1,null,!0)):this.backoffId_=uW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function gW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function yW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function xW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function wW(t,e,n,r,i,s,o=!0){const a=$R(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return vW(c,e),gW(c,n),yW(c,s),xW(c,r),new pW(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EW(...t){const e=_W();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Iw())return new Blob(t);throw new et(Ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t){if(typeof atob>"u")throw aW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mg{constructor(e,n){this.data=e,this.contentType=n||null}}function kW(t,e){switch(t){case Cr.RAW:return new mg(BR(e));case Cr.BASE64:case Cr.BASE64URL:return new mg(zR(t,e));case Cr.DATA_URL:return new mg(IW(e),CW(e))}throw kw()}function BR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function TW(t){let e;try{e=decodeURIComponent(t)}catch{throw Xl(Cr.DATA_URL,"Malformed data URL.")}return BR(e)}function zR(t,e){switch(t){case Cr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Xl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Cr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Xl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=bW(e)}catch(i){throw i.message.includes("polyfill")?i:Xl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class VR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xl(Cr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=AW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function IW(t){const e=new VR(t);return e.base64?zR(Cr.BASE64,e.rest):TW(e.rest)}function CW(t){return new VR(t).contentType}function AW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){let r=0,i="";XS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(XS(this.data_)){const r=this.data_,i=SW(r,e,n);return i===null?null:new Oi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Oi(r,!0)}}static getBlob(...e){if(Iw()){const n=e.map(r=>r instanceof Oi?r.data_:r);return new Oi(EW.apply(null,n))}else{const n=e.map(o=>Tw(o)?kW(Cr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Oi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){let e;try{e=JSON.parse(t)}catch{return null}return fW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function PW(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function WR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NW(t,e){return e}class Yt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||NW}}let hd=null;function DW(t){return!Tw(t)||t.length<2?t:WR(t)}function HR(){if(hd)return hd;const t=[];t.push(new Yt("bucket")),t.push(new Yt("generation")),t.push(new Yt("metageneration")),t.push(new Yt("name","fullPath",!0));function e(s,o){return DW(o)}const n=new Yt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Yt("size");return i.xform=r,t.push(i),t.push(new Yt("timeCreated")),t.push(new Yt("updated")),t.push(new Yt("md5Hash",null,!0)),t.push(new Yt("cacheControl",null,!0)),t.push(new Yt("contentDisposition",null,!0)),t.push(new Yt("contentEncoding",null,!0)),t.push(new Yt("contentLanguage",null,!0)),t.push(new Yt("contentType",null,!0)),t.push(new Yt("metadata","customMetadata",!0)),hd=t,hd}function OW(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new In(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function jW(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return OW(r,t),r}function qR(t,e,n){const r=UR(e);return r===null?null:jW(t,r,n)}function MW(t,e,n,r){const i=UR(e);if(i===null||!Tw(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),p=Tm(m,n,r),y=$R({alt:"media",token:c});return p+y})[0]}function LW(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Cw{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){if(!t)throw kw()}function FW(t,e){function n(r,i){const s=qR(t,i,e);return GR(s!==null),s}return n}function $W(t,e){function n(r,i){const s=qR(t,i,e);return GR(s!==null),MW(s,i,t.host,t._protocol)}return n}function KR(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=J7():i=Y7():n.getStatus()===402?i=Q7(t.bucket):n.getStatus()===403?i=Z7(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function XR(t){const e=KR(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=X7(t.path)),s.serverResponse=i.serverResponse,s}return n}function BW(t,e,n){const r=e.fullServerUrl(),i=Tm(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Cw(i,s,$W(t,n),o);return a.errorHandler=XR(e),a}function zW(t,e){const n=e.fullServerUrl(),r=Tm(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Cw(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=XR(e),a}function VW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function UW(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=VW(null,e)),r}function WW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=UW(e,r,i),d=LW(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Oi.getBlob(h,r,m);if(p===null)throw sW();const y={name:c.fullPath},x=Tm(s,t.host,t._protocol),_="POST",v=t.maxUploadRetryTime,g=new Cw(x,_,FW(t,n),v);return g.urlParams=y,g.headers=o,g.body=p.uploadData(),g.errorHandler=KR(e),g}class HW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ws.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ws.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ws.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw wl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qW extends HW{initXhr(){this.xhr_.responseType="text"}}function Aw(){return new qW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this._service=e,n instanceof In?this._location=n:this._location=In.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oo(e,n)}get root(){const e=new In(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WR(this._location.path)}get storage(){return this._service}get parent(){const e=RW(this._location.path);if(e===null)return null;const n=new In(this._location.bucket,e);return new oo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw lW(e)}}function GW(t,e,n){t._throwIfRoot("uploadBytes");const r=WW(t.storage,t._location,HR(),new Oi(e,!0),n);return t.storage.makeRequestWithTokens(r,Aw).then(i=>({metadata:i,ref:t}))}function KW(t){t._throwIfRoot("getDownloadURL");const e=BW(t.storage,t._location,HR());return t.storage.makeRequestWithTokens(e,Aw).then(n=>{if(n===null)throw oW();return n})}function XW(t){t._throwIfRoot("deleteObject");const e=zW(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Aw)}function QW(t,e){const n=PW(t._location.path,e),r=new In(t._location.bucket,n);return new oo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(t){return/^[A-Za-z]+:\/\//.test(t)}function JW(t,e){return new oo(t,e)}function QR(t,e){if(t instanceof Rw){const n=t;if(n._bucket==null)throw iW();const r=new oo(n,n._bucket);return e!=null?QR(r,e):r}else return e!==void 0?QW(t,e):t}function ZW(t,e){if(e&&YW(e)){if(t instanceof Rw)return JW(t,e);throw Py("To use ref(service, url), the first argument must be a Storage instance.")}else return QR(t,e)}function YS(t,e){const n=e==null?void 0:e[LR];return n==null?null:In.makeFromBucketSpec(n,t)}function eH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:P2(i,t.app.options.projectId))}class Rw{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=MR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=G7,this._maxUploadRetryTime=K7,this._requests=new Set,i!=null?this._bucket=In.makeFromBucketSpec(i,this._host):this._bucket=YS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=In.makeFromBucketSpec(this._url,e):this._bucket=YS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new cW(FR());{const o=wW(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const JS="@firebase/storage",ZS="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="storage";function JR(t,e,n){return t=wt(t),GW(t,e,n)}function ZR(t){return t=wt(t),KW(t)}function tH(t){return t=wt(t),XW(t)}function Pw(t,e){return t=wt(t),ZW(t,e)}function nH(t=gx(),e){t=wt(t);const r=qf(t,YR).getImmediate({identifier:e}),i=C2("storage");return i&&rH(r,...i),r}function rH(t,e,n,r={}){eH(t,e,n,r)}function iH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Rw(n,r,i,e,wo)}function sH(){to(new ss(YR,iH,"PUBLIC").setMultipleInstances(!0)),Pr(JS,ZS,""),Pr(JS,ZS,"esm2017")}sH();const Nw=O2({apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",authDomain:"zingmp3-clone-61799.firebaseapp.com",messagingSenderId:"938280289868"}),bo=T7(Nw),us=Mz(Nw);new Er;const Dw=nH(Nw);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function eP(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function tP(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zo=function(){return Zo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zo.apply(this,arguments)},nP=function(t){return{loading:t==null,value:t}},oH=function(){return function(t,e){switch(e.type){case"error":return Zo(Zo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return nP(e.defaultValue);case"value":return Zo(Zo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},aH=function(t){var e=t?t():void 0,n=f.useReducer(oH(),nP(e)),r=n[0],i=n[1],s=f.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){i({type:"error",error:l})},[]),a=f.useCallback(function(l){i({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},Su=function(t,e){var n=aH(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=bB(t,function(c){return eP(void 0,void 0,void 0,function(){var d;return tP(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),s(d),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]},lH=function(t){var e=f.useCallback(function(n,r){var i=new Er;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return cH(t,e)},cH=function(t,e){var n=f.useState(),r=n[0],i=n[1],s=f.useState(),o=s[0],a=s[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(m,p){return eP(void 0,void 0,void 0,function(){var y,x,_;return tP(this,function(v){switch(v.label){case 0:d(!0),i(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),y=e(m,p),[4,HB(t,y)];case 2:return x=v.sent(),a(x),[2,x];case 3:return _=v.sent(),i(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]},rP={exports:{}},iP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=f;function uH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dH=typeof Object.is=="function"?Object.is:uH,hH=La.useState,fH=La.useEffect,mH=La.useLayoutEffect,pH=La.useDebugValue;function gH(t,e){var n=e(),r=hH({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return mH(function(){i.value=n,i.getSnapshot=e,pg(i)&&s({inst:i})},[t,n,e]),fH(function(){return pg(i)&&s({inst:i}),t(function(){pg(i)&&s({inst:i})})},[t]),pH(n),n}function pg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dH(t,n)}catch{return!0}}function yH(t,e){return e()}var vH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yH:gH;iP.useSyncExternalStore=La.useSyncExternalStore!==void 0?La.useSyncExternalStore:vH;rP.exports=iP;var xH=rP.exports,sP={exports:{}},oP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im=f,wH=xH;function _H(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var EH=typeof Object.is=="function"?Object.is:_H,SH=wH.useSyncExternalStore,bH=Im.useRef,kH=Im.useEffect,TH=Im.useMemo,IH=Im.useDebugValue;oP.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=bH(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=TH(function(){function l(p){if(!c){if(c=!0,d=p,p=r(p),i!==void 0&&o.hasValue){var y=o.value;if(i(y,p))return h=y}return h=p}if(y=h,EH(d,p))return y;var x=r(p);return i!==void 0&&i(y,x)?y:(d=p,h=x)}var c=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var a=SH(t,s[0],s[1]);return kH(function(){o.hasValue=!0,o.value=a},[a]),IH(a),a};sP.exports=oP;var CH=sP.exports;function AH(t){t()}let aP=AH;const RH=t=>aP=t,PH=()=>aP,eb=Symbol.for("react-redux-context"),tb=typeof globalThis<"u"?globalThis:{};function NH(){var t;if(!f.createContext)return{};const e=(t=tb[eb])!=null?t:tb[eb]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const ds=NH();function Ow(t=ds){return function(){return f.useContext(t)}}const lP=Ow(),DH=()=>{throw new Error("uSES not initialized!")};let cP=DH;const OH=t=>{cP=t},jH=(t,e)=>t===e;function MH(t=ds){const e=t===ds?lP:Ow(t);return function(r,i={}){const{equalityFn:s=jH,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:m}=e();f.useRef(!0);const p=f.useCallback({[r.name](x){return r(x)}}[r.name],[r,h,o]),y=cP(c.addNestedSub,l.getState,d||l.getState,p,s);return f.useDebugValue(y),y}}const Q=MH();var uP={exports:{}},Ce={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=typeof Symbol=="function"&&Symbol.for,jw=Ct?Symbol.for("react.element"):60103,Mw=Ct?Symbol.for("react.portal"):60106,Cm=Ct?Symbol.for("react.fragment"):60107,Am=Ct?Symbol.for("react.strict_mode"):60108,Rm=Ct?Symbol.for("react.profiler"):60114,Pm=Ct?Symbol.for("react.provider"):60109,Nm=Ct?Symbol.for("react.context"):60110,Lw=Ct?Symbol.for("react.async_mode"):60111,Dm=Ct?Symbol.for("react.concurrent_mode"):60111,Om=Ct?Symbol.for("react.forward_ref"):60112,jm=Ct?Symbol.for("react.suspense"):60113,LH=Ct?Symbol.for("react.suspense_list"):60120,Mm=Ct?Symbol.for("react.memo"):60115,Lm=Ct?Symbol.for("react.lazy"):60116,FH=Ct?Symbol.for("react.block"):60121,$H=Ct?Symbol.for("react.fundamental"):60117,BH=Ct?Symbol.for("react.responder"):60118,zH=Ct?Symbol.for("react.scope"):60119;function zn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jw:switch(t=t.type,t){case Lw:case Dm:case Cm:case Rm:case Am:case jm:return t;default:switch(t=t&&t.$$typeof,t){case Nm:case Om:case Lm:case Mm:case Pm:return t;default:return e}}case Mw:return e}}}function dP(t){return zn(t)===Dm}Ce.AsyncMode=Lw;Ce.ConcurrentMode=Dm;Ce.ContextConsumer=Nm;Ce.ContextProvider=Pm;Ce.Element=jw;Ce.ForwardRef=Om;Ce.Fragment=Cm;Ce.Lazy=Lm;Ce.Memo=Mm;Ce.Portal=Mw;Ce.Profiler=Rm;Ce.StrictMode=Am;Ce.Suspense=jm;Ce.isAsyncMode=function(t){return dP(t)||zn(t)===Lw};Ce.isConcurrentMode=dP;Ce.isContextConsumer=function(t){return zn(t)===Nm};Ce.isContextProvider=function(t){return zn(t)===Pm};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jw};Ce.isForwardRef=function(t){return zn(t)===Om};Ce.isFragment=function(t){return zn(t)===Cm};Ce.isLazy=function(t){return zn(t)===Lm};Ce.isMemo=function(t){return zn(t)===Mm};Ce.isPortal=function(t){return zn(t)===Mw};Ce.isProfiler=function(t){return zn(t)===Rm};Ce.isStrictMode=function(t){return zn(t)===Am};Ce.isSuspense=function(t){return zn(t)===jm};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Cm||t===Dm||t===Rm||t===Am||t===jm||t===LH||typeof t=="object"&&t!==null&&(t.$$typeof===Lm||t.$$typeof===Mm||t.$$typeof===Pm||t.$$typeof===Nm||t.$$typeof===Om||t.$$typeof===$H||t.$$typeof===BH||t.$$typeof===zH||t.$$typeof===FH)};Ce.typeOf=zn;uP.exports=Ce;var VH=uP.exports,hP=VH,UH={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},WH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fP={};fP[hP.ForwardRef]=UH;fP[hP.Memo]=WH;var Pe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw=Symbol.for("react.element"),$w=Symbol.for("react.portal"),Fm=Symbol.for("react.fragment"),$m=Symbol.for("react.strict_mode"),Bm=Symbol.for("react.profiler"),zm=Symbol.for("react.provider"),Vm=Symbol.for("react.context"),HH=Symbol.for("react.server_context"),Um=Symbol.for("react.forward_ref"),Wm=Symbol.for("react.suspense"),Hm=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),Gm=Symbol.for("react.lazy"),qH=Symbol.for("react.offscreen"),mP;mP=Symbol.for("react.module.reference");function er(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Fw:switch(t=t.type,t){case Fm:case Bm:case $m:case Wm:case Hm:return t;default:switch(t=t&&t.$$typeof,t){case HH:case Vm:case Um:case Gm:case qm:case zm:return t;default:return e}}case $w:return e}}}Pe.ContextConsumer=Vm;Pe.ContextProvider=zm;Pe.Element=Fw;Pe.ForwardRef=Um;Pe.Fragment=Fm;Pe.Lazy=Gm;Pe.Memo=qm;Pe.Portal=$w;Pe.Profiler=Bm;Pe.StrictMode=$m;Pe.Suspense=Wm;Pe.SuspenseList=Hm;Pe.isAsyncMode=function(){return!1};Pe.isConcurrentMode=function(){return!1};Pe.isContextConsumer=function(t){return er(t)===Vm};Pe.isContextProvider=function(t){return er(t)===zm};Pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fw};Pe.isForwardRef=function(t){return er(t)===Um};Pe.isFragment=function(t){return er(t)===Fm};Pe.isLazy=function(t){return er(t)===Gm};Pe.isMemo=function(t){return er(t)===qm};Pe.isPortal=function(t){return er(t)===$w};Pe.isProfiler=function(t){return er(t)===Bm};Pe.isStrictMode=function(t){return er(t)===$m};Pe.isSuspense=function(t){return er(t)===Wm};Pe.isSuspenseList=function(t){return er(t)===Hm};Pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Fm||t===Bm||t===$m||t===Wm||t===Hm||t===qH||typeof t=="object"&&t!==null&&(t.$$typeof===Gm||t.$$typeof===qm||t.$$typeof===zm||t.$$typeof===Vm||t.$$typeof===Um||t.$$typeof===mP||t.getModuleId!==void 0)};Pe.typeOf=er;function GH(){const t=PH();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const nb={notify(){},get:()=>[]};function KH(t,e){let n,r=nb;function i(h){return l(),r.subscribe(h)}function s(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=GH())}function c(){n&&(n(),n=void 0,r.clear(),r=nb)}const d={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const XH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QH=XH?f.useLayoutEffect:f.useEffect;function YH({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=f.useMemo(()=>{const c=KH(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=f.useMemo(()=>t.getState(),[t]);QH(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||ds;return f.createElement(l.Provider,{value:o},n)}function pP(t=ds){const e=t===ds?lP:Ow(t);return function(){const{store:r}=e();return r}}const JH=pP();function ZH(t=ds){const e=t===ds?JH:pP(t);return function(){return e().dispatch}}const We=ZH();OH(CH.useSyncExternalStoreWithSelector);RH(qa.unstable_batchedUpdates);function cr(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function hs(t){return!!t&&!!t[ze]}function pi(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===aq}(t)||Array.isArray(t)||!!t[cb]||!!(!((e=t.constructor)===null||e===void 0)&&e[cb])||Bw(t)||zw(t))}function ao(t,e,n){n===void 0&&(n=!1),ol(t)===0?(n?Object.keys:ha)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function ol(t){var e=t[ze];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Bw(t)?2:zw(t)?3:0}function da(t,e){return ol(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function eq(t,e){return ol(t)===2?t.get(e):t[e]}function gP(t,e,n){var r=ol(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function yP(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Bw(t){return sq&&t instanceof Map}function zw(t){return oq&&t instanceof Set}function Ps(t){return t.o||t.t}function Vw(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=xP(t);delete e[ze];for(var n=ha(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Uw(t,e){return e===void 0&&(e=!1),Ww(t)||hs(t)||!pi(t)||(ol(t)>1&&(t.set=t.add=t.clear=t.delete=tq),Object.freeze(t),e&&ao(t,function(n,r){return Uw(r,!0)},!0)),t}function tq(){cr(2)}function Ww(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Mr(t){var e=My[t];return e||cr(18,t),e}function nq(t,e){My[t]||(My[t]=e)}function Ny(){return $c}function gg(t,e){e&&(Mr("Patches"),t.u=[],t.s=[],t.v=e)}function ef(t){Dy(t),t.p.forEach(rq),t.p=null}function Dy(t){t===$c&&($c=t.l)}function rb(t){return $c={p:[],l:$c,h:t,m:!0,_:0}}function rq(t){var e=t[ze];e.i===0||e.i===1?e.j():e.g=!0}function yg(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Mr("ES5").S(e,t,r),r?(n[ze].P&&(ef(e),cr(4)),pi(t)&&(t=tf(e,t),e.l||nf(e,t)),e.u&&Mr("Patches").M(n[ze].t,t,e.u,e.s)):t=tf(e,n,[]),ef(e),e.u&&e.v(e.u,e.s),t!==vP?t:void 0}function tf(t,e,n){if(Ww(e))return e;var r=e[ze];if(!r)return ao(e,function(a,l){return ib(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return nf(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Vw(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),ao(s,function(a,l){return ib(t,r,i,a,l,n,o)}),nf(t,i,!1),n&&t.u&&Mr("Patches").N(r,n,t.u,t.s)}return r.o}function ib(t,e,n,r,i,s,o){if(hs(i)){var a=tf(t,i,s&&e&&e.i!==3&&!da(e.R,r)?s.concat(r):void 0);if(gP(n,r,a),!hs(a))return;t.m=!1}else o&&n.add(i);if(pi(i)&&!Ww(i)){if(!t.h.D&&t._<1)return;tf(t,i),e&&e.A.l||nf(t,i)}}function nf(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Uw(e,n)}function vg(t,e){var n=t[ze];return(n?Ps(n):t)[e]}function sb(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function ji(t){t.P||(t.P=!0,t.l&&ji(t.l))}function xg(t){t.o||(t.o=Vw(t.t))}function Oy(t,e,n){var r=Bw(e)?Mr("MapSet").F(e,n):zw(e)?Mr("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Ny(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,c=Bc;o&&(l=[a],c=Nl);var d=Proxy.revocable(l,c),h=d.revoke,m=d.proxy;return a.k=m,a.j=h,m}(e,n):Mr("ES5").J(e,n);return(n?n.A:Ny()).p.push(r),r}function jy(t){return hs(t)||cr(22,t),function e(n){if(!pi(n))return n;var r,i=n[ze],s=ol(n);if(i){if(!i.P&&(i.i<4||!Mr("ES5").K(i)))return i.t;i.I=!0,r=ob(n,s),i.I=!1}else r=ob(n,s);return ao(r,function(o,a){i&&eq(i.t,o)===a||gP(r,o,e(a))}),s===3?new Set(r):r}(t)}function ob(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Vw(t)}function iq(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[ze];return Bc.get(l,s)},set:function(l){var c=this[ze];Bc.set(c,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][ze];if(!a.P)switch(a.i){case 5:r(a)&&ji(a);break;case 4:n(a)&&ji(a)}}}function n(s){for(var o=s.t,a=s.k,l=ha(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==ze){var h=o[d];if(h===void 0&&!da(o,d))return!0;var m=a[d],p=m&&m[ze];if(p?p.t!==h:!yP(m,h))return!0}}var y=!!o[ze];return l.length!==ha(o).length+(y?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};nq("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(d,h){if(d){for(var m=Array(h.length),p=0;p<h.length;p++)Object.defineProperty(m,""+p,t(p,!0));return m}var y=xP(h);delete y[ze];for(var x=ha(y),_=0;_<x.length;_++){var v=x[_];y[v]=t(v,d||!!y[v].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(a,s),c={i:a?5:4,A:o?o.A:Ny(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,ze,{value:c,writable:!0}),l},S:function(s,o,a){a?hs(o)&&o[ze].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var d=c[ze];if(d){var h=d.t,m=d.k,p=d.R,y=d.i;if(y===4)ao(m,function(w){w!==ze&&(h[w]!==void 0||da(h,w)?p[w]||l(m[w]):(p[w]=!0,ji(d)))}),ao(h,function(w){m[w]!==void 0||da(m,w)||(p[w]=!1,ji(d))});else if(y===5){if(r(d)&&(ji(d),p.length=!0),m.length<h.length)for(var x=m.length;x<h.length;x++)p[x]=!1;else for(var _=h.length;_<m.length;_++)p[_]=!0;for(var v=Math.min(m.length,h.length),g=0;g<v;g++)m.hasOwnProperty(g)||(p[g]=!0),p[g]===void 0&&l(m[g])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var ab,$c,Hw=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",sq=typeof Map<"u",oq=typeof Set<"u",lb=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vP=Hw?Symbol.for("immer-nothing"):((ab={})["immer-nothing"]=!0,ab),cb=Hw?Symbol.for("immer-draftable"):"__$immer_draftable",ze=Hw?Symbol.for("immer-state"):"__$immer_state",aq=""+Object.prototype.constructor,ha=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,xP=Object.getOwnPropertyDescriptors||function(t){var e={};return ha(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},My={},Bc={get:function(t,e){if(e===ze)return t;var n=Ps(t);if(!da(n,e))return function(i,s,o){var a,l=sb(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!pi(r)?r:r===vg(t.t,e)?(xg(t),t.o[e]=Oy(t.A.h,r,t)):r},has:function(t,e){return e in Ps(t)},ownKeys:function(t){return Reflect.ownKeys(Ps(t))},set:function(t,e,n){var r=sb(Ps(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=vg(Ps(t),e),s=i==null?void 0:i[ze];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(yP(n,i)&&(n!==void 0||da(t.t,e)))return!0;xg(t),ji(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return vg(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,xg(t),ji(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Ps(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){cr(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){cr(12)}},Nl={};ao(Bc,function(t,e){Nl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Nl.deleteProperty=function(t,e){return Nl.set.call(this,t,e,void 0)},Nl.set=function(t,e,n){return Bc.set.call(this,t[0],e,n,t[0])};var lq=function(){function t(n){var r=this;this.O=lb,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(x){var _=this;x===void 0&&(x=a);for(var v=arguments.length,g=Array(v>1?v-1:0),w=1;w<v;w++)g[w-1]=arguments[w];return l.produce(x,function(E){var S;return(S=s).call.apply(S,[_,E].concat(g))})}}var c;if(typeof s!="function"&&cr(6),o!==void 0&&typeof o!="function"&&cr(7),pi(i)){var d=rb(r),h=Oy(r,i,void 0),m=!0;try{c=s(h),m=!1}finally{m?ef(d):Dy(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(x){return gg(d,o),yg(x,d)},function(x){throw ef(d),x}):(gg(d,o),yg(c,d))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===vP&&(c=void 0),r.D&&Uw(c,!0),o){var p=[],y=[];Mr("Patches").M(i,c,p,y),o(p,y)}return c}cr(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),m=1;m<d;m++)h[m-1]=arguments[m];return r.produceWithPatches(c,function(p){return i.apply(void 0,[p].concat(h))})};var o,a,l=r.produce(i,s,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){pi(n)||cr(8),hs(n)&&(n=jy(n));var r=rb(this),i=Oy(this,n,void 0);return i[ze].C=!0,Dy(r),i},e.finishDraft=function(n,r){var i=n&&n[ze],s=i.A;return gg(s,r),yg(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!lb&&cr(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Mr("Patches").$;return hs(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),jn=new lq,wP=jn.produce;jn.produceWithPatches.bind(jn);jn.setAutoFreeze.bind(jn);jn.setUseProxies.bind(jn);jn.applyPatches.bind(jn);jn.createDraft.bind(jn);jn.finishDraft.bind(jn);function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function cq(t,e){if(zc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uq(t){var e=cq(t,"string");return zc(e)==="symbol"?e:String(e)}function dq(t,e,n){return e=uq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ub(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function db(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ub(Object(n),!0).forEach(function(r){dq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ub(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $t(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var hb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),wg=function(){return Math.random().toString(36).substring(7).split("").join(".")},rf={INIT:"@@redux/INIT"+wg(),REPLACE:"@@redux/REPLACE"+wg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+wg()}};function hq(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function _P(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error($t(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error($t(1));return n(_P)(t,e)}if(typeof t!="function")throw new Error($t(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error($t(3));return s}function h(x){if(typeof x!="function")throw new Error($t(4));if(l)throw new Error($t(5));var _=!0;return c(),a.push(x),function(){if(_){if(l)throw new Error($t(6));_=!1,c();var g=a.indexOf(x);a.splice(g,1),o=null}}}function m(x){if(!hq(x))throw new Error($t(7));if(typeof x.type>"u")throw new Error($t(8));if(l)throw new Error($t(9));try{l=!0,s=i(s,x)}finally{l=!1}for(var _=o=a,v=0;v<_.length;v++){var g=_[v];g()}return x}function p(x){if(typeof x!="function")throw new Error($t(10));i=x,m({type:rf.REPLACE})}function y(){var x,_=h;return x={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error($t(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},x[hb]=function(){return this},x}return m({type:rf.INIT}),r={dispatch:m,subscribe:h,getState:d,replaceReducer:p},r[hb]=y,r}function fq(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:rf.INIT});if(typeof r>"u")throw new Error($t(12));if(typeof n(void 0,{type:rf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($t(13))})}function mq(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{fq(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},m=0;m<s.length;m++){var p=s[m],y=n[p],x=l[p],_=y(x,c);if(typeof _>"u")throw c&&c.type,new Error($t(14));h[p]=_,d=d||_!==x}return d=d||s.length!==Object.keys(l).length,d?h:l}}function sf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function pq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error($t(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=sf.apply(void 0,a)(i.dispatch),db(db({},i),{},{dispatch:s})}}}function EP(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var SP=EP();SP.withExtraArgument=EP;const fb=SP;var bP=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gq=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Fa=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},yq=Object.defineProperty,vq=Object.defineProperties,xq=Object.getOwnPropertyDescriptors,mb=Object.getOwnPropertySymbols,wq=Object.prototype.hasOwnProperty,_q=Object.prototype.propertyIsEnumerable,pb=function(t,e,n){return e in t?yq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},es=function(t,e){for(var n in e||(e={}))wq.call(e,n)&&pb(t,n,e[n]);if(mb)for(var r=0,i=mb(e);r<i.length;r++){var n=i[r];_q.call(e,n)&&pb(t,n,e[n])}return t},_g=function(t,e){return vq(t,xq(e))},Eq=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(c){i(c)}},o=function(l){try{a(n.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},Sq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?sf:sf.apply(null,arguments)};function bq(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var kq=function(t){bP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Fa([void 0],n[0].concat(this)))):new(e.bind.apply(e,Fa([void 0],n.concat(this))))},e}(Array),Tq=function(t){bP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Fa([void 0],n[0].concat(this)))):new(e.bind.apply(e,Fa([void 0],n.concat(this))))},e}(Array);function Ly(t){return pi(t)?wP(t,function(){}):t}function Iq(t){return typeof t=="boolean"}function Cq(){return function(e){return Aq(e)}}function Aq(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new kq;return n&&(Iq(n)?r.push(fb):r.push(fb.withExtraArgument(n.extraArgument))),r}var Rq=!0;function Pq(t){var e=Cq(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,m=h===void 0?void 0:h,p;if(typeof i=="function")p=i;else if(bq(i))p=mq(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var x=pq.apply(void 0,y),_=sf;l&&(_=Sq(es({trace:!Rq},typeof l=="object"&&l)));var v=new Tq(x),g=v;Array.isArray(m)?g=Fa([x],m):typeof m=="function"&&(g=m(v));var w=_.apply(void 0,g);return _P(p,d,w)}function ts(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return es(es({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function kP(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function Nq(t){return typeof t=="function"}function Dq(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?kP(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(Nq(t))l=function(){return Ly(t())};else{var c=Ly(t);l=function(){return c}}function d(h,m){h===void 0&&(h=l());var p=Fa([s[m.type]],o.filter(function(y){var x=y.matcher;return x(m)}).map(function(y){var x=y.reducer;return x}));return p.filter(function(y){return!!y}).length===0&&(p=[a]),p.reduce(function(y,x){if(x)if(hs(y)){var _=y,v=x(_,m);return v===void 0?y:v}else{if(pi(y))return wP(y,function(g){return x(g,m)});var v=x(y,m);if(v===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return y},h)}return d.getInitialState=l,d}function Oq(t,e){return t+"/"+e}function Km(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Ly(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(d){var h=r[d],m=Oq(e,d),p,y;"reducer"in h?(p=h.reducer,y=h.prepare):p=h,s[d]=p,o[m]=p,a[d]=y?ts(m,y):ts(m)});function l(){var d=typeof t.extraReducers=="function"?kP(t.extraReducers):[t.extraReducers],h=d[0],m=h===void 0?{}:h,p=d[1],y=p===void 0?[]:p,x=d[2],_=x===void 0?void 0:x,v=es(es({},m),o);return Dq(n,function(g){for(var w in v)g.addCase(w,v[w]);for(var E=0,S=y;E<S.length;E++){var T=S[E];g.addMatcher(T.matcher,T.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var jq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Mq=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=jq[Math.random()*64|0];return e},Lq=["name","message","stack","code"],Eg=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),gb=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Fq=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=Lq;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=ts(e+"/fulfilled",function(c,d,h,m){return{payload:c,meta:_g(es({},m||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),s=ts(e+"/pending",function(c,d,h){return{payload:void 0,meta:_g(es({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=ts(e+"/rejected",function(c,d,h,m,p){return{payload:m,error:(r&&r.serializeError||Fq)(c||"Rejected"),meta:_g(es({},p||{}),{arg:h,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,m){var p=r!=null&&r.idGenerator?r.idGenerator(c):Mq(),y=new a,x;function _(g){x=g,y.abort()}var v=function(){return Eq(this,null,function(){var g,w,E,S,T,b,k;return gq(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:h,extra:m}),Bq(S)?[4,S]:[3,2];case 1:S=R.sent(),R.label=2;case 2:if(S===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(O,j){return y.signal.addEventListener("abort",function(){return j({name:"AbortError",message:x||"Aborted"})})}),d(s(p,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:p,arg:c},{getState:h,extra:m}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:d,getState:h,extra:m,requestId:p,signal:y.signal,abort:_,rejectWithValue:function(O,j){return new Eg(O,j)},fulfillWithValue:function(O,j){return new gb(O,j)}})).then(function(O){if(O instanceof Eg)throw O;return O instanceof gb?i(O.payload,p,c,O.meta):i(O,p,c)})])];case 3:return E=R.sent(),[3,5];case 4:return b=R.sent(),E=b instanceof Eg?o(null,p,c,b.payload,b.meta):o(b,p,c),[3,5];case 5:return k=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,k||d(E),[2,E]}})})}();return Object.assign(v,{abort:_,requestId:p,arg:c,unwrap:function(){return v.then($q)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function $q(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Bq(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var qw="listenerMiddleware";ts(qw+"/add");ts(qw+"/removeAll");ts(qw+"/remove");var yb;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);iq();const zq=ii();let Vq=zq.current||{...dx({}),currentIndex:0,song_in:""};const Uq={currentSong:Vq},TP=Km({name:"currentSong",initialState:Uq,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...dx({}),currentIndex:0,song_in:""}}}}),Ae=t=>t.currentSong,{setSong:Pn,resetCurrentSong:lo,updateSong:GQ}=TP.actions,Wq=TP.reducer,Hq=ii(),qq={queueSongs:Hq.queue||[],from:[]},IP=Km({name:"songQueue",initialState:qq,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],en("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload;t.queueSongs.splice(n,1),en("queue",t.queueSongs);const r=[];t.queueSongs.forEach(i=>{r.includes(i.song_in)||r.push(i.song_in)}),t.from=r},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),en("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(i=>i.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],en("queue",[])}}}),vi=t=>t.songQueue,{addSongToQueue:Gw,updateSongInQueue:KQ,removeSongFromQueue:Gq,setQueue:Xm,resetSongQueue:CP}=IP.actions,Kq=IP.reducer,AP={user:null,loading:!0},Xq=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},Qq={state:{user:AP.user,loading:!0},setUser:()=>{}},RP=f.createContext(Qq),Yq=()=>{const[t,e]=f.useReducer(Xq,AP),n=f.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},Jq=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=Yq();return u.jsx(RP.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},mt=()=>{const{state:{loading:t,user:e},setUser:n}=f.useContext(RP);return{loading:t,user:e,setUser:n}},bu=()=>{const t=yn(),e=We(),{setUser:n}=mt(),{resetSongPlaylistStore:r}=at(),[i]=lH(us),s=()=>{document.querySelector(".hd-mp3").pause(),e(lo())};return{logOut:async()=>{await rC(us),n({type:"reset"}),e(CP()),r(),s(),t(Nt.Home)},logIn:async()=>{await i()&&(e(lo()),r(),n({type:"reset"}))}}},Zq={toasts:[]},eG={state:Zq,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},PP=f.createContext(eG),tG=({children:t})=>{const[e,n]=f.useState([]),r=({message:s="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:Ah(4),desc:s}]),i=({message:s="Success"})=>n(o=>[...o,{title:"success",id:Ah(4),desc:`${s}`}]);return u.jsx(PP.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:i},children:t})},vn=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(PP);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},NP={tempSongs:[],status:""},nG=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},rG=()=>{const[t,e]=f.useReducer(nG,NP),n=f.useCallback(s=>{e({type:0,payload:{songs:s}})},[]),r=f.useCallback(()=>{e({type:1})},[]),i=f.useCallback(s=>{e({type:2,payload:{status:s}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:i}},iG={state:NP,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},DP=f.createContext(iG),sG=({children:t})=>u.jsx(DP.Provider,{value:rG(),children:t}),Qm=()=>{const{state:{...t},...e}=f.useContext(DP);return{...e,...t}},Vc=async({collection:t,id:e,msg:n})=>{await H7(gw(bo,t,e))},$a=async({collection:t,id:e,msg:n})=>U7(gw(bo,t,e)),Yn=async({collection:t,id:e,data:n,msg:r})=>await W7(gw(bo,t,e),{...n},{merge:!0}),OP=async({file:t,folder:e,email:n,msg:r})=>{const i=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),s=Pw(Dw,`${e+i}`),o=await JR(s,t);return{fileURL:await ZR(o.ref),filePath:o.metadata.fullPath}},oG=async({blob:t,folder:e,songId:n,msg:r})=>{const i=n+"_stock",s=Pw(Dw,`${e+i}`),o=await JR(s,t);return{fileURL:await ZR(o.ref),filePath:o.metadata.fullPath}},Fy=async({filePath:t,msg:e})=>{const n=Pw(Dw,t);await tH(n)},jP=async t=>{await Vc({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Fy({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Vc({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Fy({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},vb=async(t,e)=>{const n=t.map(r=>r.id);await Yn({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},Sg={currentPlaylist:hx({}),playlistSongs:[]},MP=Km({name:"currentPlaylist",initialState:Sg,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(i=>({...i,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",jy(t.playlistSongs).map(i=>i.id)),console.log("add playlist songs",n.map(i=>i.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(i=>i.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",jy(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=Sg.currentPlaylist,t.playlistSongs=Sg.playlistSongs}}}),xi=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:aG,removeSong:XQ,setCurrentPlaylist:lG,updateCurrentPlaylist:Ql,resetCurrentPlaylist:Kw,setPlaylistSongs:xb,setPlaylistSongsAndUpdateCurrent:wb}=MP.actions,cG=MP.reducer;function ko(){const t=We(),{user:e}=mt(),{currentPlaylist:n,playlistSongs:r}=Q(xi),{currentSong:i}=Q(Ae),{userPlaylists:s,updateUserPlaylist:o,setUserPlaylists:a}=at(),[l,c]=f.useState(!1),{setErrorToast:d,setSuccessToast:h}=vn(),m=yn(),p=async S=>{await Yn({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},y=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const T=ux(S),b=hx({id:T,by:e.email,name:S});c(!0);const k=[...s,b];await Yn({collection:"playlist",data:b,id:T,msg:">>> api: set playlist doc"}),await vb(k,e),a(k),c(!1)},x=async()=>{if(!e)return;c(!0);const S=s.filter(T=>T.id!==n.id);await Vc({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await vb(S,e),a(S),t(Kw()),i.song_in===`playlist_${n.id}`&&t(lo()),c(!1),m("/mysongs")},_=async S=>{c(!0);const T={...n};if(T.song_ids=[...n.song_ids,...S.map(b=>b.id)],await p(T),console.log(">>> playlist songs",r.length),t(aG({songs:S})),i.song_in===`playlist_${n.id}`){const b=S.map(k=>({...k,song_in:`playlist_${n.id}`}));t(Gw({songs:b}))}c(!1),h({message:`${S.length} songs added`})},v=async(S,T)=>{try{c(!0);const b={...T,name:S};await p(b),t(Ql(b)),h({message:"Playlist edited"})}catch(b){throw console.log(b),new Error("Error when edit playlist")}finally{c(!1)}},g=async(S,T)=>{try{c(!0);const b=[...T.song_ids,S.id],k={...T};k.song_ids=b,T.id===n.id&&t(Ql({song_ids:b})),await p(k)}catch(b){throw console.log({message:b}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const T=r.filter(k=>k.id!==S.id);console.log("delete songs",r.map(k=>k.id),T.map(k=>k.id));const b={...n};b.song_ids=T.map(k=>k.id),await p(b),t(wb({songs:T})),c(!1),h({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:y,editPlaylist:v,deletePlaylist:x,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const T=S.map(R=>R.id),b=r.filter(R=>!T.includes(R.id)),k={...n};return k.song_ids=b.map(R=>R.id),c(!0),await p(k),t(wb({songs:b})),c(!1),h({message:`${S.length} songs removed`}),b},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:g,setPlaylistDocAndUpdateUserPlaylist:p}}function uG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const dG=f.forwardRef(uG),hG=dG;function fG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const mG=f.forwardRef(fG),pG=mG;function gG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const yG=f.forwardRef(gG),$y=yG;function vG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const xG=f.forwardRef(vG),wG=xG;function _G({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const EG=f.forwardRef(_G),LP=EG;function SG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const bG=f.forwardRef(SG),kG=bG;function TG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const IG=f.forwardRef(TG),CG=IG;function AG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const RG=f.forwardRef(AG),PG=RG;function NG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const DG=f.forwardRef(NG),OG=DG;function jG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const MG=f.forwardRef(jG),LG=MG;function _s({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-3",children:[u.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:e}),u.jsx("button",{onClick:t,children:u.jsx(LG,{className:"w-7"})})]})}function FG({close:t,playlistSongs:e}){const{theme:n}=te(),[r,i]=f.useState([]),{userSongs:s}=at(),{addSongsToPlaylist:o,isFetching:a}=ko(),l={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},c=f.useMemo(()=>!!r.length,[r]),d=async()=>{try{if(!r.length)return;await o(r)}catch(h){console.log({message:h})}finally{t()}};return u.jsxs("div",{className:l.addSongContainer,children:[u.jsx(_s,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:l.addSongContent,children:[u.jsxs(X,{onClick:d,variant:"primary",isLoading:a,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!c&&"opacity-60 pointer-events-none"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),s.map((h,m)=>{if(e.findIndex(y=>y.id===h.id)===-1)return u.jsx("div",{className:l.songItem,children:u.jsx(S2,{isChecked:!0,selectedSongs:r,setSelectedSongs:i,theme:n,data:h,active:!1,onClick:()=>{},setIsChecked:()=>{}})},m)})]})]})}function FP({children:t,active:e,done:n,inUpload:r,className:i,scrollBehavior:s}){const o=f.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:s.current,block:"center"}),s.current==="instant"&&(s.current="smooth"))};return f.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${i&&i} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const $G=()=>{const t=ii();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},$P=Km({name:"playStatus",initialState:()=>$G(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,en(n,r)}}}}}),Vn=t=>t.playStatus,{setPlayStatus:sr,togglePlayControl:_b}=$P.actions,BG=$P.reducer;function zG({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=Q(Vn),{currentSong:i}=Q(Ae),s=f.useMemo(()=>r?u.jsx(is,{className:"w-10 animate-spin"}):e&&i.name?u.jsx(Hv,{className:"w-10"}):n?u.jsx(Df,{className:"w-10"}):u.jsx(qv,{className:"w-10"}),[r,e,n,i]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-1 ${r&&"pointer-events-none"} inline-flex items-center justify-center`,onClick:()=>t(),children:s})})}const Eb=f.memo(zG);function BP({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=Q(Vn);f.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),f.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function VG({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=Q(Ae),{playStatus:{isError:r}}=Q(Vn),[i,s]=f.useState({id:"",base:"",real_time:[]}),[o,a]=f.useState(!1),[l,c]=f.useState(!1),d=f.useRef(),h=async()=>{a(!0);try{const p=await $a({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(p.exists()){const y=p.data();s(y)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},m=()=>{clearTimeout(d.current),c(!1),a(!0),s({base:"",real_time:[],id:""})};return f.useEffect(()=>{const p=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",p),()=>{t&&t.removeEventListener("loadeddata",p)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}i.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){a(!1);return}return()=>{m()}},[n,r]),{songLyric:i,loading:o}}const zP=(t,e)=>{const[n,r]=f.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return f.useEffect(()=>{const i=JSON.parse(localStorage.getItem("HD-MP3")||"{}");i[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(i))},[n]),[n,r]};function UG(){const t=We(),{currentPlaylist:e,playlistSongs:n}=Q(xi),r=Nf(),{setErrorToast:i}=vn(),s=f.useRef(!1),[o,a]=f.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const h=await $a({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(h.exists())return h.data()},c=async h=>{if(!h.song_ids.length)return[];console.log(">>> api: get playlist songs",h.song_ids);const m=bm(bo,"songs"),p=rl(m,il("id","in",h.song_ids)),y=await sl(p);return y.docs.length?y.docs.map(_=>({..._.data(),song_in:`playlist_${h.id}`})):(h.song_ids.length&&i({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let h;const m=e.id===r.id;if(a(!0),m?h=e:h=await l(),!h)throw new Error("playlist not found");const p=await c(h);m||t(lG({playlist:h,songs:p})),t(xb({songs:p}))}catch(h){console.log({message:h}),i({})}finally{a(!1)}};return f.useEffect(()=>{s.current||(s.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:xb,playlistSongs:n,currentPlaylist:e}}function WG(){const t=We(),{currentPlaylist:e}=Q(xi),{isFetching:n,playlistSongs:r}=UG(),i=async()=>{const o=r.find(l=>l.image_url);if(!o||e.image_url&&e.image_url===o.image_url)return;const a={...e,image_url:o.image_url,blurhash_encode:o.blurhash_encode||""};await Yn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Ql({image_url:o.image_url}))},s=async()=>{if(console.log(e.song_ids.length,r.length),!e.song_ids.length){if(e.image_url){const l={...e,image_url:"",blurhash_encode:""};await Yn({collection:"playlist",id:e.id,data:l,msg:">>> api: update playlist doc"})}t(Ql({image_url:"",blurhash_encode:""}));return}if(e.song_ids.length===r.length)return;const o=r.map(l=>l.id),a={...e,song_ids:o};await Yn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Ql({song_ids:o}))};return f.useEffect(()=>{n||!r.length||!e||i()},[r,n]),f.useEffect(()=>{n||e&&s()},[n]),{playlistSongs:r,loading:n}}const VP=()=>{window.dispatchEvent(new Event("mousemove"))},UP=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const s=t.getBoundingClientRect().left,o=r-(s+t.offsetWidth),a=Math.abs(Math.ceil(s-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=VP},900)),n||Math.abs(s)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>s?setTimeout(()=>{e.scrollLeft=l-a},300):o<s&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function HG({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:i}=Q(Ae),s=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;UP(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}i.name&&n&&s()}},[i,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=VP,()=>{o.onscroll=()=>{}}},[])}function qG({textRef:t,textWrapperRef:e,content:n}){const r=f.useRef(),i=f.useRef(),s=f.useRef(!1),o=f.useRef(0),a=f.useRef(0),l=f.useRef(0),c=()=>{t.current&&(t.current.style.transition="none",t.current.style.transform="translateX(0)")},d=()=>{t.current&&(t.current.style.transition=`transform linear ${a.current}s`,t.current.style.transform=`translateX(-${l.current}px)`,i.current=setTimeout(c,a.current*1e3))},h=()=>{!t.current||!e.current||(l.current=t.current.offsetWidth-o.current,a.current=Math.ceil(l.current/35))},m=()=>{!s.current||!t.current||!e.current||(a.current=0,l.current=0,s.current=!1,clearInterval(r.current),clearTimeout(i.current),e.current.classList.remove("mask-image-horizontal"),t.current.innerText=n,c())},p=()=>{!t.current||!e.current||!n||!(t.current.offsetWidth>e.current.offsetWidth)||(s.current=!0,e.current.classList.add("mask-image-horizontal"),o.current=t.current.clientWidth,t.current.innerHTML=t.current.innerText+"&nbsp; &nbsp; &nbsp;"+t.current.innerText,h(),setTimeout(d,1e3),r.current=setInterval(d,a.current*1e3+3e3))};f.useEffect(()=>(p(),m),[n])}const GG=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=We(),{setErrorToast:i,setSuccessToast:s}=vn(),{currentSong:o}=Q(Ae),{userSongs:a,setUserSongs:l}=at(),[c,d]=f.useState(!1),{addSongToPlaylistSongItem:h,deleteSongFromPlaylist:m}=ko();return{updateAndSetUserSongs:f.useCallback(async({song:g})=>{let w=[...a];const E=w.indexOf(g);w.splice(E,1);const S=w.map(T=>T.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let g=[...a];const w=g.indexOf(t);g.splice(w,1),await jP(t),l(g),o.id===t.id&&r(lo()),s({message:`'${t.name}' deleted`})}catch(g){throw console.log({message:g}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async g=>{try{d(!0),await h(t,g),s({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await m(t)}catch(g){throw console.log({message:g}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async g=>{if(!t||!g){i({message:"Lack of props"});return}try{d(!0),await h(t,g),s({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},Uc={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},WP=bm(bo,"songs"),HP=bm(bo,"playlist"),KG=async()=>{const t=rl(WP,il("by","==","admin")),e=await sl(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},XG=async()=>{const t=rl(HP,il("by","==","admin")),e=await sl(t);if(e.docs)return e.docs.map(r=>r.data())},QG=async t=>{const e=rl(HP,il("by","==",t.email)),n=await sl(e);if(n.docs.length)return n.docs.map(i=>i.data())},YG=async t=>{const e=rl(WP,il("by","==",t.email)),n=await sl(e);if(n.docs.length)return n.docs.map(i=>({...i.data(),song_in:"user"}))},JG=async t=>{const e={userSongs:[],userPlaylists:[]},n=await YG(t);n!=null&&n.length&&(e.userSongs=n);const r=await QG(t);return r!=null&&r.length&&(e.userPlaylists=r),e};function Ym({admin:t}){const{setErrorToast:e}=vn(),{user:n,loading:r}=mt(),{initial:i,initSongsContext:s}=at(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=m=>{c(!1),a(m),e({message:"Use song error"})},h=async()=>{try{const m=await KG(),p=await XG();if(console.log("check admin songs",m),console.log("check admin playlists",p),t){s({userSongs:m,userPlaylists:p}),console.log("admin",p,m),c(!1);return}if(!n)await X0(Uc.loadingDuration),s({adminSongs:m,adminPlaylists:p});else{const y=await JG(n);s({...y,adminSongs:m,adminPlaylists:p})}}catch(m){console.log({message:m}),d("init song error")}finally{c(!1)}};return f.useEffect(()=>{if(r)return c(!0);if(i){console.log("Already init"),setTimeout(()=>c(!1),Uc.loadingDuration);return}else{h();return}},[r]),{initial:i,loading:l,errorMsg:o,initSongsAndPlaylists:h}}function ZG({admin:t,inputRef:e}){const{user:n}=mt(),{isDev:r}=te(),{userSongs:i,addUserSongs:s}=at(),{currentSong:o}=Q(Ae),{setTempSongs:a,tempSongs:l,clearTempSongs:c,shiftSong:d,status:h}=Qm(),m=f.useRef([]),p=f.useRef([]),y=f.useRef(!1),{setErrorToast:x,setSuccessToast:_,setToasts:v}=vn(),g=E=>{if(!e.current)return;const S=e.current;S&&(S.value="",p.current=[]),c(E)},w=f.useCallback(async E=>{if(!n)return x({message:"Missing user data"});c("uploading");const T=E.target.files;if(!T.length){c("finish");return}let b=dx({by:t?"admin":n.email,song_in:t?"admin":"user"}),k=[];const R=Date.now(),O=j=>i.some(K=>K.singer===j.singer&&K.name===j.name&&K.size===j.size)||k.some(K=>K.singer===j.singer&&K.name===j.name&&K.size===j.size);try{let j;for(j=0;j<=T.length-1;j++){const L=T[j],B=await j6(L);if(!B){x({message:"Error when parser song"}),g("finish-error");return}let q={...b,name:B.name,singer:B.singer,duration:Math.floor(B.duration),size:Math.floor(L.size/1024)};if(O(q)){console.log(">>>duplicate"),y.current=!0,m.current.push(q);continue}k.push(q),p.current=[...p.current,j]}if(i.length+p.current.length>5&&n.role!=="ADMIN"){g("finish-error"),x({message:"You have reach the upload limit"});return}if(!k.length){y.current=!1,g("finish-error"),x({message:"Duplicate song"});return}a(k);for(let L=0;L<p.current.length;L++){const B=p.current[L];let q=ux(k[L].name);t&&(q+="_admin");const G={...k[L]},{filePath:fe,fileURL:I}=await OP({file:T[B],folder:"/songs/",email:n.email,msg:">>> api: upload song file"});Object.assign(G,{id:q,song_file_path:fe,song_url:I}),await Yn({collection:"songs",data:G,id:G.id,msg:">>> api: set song doc"}),s([G]),d(),r&&console.log(G.name,"uploaded")}p.current=[],y.current?(g("finish-error"),v(L=>[...L,{id:Ah(4),title:"warning",desc:"Song duplicate"}])):(g("finish"),_({message:`${k.length} songs uploaded`}));const K=Date.now();r&&console.log(">>> upload songs finished after",(K-R)/1e3);return}catch(j){console.log({message:j}),g("finish-error"),x({});return}},[n,i,o.song_in]);return f.useEffect(()=>{const E=document.querySelector(".temp-song");E&&E.scrollIntoView({behavior:"smooth",block:"center"})},[l]),{handleInputChange:w}}function eK(t,e){const{theme:n}=te(),[r,i]=f.useState(!1),[s,o]=zP("volume",1),a=d=>{const m=d.target.getBoundingClientRect(),p=t.current;if(p){let y=+((d.clientX-m.x)/p.clientWidth).toFixed(2);y>.9?y=1:y<.05?(y=0,i(!0)):i(!1),o(y)}},l=d=>{d.preventDefault();const h=.1;let m=s;d.deltaY>0?m-h>0?m-=h:m=0:m+h<1?m+=h:m=1,o(+m.toFixed(2))},c=()=>i(!r);return f.useEffect(()=>{if(t.current&&e){const d=s*100;t.current.style.background=`linear-gradient(to right, ${n.content_code} ${d}%, #e1e1e1 ${d}%, #e1e1e1 100%)`,e.volume=s,i(s===0)}},[s,n]),f.useEffect(()=>{e&&(e.muted=r)},[r]),{volume:s,handleSetVolume:a,isMute:r,handleMute:c,handleWheel:l}}const tK=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function nK({data:t,inputFields:e,imageURLFromLocal:n}){const[r,i]=f.useState(!!t.name),[s,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(!1);return f.useEffect(()=>{e.name?i(!0):i(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const p=tK.test(e.image_url);l(p)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&m(!0)},[e,n]),f.useEffect(()=>{d(r&&s&&a&&h)},[r,s,a,h]),{validName:r,validSinger:s,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}const rK=async t=>{const e=Date.now(),n=await f2.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const i=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",i),{encode:r}},iK=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await f2.post("/api/image/optimize",e,{responseType:"blob"});let i;r&&(i=r.data);const s=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",s),i};function sK({song:t,close:e}){const n=We(),{theme:r}=te(),{user:i}=mt(),{setErrorToast:s,setSuccessToast:o}=vn(),{currentSong:a}=Q(Ae),{updateUserSong:l}=at(),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[p,y]=f.useState(t.image_url),[x,_]=f.useState(""),[v,g]=f.useState(),[w,E]=f.useState({name:t.name,singer:t.singer,image_url:""}),S=f.useRef(null),{isAbleToSubmit:T,validName:b,validSinger:k,validURL:R,isChangeInEdit:O,setValidURL:j}=nK({data:t,inputFields:w,imageURLFromLocal:x}),K=f.useMemo(()=>{if(x)return x;if(p)return p;if(R)return w.image_url},[w,x,p,t,R]),L=f.useMemo(()=>!!x||!!p,[x,p]),B=(D,H)=>{E({...w,[D]:H})},q=f.useCallback(()=>{t.image_file_path&&!x?y(""):x?(_(""),g(void 0)):y(""),m(!0);const D=S.current;D&&(D.value="")},[x,t.image_file_path]),G=f.useCallback(D=>{const ee=D.target.files[0];_(URL.createObjectURL(ee)),m(!0),g(ee)},[]),fe=()=>{d(!1),e()},I=D=>{D.stopPropagation(),fe()},$=async()=>{if(i){if(!t.id){s({message:"Edit song wrong data id"});return}try{let D={...t};if(O){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),s({});return}const H=w.image_url&&R?w.image_url:D.image_url;if(d(!0),D={...D,name:w.name,singer:w.singer,image_url:H},D.name!==w.name||D.singer!==w.singer){console.log("input invalid"),s({});return}if(v&&h){const{filePath:ee,fileURL:ie}=await OP({file:v,folder:"/images/",email:i.email});D.image_file_path=ee,D.image_url=ie}else h&&(D.image_file_path="")}if(h&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(D.image_file_path="",D.image_url="",await Fy({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!p&&!v&&(console.log("remove current image url"),D.image_file_path="",D.image_url=""),v)){console.log("upload new file");const H=await iK(v);if(H==null)return;const ee=oG({blob:H,folder:"/images/",songId:D.id}),{encode:ie}=await rK(H);ie&&(D.blurhash_encode=ie,console.log("check encode",ie));const{filePath:De,fileURL:pe}=await ee;D.image_file_path=De,D.image_url=pe}await Yn({collection:"songs",data:D,id:D.id,msg:">>> api: update song doc"}),l(D),a.id===D.id&&n(Pn({...D,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),fe()}catch(D){console.log({message:D}),s({})}finally{d(!1)}}},V={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:G,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(yi,{classNames:"object-cover object-center w-full h-full",onError:()=>j(!1),src:K,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx($D,{className:"w-[15px]"})}),L&&u.jsx(X,{onClick:()=>q(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(js,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${V.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",b?u.jsx(Rd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(js,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${V.input} ${V.textColor}`,value:w.name,type:"text",onChange:D=>B("name",D.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",k?u.jsx(Rd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(js,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:V.input,value:w.singer,onChange:D=>B("singer",D.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:R?u.jsx(Rd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(js,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:V.input,value:w.image_url,onChange:D=>B("image_url",D.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(X,{isLoading:c,onClick:$,className:`${r.content_bg} rounded-full text-[14px] ${T?"":!h&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(X,{onClick:I,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function oK({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(gI,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(pj,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Hv,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function aK({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:i,setRealTimeLyrics:s}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=p=>{p.preventDefault();const y=[...r],x={...y[i],text:l};y[i]=x,console.log("check new lyric ",x),s(y),a(!1)},m={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var p;o&&((p=d.current)==null||p.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(bI,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:p=>c(p.target.value),ref:d,type:"text",className:m.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function of({cb:t,active:e,className:n,size:r="default"}){const{theme:i}=te(),s={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?i.content_bg:"bg-"+i.alpha} `,children:u.jsx("div",{className:`${s.circle} ${e?s.active:s.inActive}`})})}const By=Math.min,fa=Math.max,af=Math.round,fd=Math.floor,fs=t=>({x:t,y:t});function lK(t,e){return typeof t=="function"?t(e):t}function Xw(t){return t.split("-")[0]}function qP(t){return t.split("-")[1]}function cK(t){return t==="x"?"y":"x"}function uK(t){return t==="y"?"height":"width"}function Qw(t){return["top","bottom"].includes(Xw(t))?"y":"x"}function dK(t){return cK(Qw(t))}function GP(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Sb(t,e,n){let{reference:r,floating:i}=t;const s=Qw(e),o=dK(e),a=uK(o),l=Xw(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(qP(e)){case"start":p[o]-=m*(n&&c?-1:1);break;case"end":p[o]+=m*(n&&c?-1:1);break}return p}const hK=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=Sb(c,r,l),m=r,p={},y=0;for(let x=0;x<a.length;x++){const{name:_,fn:v}=a[x],{x:g,y:w,data:E,reset:S}=await v({x:d,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,h=w??h,p={...p,[_]:{...p[_],...E}},S&&y<=50){y++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:h}=Sb(c,m,l)),x=-1;continue}}return{x:d,y:h,placement:m,strategy:i,middlewareData:p}};async function fK(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Xw(n),a=qP(n),l=Qw(n)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,h=lK(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*d,y:m*c}:{x:m*c,y:p*d}}const KP=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await fK(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function ms(t){return XP(t)?(t.nodeName||"").toLowerCase():"#document"}function Nn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function wi(t){var e;return(e=(XP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XP(t){return t instanceof Node||t instanceof Nn(t).Node}function it(t){return t instanceof Element||t instanceof Nn(t).Element}function sn(t){return t instanceof HTMLElement||t instanceof Nn(t).HTMLElement}function zy(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Nn(t).ShadowRoot}function ku(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Mn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function mK(t){return["table","td","th"].includes(ms(t))}function Yw(t){const e=Jw(),n=Mn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function pK(t){let e=co(t);for(;sn(e)&&!Tu(e);){if(Yw(e))return e;e=co(e)}return null}function Jw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Tu(t){return["html","body","#document"].includes(ms(t))}function Mn(t){return Nn(t).getComputedStyle(t)}function Jm(t){return it(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function co(t){if(ms(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zy(t)&&t.host||wi(t);return zy(e)?e.host:e}function QP(t){const e=co(t);return Tu(e)?t.ownerDocument?t.ownerDocument.body:t.body:sn(e)&&ku(e)?e:QP(e)}function Hs(t,e){var n;e===void 0&&(e=[]);const r=QP(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Nn(r);return i?e.concat(s,s.visualViewport||[],ku(r)?r:[]):e.concat(r,Hs(r))}function YP(t){const e=Mn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=sn(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=af(n)!==s||af(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Zw(t){return it(t)?t:t.contextElement}function ma(t){const e=Zw(t);if(!sn(e))return fs(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=YP(e);let o=(s?af(n.width):n.width)/r,a=(s?af(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gK=fs(0);function JP(t){const e=Nn(t);return!Jw()||!e.visualViewport?gK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Nn(t)?!1:e}function uo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Zw(t);let o=fs(1);e&&(r?it(r)&&(o=ma(r)):o=ma(t));const a=yK(s,n,r)?JP(s):fs(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const m=Nn(s),p=r&&it(r)?Nn(r):r;let y=m.frameElement;for(;y&&r&&p!==m;){const x=ma(y),_=y.getBoundingClientRect(),v=Mn(y),g=_.left+(y.clientLeft+parseFloat(v.paddingLeft))*x.x,w=_.top+(y.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=g,c+=w,y=Nn(y).frameElement}}return GP({width:d,height:h,x:l,y:c})}function vK(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=sn(n),s=wi(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=fs(1);const l=fs(0);if((i||!i&&r!=="fixed")&&((ms(n)!=="body"||ku(s))&&(o=Jm(n)),sn(n))){const c=uo(n);a=ma(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function xK(t){return Array.from(t.getClientRects())}function ZP(t){return uo(wi(t)).left+Jm(t).scrollLeft}function wK(t){const e=wi(t),n=Jm(t),r=t.ownerDocument.body,i=fa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=fa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+ZP(t);const a=-n.scrollTop;return Mn(r).direction==="rtl"&&(o+=fa(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function _K(t,e){const n=Nn(t),r=wi(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Jw();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function EK(t,e){const n=uo(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=sn(t)?ma(t):fs(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function bb(t,e,n){let r;if(e==="viewport")r=_K(t,n);else if(e==="document")r=wK(wi(t));else if(it(e))r=EK(e,n);else{const i=JP(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return GP(r)}function eN(t,e){const n=co(t);return n===e||!it(n)||Tu(n)?!1:Mn(n).position==="fixed"||eN(n,e)}function SK(t,e){const n=e.get(t);if(n)return n;let r=Hs(t).filter(a=>it(a)&&ms(a)!=="body"),i=null;const s=Mn(t).position==="fixed";let o=s?co(t):t;for(;it(o)&&!Tu(o);){const a=Mn(o),l=Yw(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ku(o)&&!l&&eN(t,o))?r=r.filter(d=>d!==o):i=a,o=co(o)}return e.set(t,r),r}function bK(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?SK(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=bb(e,d,i);return c.top=fa(h.top,c.top),c.right=By(h.right,c.right),c.bottom=By(h.bottom,c.bottom),c.left=fa(h.left,c.left),c},bb(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function kK(t){return YP(t)}function TK(t,e,n){const r=sn(e),i=wi(e),s=n==="fixed",o=uo(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=fs(0);if(r||!r&&!s)if((ms(e)!=="body"||ku(i))&&(a=Jm(e)),r){const c=uo(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=ZP(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function kb(t,e){return!sn(t)||Mn(t).position==="fixed"?null:e?e(t):t.offsetParent}function tN(t,e){const n=Nn(t);if(!sn(t))return n;let r=kb(t,e);for(;r&&mK(r)&&Mn(r).position==="static";)r=kb(r,e);return r&&(ms(r)==="html"||ms(r)==="body"&&Mn(r).position==="static"&&!Yw(r))?n:r||pK(t)||n}const IK=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||tN,s=this.getDimensions;return{reference:TK(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function CK(t){return Mn(t).direction==="rtl"}const AK={convertOffsetParentRelativeRectToViewportRelativeRect:vK,getDocumentElement:wi,getClippingRect:bK,getOffsetParent:tN,getElementRects:IK,getClientRects:xK,getDimensions:kK,getScale:ma,isElement:it,isRTL:CK};function RK(t,e){let n=null,r;const i=wi(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:h,height:m}=t.getBoundingClientRect();if(a||e(),!h||!m)return;const p=fd(d),y=fd(i.clientWidth-(c+h)),x=fd(i.clientHeight-(d+m)),_=fd(c),g={rootMargin:-p+"px "+-y+"px "+-x+"px "+-_+"px",threshold:fa(0,By(1,l))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),s}function nN(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Zw(t),d=i||s?[...c?Hs(c):[],...Hs(e)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const h=c&&a?RK(c,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(v=>{let[g]=v;g&&g.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let y,x=l?uo(t):null;l&&_();function _(){const v=uo(t);x&&(v.x!==x.x||v.y!==x.y||v.width!==x.width||v.height!==x.height)&&n(),x=v,y=requestAnimationFrame(_)}return n(),()=>{d.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),h&&h(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const PK=(t,e,n)=>{const r=new Map,i={platform:AK,...n},s={...i.platform,_c:r};return hK(t,e,{...i,platform:s})};var Vd=typeof document<"u"?f.useLayoutEffect:f.useEffect;function lf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!lf(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!lf(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function rN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Tb(t,e){const n=rN(t);return Math.round(e*n)/n}function Ib(t){const e=f.useRef(t);return Vd(()=>{e.current=t}),e}function NK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);lf(m,r)||p(r);const[y,x]=f.useState(null),[_,v]=f.useState(null),g=f.useCallback(G=>{G!=T.current&&(T.current=G,x(G))},[x]),w=f.useCallback(G=>{G!==b.current&&(b.current=G,v(G))},[v]),E=s||y,S=o||_,T=f.useRef(null),b=f.useRef(null),k=f.useRef(d),R=Ib(l),O=Ib(i),j=f.useCallback(()=>{if(!T.current||!b.current)return;const G={placement:e,strategy:n,middleware:m};O.current&&(G.platform=O.current),PK(T.current,b.current,G).then(fe=>{const I={...fe,isPositioned:!0};K.current&&!lf(k.current,I)&&(k.current=I,qa.flushSync(()=>{h(I)}))})},[m,e,n,O]);Vd(()=>{c===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(G=>({...G,isPositioned:!1})))},[c]);const K=f.useRef(!1);Vd(()=>(K.current=!0,()=>{K.current=!1}),[]),Vd(()=>{if(E&&(T.current=E),S&&(b.current=S),E&&S){if(R.current)return R.current(E,S,j);j()}},[E,S,j,R]);const L=f.useMemo(()=>({reference:T,floating:b,setReference:g,setFloating:w}),[g,w]),B=f.useMemo(()=>({reference:E,floating:S}),[E,S]),q=f.useMemo(()=>{const G={position:n,left:0,top:0};if(!B.floating)return G;const fe=Tb(B.floating,d.x),I=Tb(B.floating,d.y);return a?{...G,transform:"translate("+fe+"px, "+I+"px)",...rN(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:fe,top:I}},[n,a,B.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:j,refs:L,elements:B,floatingStyles:q}),[d,j,L,B,q])}function Fo(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function cn(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&zy(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function DK(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function OK(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function jK(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(DK())||e.test(OK()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function MK(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function LK(){return/apple/i.test(navigator.vendor)}function cf(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function FK(t){return"nativeEvent"in t}function $K(t){return t.matches("html,body")}function dn(t){return(t==null?void 0:t.ownerDocument)||document}function bg(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function iN(t){return"composedPath"in t?t.composedPath()[0]:t.target}const BK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function sN(t){return sn(t)&&t.matches(BK)}function kg(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var zK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Vy=zK.join(","),oN=typeof Element>"u",Wc=oN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,uf=!oN&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},df=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},VK=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},UK=function(e,n,r){if(df(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Vy));return n&&Wc.call(e,Vy)&&i.unshift(e),i=i.filter(r),i},WK=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!df(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var d=Wc.call(o,Vy);d&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!df(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&m){var p=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,p):i.push({scopeParent:o,candidates:p})}else s.unshift.apply(s,o.children)}}return i},aN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},lN=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||VK(e))&&!aN(e)?0:e.tabIndex},HK=function(e,n){var r=lN(e);return r<0&&n&&!aN(e)?0:r},qK=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},cN=function(e){return e.tagName==="INPUT"},GK=function(e){return cN(e)&&e.type==="hidden"},KK=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},XK=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},QK=function(e){if(!e.name)return!0;var n=e.form||uf(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=XK(i,e.form);return!s||s===e},YK=function(e){return cN(e)&&e.type==="radio"},JK=function(e){return YK(e)&&!QK(e)},ZK=function(e){var n,r=e&&uf(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,d,h;r=uf(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=i)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},Cb=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},eX=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Wc.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Wc.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,c=uf(e);if(l&&!l.shadowRoot&&i(l)===!0)return Cb(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(ZK(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Cb(e);return!1},tX=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Wc.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},nX=function(e,n){return!(n.disabled||df(n)||GK(n)||eX(n,e)||KK(n)||tX(n))},Ab=function(e,n){return!(JK(n)||lN(n)<0||!nX(e,n))},rX=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},iX=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=HK(a,o),c=o?t(i.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(qK).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},uN=function(e,n){n=n||{};var r;return n.getShadowRoot?r=WK([e],n.includeContainer,{filter:Ab.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:rX}):r=UK(e,n.includeContainer,Ab.bind(null,n)),iX(r)};function hf(){return hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hf.apply(this,arguments)}var Cn=typeof document<"u"?f.useLayoutEffect:f.useEffect;let Tg=!1,sX=0;const Rb=()=>"floating-ui-"+sX++;function oX(){const[t,e]=f.useState(()=>Tg?Rb():void 0);return Cn(()=>{t==null&&e(Rb())},[]),f.useEffect(()=>{Tg||(Tg=!0)},[]),t}const aX=Xy["useId".toString()],dN=aX||oX;function lX(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const cX=f.createContext(null),uX=f.createContext(null),hN=()=>{var t;return((t=f.useContext(cX))==null?void 0:t.id)||null},Zm=()=>f.useContext(uX);function Hc(t){return"data-floating-ui-"+t}function ti(t){const e=f.useRef(t);return Cn(()=>{e.current=t}),e}const Pb=Hc("safe-polygon");function Ig(t,e,n){return n&&!cf(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function dX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:m=!1,restMs:p=0,move:y=!0}=e,x=Zm(),_=hN(),v=ti(h),g=ti(d),w=f.useRef(),E=f.useRef(),S=f.useRef(),T=f.useRef(),b=f.useRef(!0),k=f.useRef(!1),R=f.useRef(()=>{}),O=f.useCallback(()=>{var B;const q=(B=i.current.openEvent)==null?void 0:B.type;return(q==null?void 0:q.includes("mouse"))&&q!=="mousedown"},[i]);f.useEffect(()=>{if(!c)return;function B(){clearTimeout(E.current),clearTimeout(T.current),b.current=!0}return s.on("dismiss",B),()=>{s.off("dismiss",B)}},[c,s]),f.useEffect(()=>{if(!c||!v.current||!n)return;function B(G){O()&&r(!1,G)}const q=dn(a).documentElement;return q.addEventListener("mouseleave",B),()=>{q.removeEventListener("mouseleave",B)}},[a,n,r,c,v,i,O]);const j=f.useCallback(function(B,q){q===void 0&&(q=!0);const G=Ig(g.current,"close",w.current);G&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,B),G)):q&&(clearTimeout(E.current),r(!1,B))},[g,r]),K=f.useCallback(()=>{R.current(),S.current=void 0},[]),L=f.useCallback(()=>{if(k.current){const B=dn(l.floating.current).body;B.style.pointerEvents="",B.removeAttribute(Pb),k.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function B(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function q(I){if(clearTimeout(E.current),b.current=!1,m&&!cf(w.current)||p>0&&Ig(g.current,"open")===0)return;const $=Ig(g.current,"open",w.current);$?E.current=setTimeout(()=>{r(!0,I)},$):r(!0,I)}function G(I){if(B())return;R.current();const $=dn(a);if(clearTimeout(T.current),v.current){n||clearTimeout(E.current),S.current=v.current({...t,tree:x,x:I.clientX,y:I.clientY,onClose(){L(),K(),j(I)}});const D=S.current;$.addEventListener("mousemove",D),R.current=()=>{$.removeEventListener("mousemove",D)};return}(w.current==="touch"?!cn(a,I.relatedTarget):!0)&&j(I)}function fe(I){B()||v.current==null||v.current({...t,tree:x,x:I.clientX,y:I.clientY,onClose(){L(),K(),j(I)}})(I)}if(it(o)){const I=o;return n&&I.addEventListener("mouseleave",fe),a==null||a.addEventListener("mouseleave",fe),y&&I.addEventListener("mousemove",q,{once:!0}),I.addEventListener("mouseenter",q),I.addEventListener("mouseleave",G),()=>{n&&I.removeEventListener("mouseleave",fe),a==null||a.removeEventListener("mouseleave",fe),y&&I.removeEventListener("mousemove",q),I.removeEventListener("mouseenter",q),I.removeEventListener("mouseleave",G)}}},[o,a,c,t,m,p,y,j,K,L,r,n,x,g,v,i]),Cn(()=>{var B;if(c&&n&&(B=v.current)!=null&&B.__options.blockPointerEvents&&O()){const fe=dn(a).body;if(fe.setAttribute(Pb,""),fe.style.pointerEvents="none",k.current=!0,it(o)&&a){var q,G;const I=o,$=x==null||(q=x.nodesRef.current.find(V=>V.id===_))==null||(G=q.context)==null?void 0:G.elements.floating;return $&&($.style.pointerEvents=""),I.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{I.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,x,v,i,O]),Cn(()=>{n||(w.current=void 0,K(),L())},[n,K,L]),f.useEffect(()=>()=>{K(),clearTimeout(E.current),clearTimeout(T.current),L()},[c,o,K,L]),f.useMemo(()=>{if(!c)return{};function B(q){w.current=q.pointerType}return{reference:{onPointerDown:B,onPointerEnter:B,onMouseMove(q){n||p===0||(clearTimeout(T.current),T.current=setTimeout(()=>{b.current||r(!0,q.nativeEvent)},p))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(q){s.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),j(q.nativeEvent,!1)}}}},[s,c,p,n,r,j])}let Nb=0;function ks(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(Nb);const s=()=>t==null?void 0:t.focus({preventScroll:n});i?s():Nb=requestAnimationFrame(s)}function hX(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function Yl(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Oo=new WeakMap,md=new WeakSet,pd={},Cg=0;const fX=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,fN=t=>t&&(t.host||fN(t.parentNode)),mX=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=fN(n);return t.contains(r)?r:null}).filter(n=>n!=null);function pX(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=mX(e,t),a=new Set,l=new Set(o),c=[];pd[i]||(pd[i]=new WeakMap);const d=pd[i];o.forEach(h),m(e),a.clear();function h(p){!p||a.has(p)||(a.add(p),p.parentNode&&h(p.parentNode))}function m(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,y=>{if(a.has(y))m(y);else{const x=s?y.getAttribute(s):null,_=x!==null&&x!=="false",v=(Oo.get(y)||0)+1,g=(d.get(y)||0)+1;Oo.set(y,v),d.set(y,g),c.push(y),v===1&&_&&md.add(y),g===1&&y.setAttribute(i,""),!_&&s&&y.setAttribute(s,"true")}})}return Cg++,()=>{c.forEach(p=>{const y=(Oo.get(p)||0)-1,x=(d.get(p)||0)-1;Oo.set(p,y),d.set(p,x),y||(!md.has(p)&&s&&p.removeAttribute(s),md.delete(p)),x||p.removeAttribute(i)}),Cg--,Cg||(Oo=new WeakMap,Oo=new WeakMap,md=new WeakSet,pd={})}}function Db(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=dn(t[0]).body;return pX(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const mN=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function pN(t,e){const n=uN(t,mN());e==="prev"&&n.reverse();const r=n.indexOf(Fo(dn(t)));return n.slice(r+1)[0]}function gX(){return pN(document.body,"next")}function yX(){return pN(document.body,"prev")}function Ob(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!cn(n,r)}const gN={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let vX;function jb(t){t.key==="Tab"&&(t.target,clearTimeout(vX))}const Mb=f.forwardRef(function(e,n){const[r,i]=f.useState();Cn(()=>(LK()&&i("button"),document.addEventListener("keydown",jb),()=>{document.removeEventListener("keydown",jb)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Hc("focus-guard")]:"",style:gN};return f.createElement("span",hf({},e,s))}),xX=f.createContext(null),wX=()=>f.useContext(xX),_X=f.forwardRef(function(e,n){return f.createElement("button",hf({},e,{type:"button",ref:n,tabIndex:-1,style:gN}))});function yN(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:m,nodeId:p,onOpenChange:y,events:x,dataRef:_,elements:{domReference:v,floating:g}}=e,w=fX()?s:!0,E=ti(i),S=ti(o),T=ti(a),b=Zm(),k=wX(),R=typeof o=="number"&&o<0,O=f.useRef(null),j=f.useRef(null),K=f.useRef(!1),L=f.useRef(null),B=f.useRef(!1),q=k!=null,G=v&&v.getAttribute("role")==="combobox"&&sN(v),fe=f.useCallback(function(D){return D===void 0&&(D=g),D?uN(D,mN()):[]},[g]),I=f.useCallback(D=>{const H=fe(D);return E.current.map(ee=>v&&ee==="reference"?v:g&&ee==="floating"?g:H).filter(Boolean).flat()},[v,g,E,fe]);f.useEffect(()=>{if(r||!l)return;function D(ee){if(ee.key==="Tab"){cn(g,Fo(dn(g)))&&fe().length===0&&!G&&kg(ee);const ie=I(),De=iN(ee);E.current[0]==="reference"&&De===v&&(kg(ee),ee.shiftKey?ks(ie[ie.length-1]):ks(ie[1])),E.current[1]==="floating"&&De===g&&ee.shiftKey&&(kg(ee),ks(ie[0]))}}const H=dn(g);return H.addEventListener("keydown",D),()=>{H.removeEventListener("keydown",D)}},[r,v,g,l,E,m,G,fe,I]),f.useEffect(()=>{if(r||!d)return;function D(){B.current=!0,setTimeout(()=>{B.current=!1})}function H(ee){const ie=ee.relatedTarget;queueMicrotask(()=>{const De=!(cn(v,ie)||cn(g,ie)||cn(ie,g)||cn(k==null?void 0:k.portalNode,ie)||ie!=null&&ie.hasAttribute(Hc("focus-guard"))||b&&(Yl(b.nodesRef.current,p).find(pe=>{var tt,lt;return cn((tt=pe.context)==null?void 0:tt.elements.floating,ie)||cn((lt=pe.context)==null?void 0:lt.elements.domReference,ie)})||hX(b.nodesRef.current,p).find(pe=>{var tt,lt;return((tt=pe.context)==null?void 0:tt.elements.floating)===ie||((lt=pe.context)==null?void 0:lt.elements.domReference)===ie})));ie&&De&&!B.current&&ie!==L.current&&(K.current=!0,y(!1,ee))})}if(g&&sn(v))return v.addEventListener("focusout",H),v.addEventListener("pointerdown",D),!l&&g.addEventListener("focusout",H),()=>{v.removeEventListener("focusout",H),v.removeEventListener("pointerdown",D),!l&&g.removeEventListener("focusout",H)}},[r,v,g,l,p,b,k,y,d]),f.useEffect(()=>{var D;if(r)return;const H=Array.from((k==null||(D=k.portalNode)==null?void 0:D.querySelectorAll("["+Hc("portal")+"]"))||[]);if(g){const ee=[g,...H,O.current,j.current,E.current.includes("reference")||G?v:null].filter(De=>De!=null),ie=l?Db(ee,w,!w):Db(ee);return()=>{ie()}}},[r,v,g,l,E,k,G,w]),Cn(()=>{if(r||!g)return;const D=dn(g),H=Fo(D);queueMicrotask(()=>{const ee=I(g),ie=S.current,De=(typeof ie=="number"?ee[ie]:ie.current)||g,pe=cn(g,H);!R&&!pe&&h&&ks(De,{preventScroll:De===g})})},[r,h,g,R,I,S]),Cn(()=>{if(r||!g)return;let D=!1;const H=dn(g),ee=Fo(H),ie=_.current;L.current=ee;function De(pe){if(pe.type==="escapeKey"&&m.domReference.current&&(L.current=m.domReference.current),["referencePress","escapeKey"].includes(pe.type))return;const tt=pe.data.returnFocus;typeof tt=="object"?(K.current=!1,D=tt.preventScroll):K.current=!tt}return x.on("dismiss",De),()=>{x.off("dismiss",De);const pe=Fo(H);(cn(g,pe)||b&&Yl(b.nodesRef.current,p).some(lt=>{var Wr;return cn((Wr=lt.context)==null?void 0:Wr.elements.floating,pe)})||ie.openEvent&&["click","mousedown"].includes(ie.openEvent.type))&&m.domReference.current&&(L.current=m.domReference.current),T.current&&sn(L.current)&&!K.current&&ks(L.current,{cancelPrevious:!1,preventScroll:D})}},[r,g,T,_,m,x,b,p]),Cn(()=>{if(!(r||!k))return k.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:y,refs:m}),()=>{k.setFocusManagerState(null)}},[r,k,l,h,y,m,d]),Cn(()=>{if(!r&&g&&typeof MutationObserver=="function"){const D=()=>{const ee=g.getAttribute("tabindex");E.current.includes("floating")||Fo(dn(g))!==m.domReference.current&&fe().length===0?ee!=="0"&&g.setAttribute("tabindex","0"):ee!=="-1"&&g.setAttribute("tabindex","-1")};D();const H=new MutationObserver(D);return H.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{H.disconnect()}}},[r,g,m,E,fe]);function $(D){return r||!c||!l?null:f.createElement(_X,{ref:D==="start"?O:j,onClick:H=>y(!1,H.nativeEvent)},typeof c=="string"?c:"Dismiss")}const V=!r&&w&&!G&&(q||l);return f.createElement(f.Fragment,null,V&&f.createElement(Mb,{"data-type":"inside",ref:k==null?void 0:k.beforeInsideRef,onFocus:D=>{if(l){const ee=I();ks(i[0]==="reference"?ee[0]:ee[ee.length-1])}else if(k!=null&&k.preserveTabOrder&&k.portalNode)if(K.current=!1,Ob(D,k.portalNode)){const ee=gX()||v;ee==null||ee.focus()}else{var H;(H=k.beforeOutsideRef.current)==null||H.focus()}}}),!G&&$("start"),n,$("end"),V&&f.createElement(Mb,{"data-type":"inside",ref:k==null?void 0:k.afterInsideRef,onFocus:D=>{if(l)ks(I()[0]);else if(k!=null&&k.preserveTabOrder&&k.portalNode)if(d&&(K.current=!0),Ob(D,k.portalNode)){const ee=yX()||v;ee==null||ee.focus()}else{var H;(H=k.afterOutsideRef.current)==null||H.focus()}}}))}function Lb(t){return sn(t.target)&&t.target.tagName==="BUTTON"}function Fb(t){return sN(t)}function EX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),m=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(p){h.current=p.pointerType},onMouseDown(p){p.button===0&&(cf(h.current,!0)&&c||a!=="click"&&(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?r(!1,p.nativeEvent):(p.preventDefault(),r(!0,p.nativeEvent))))},onClick(p){if(a==="mousedown"&&h.current){h.current=void 0;return}cf(h.current,!0)&&c||(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="click")?r(!1,p.nativeEvent):r(!0,p.nativeEvent))},onKeyDown(p){h.current=void 0,!(p.defaultPrevented||!d||Lb(p))&&(p.key===" "&&!Fb(s)&&(p.preventDefault(),m.current=!0),p.key==="Enter"&&r(!(n&&l),p.nativeEvent))},onKeyUp(p){p.defaultPrevented||!d||Lb(p)||Fb(s)||p.key===" "&&m.current&&(m.current=!1,r(!(n&&l),p.nativeEvent))}}}:{},[o,i,a,c,d,s,l,n,r])}const SX=Xy["useInsertionEffect".toString()],bX=SX||(t=>t());function Ud(t){const e=f.useRef(()=>{});return bX(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const kX={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},TX={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},IX=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function vN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,nodeId:s,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:m=!0,outsidePressEvent:p="pointerdown",referencePress:y=!1,referencePressEvent:x="pointerdown",ancestorScroll:_=!1,bubbles:v}=e,g=Zm(),w=hN()!=null,E=Ud(typeof m=="function"?m:()=>!1),S=typeof m=="function"?E:m,T=f.useRef(!1),{escapeKeyBubbles:b,outsidePressBubbles:k}=IX(v),R=Ud(j=>{if(!n||!d||!h||j.key!=="Escape")return;const K=g?Yl(g.nodesRef.current,s):[];if(!b&&(j.stopPropagation(),K.length>0)){let L=!0;if(K.forEach(B=>{var q;if((q=B.context)!=null&&q.open&&!B.context.dataRef.current.__escapeKeyBubbles){L=!1;return}}),!L)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,FK(j)?j.nativeEvent:j)}),O=Ud(j=>{const K=T.current;if(T.current=!1,K||typeof S=="function"&&!S(j))return;const L=iN(j),B="["+Hc("inert")+"]",q=dn(l).querySelectorAll(B);let G=it(L)?L:null;for(;G&&!Tu(G);){const $=co(G);if($===dn(l).body||!it($))break;G=$}if(q.length&&it(L)&&!$K(L)&&!cn(L,l)&&Array.from(q).every($=>!cn(G,$)))return;if(sn(L)&&l){const $=L.clientWidth>0&&L.scrollWidth>L.clientWidth,V=L.clientHeight>0&&L.scrollHeight>L.clientHeight;let D=V&&j.offsetX>L.clientWidth;if(V&&Mn(L).direction==="rtl"&&(D=j.offsetX<=L.offsetWidth-L.clientWidth),D||$&&j.offsetY>L.clientHeight)return}const fe=g&&Yl(g.nodesRef.current,s).some($=>{var V;return bg(j,(V=$.context)==null?void 0:V.elements.floating)});if(bg(j,l)||bg(j,a)||fe)return;const I=g?Yl(g.nodesRef.current,s):[];if(I.length>0){let $=!0;if(I.forEach(V=>{var D;if((D=V.context)!=null&&D.open&&!V.context.dataRef.current.__outsidePressBubbles){$=!1;return}}),!$)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:jK(j)||MK(j)}}),r(!1,j)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=b,c.current.__outsidePressBubbles=k;function j(B){r(!1,B)}const K=dn(l);h&&K.addEventListener("keydown",R),S&&K.addEventListener(p,O);let L=[];return _&&(it(a)&&(L=Hs(a)),it(l)&&(L=L.concat(Hs(l))),!it(o)&&o&&o.contextElement&&(L=L.concat(Hs(o.contextElement)))),L=L.filter(B=>{var q;return B!==((q=K.defaultView)==null?void 0:q.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",j,{passive:!0})}),()=>{h&&K.removeEventListener("keydown",R),S&&K.removeEventListener(p,O),L.forEach(B=>{B.removeEventListener("scroll",j)})}},[c,l,a,o,h,S,p,n,r,_,d,b,k,R,O]),f.useEffect(()=>{T.current=!1},[S,p]),f.useMemo(()=>d?{reference:{onKeyDown:R,[kX[x]]:j=>{y&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,j.nativeEvent))}},floating:{onKeyDown:R,[TX[p]]:()=>{T.current=!0}}}:{},[d,i,y,p,x,r,R])}function xN(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:i}=t,[s,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||s,l=NK(t),c=Zm(),d=Ud((E,S)=>{E&&(m.current.openEvent=S),r==null||r(E,S)}),h=f.useRef(null),m=f.useRef({}),p=f.useState(()=>lX())[0],y=dN(),x=f.useCallback(E=>{const S=it(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=f.useCallback(E=>{(it(E)||E===null)&&(h.current=E,o(E)),(it(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!it(E))&&l.refs.setReference(E)},[l.refs]),v=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:x,domReference:h}),[l.refs,_,x]),g=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:v,elements:g,dataRef:m,nodeId:i,floatingId:y,events:p,open:n,onOpenChange:d}),[l,i,y,p,n,d,v,g]);return Cn(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===i);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:v,elements:g}),[l,v,g,w])}function Ag(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(i=>i?i[n]:null).concat(t).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),i[a]=function(){for(var d,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(d=r.get(a))==null?void 0:d.map(y=>y(...m)).find(y=>y!==void 0)}}}else i[a]=l}),i),{})}}function wN(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(s=>Ag(s,t,"reference"),e),r=f.useCallback(s=>Ag(s,t,"floating"),e),i=f.useCallback(s=>Ag(s,t,"item"),t.map(s=>s==null?void 0:s.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}function _N(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:i=!0,role:s="dialog"}=e,o=dN();return f.useMemo(()=>{const a={id:r,role:s};return i?s==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?r:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:o}},floating:{...a,...s==="menu"&&{"aria-labelledby":o}}}:{}},[i,s,n,r,o])}const $b=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function jo(t,e){return typeof t=="function"?t(e):t}function CX(t,e){const[n,r]=f.useState(t);return t&&!n&&r(!0),f.useEffect(()=>{if(!t){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,e]),n}function EN(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[a,l]=f.useState(!1),[c,d]=f.useState("unmounted"),h=CX(n,o);return Cn(()=>{a&&!h&&d("unmounted")},[a,h]),Cn(()=>{if(r)if(n){d("initial");const m=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(m)}}else l(!0),d("close")},[n,r]),{isMounted:h,status:c}}function AX(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=f.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",h=(d?o:o.open)||0,m=(d?o:o.close)||0,[p,y]=f.useState(()=>({...jo(s,c),...jo(n,c)})),{isMounted:x,status:_}=EN(t,{duration:o}),v=ti(n),g=ti(r),w=ti(i),E=ti(s);return Cn(()=>{const S=jo(v.current,c),T=jo(w.current,c),b=jo(E.current,c),k=jo(g.current,c)||Object.keys(S).reduce((R,O)=>(R[O]="",R),{});if(_==="initial"&&y(R=>({transitionProperty:R.transitionProperty,...b,...S})),_==="open"&&y({transitionProperty:Object.keys(k).map($b).join(","),transitionDuration:h+"ms",...b,...k}),_==="close"){const R=T||S;y({transitionProperty:Object.keys(R).map($b).join(","),transitionDuration:m+"ms",...b,...R})}},[m,w,v,g,E,h,_,c]),{isMounted:x,styles:p}}function RX({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:i,refs:s}=xN({placement:t,open:e,onOpenChange:n,whileElementsMounted:nN,middleware:[KP(10)]}),o=dX(r,{move:!1}),a=vN(r),l=_N(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=wN([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:i,refs:s,context:r}}const SN=f.createContext(null),bN=()=>{const t=f.useContext(SN);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Ba({children:t,...e}){const n=RX({...e});return u.jsx(SN.Provider,{value:n,children:t})}function za({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:i}=bN();return u.jsx("button",{ref:r.setReference,"data-state":i?"open":"closed",...n(e),children:t})}function Va({children:t,className:e,...n}){const{theme:r}=te(),{context:i,refs:s,getFloatingProps:o,floatingStyles:a,isOpen:l}=bN(),c={container:`${r.type==="dark"?"bg-white/70 text-[#333]":"bg-black/70 text-white"}`};if(l)return u.jsx(yN,{context:i,modal:!1,children:u.jsx("div",{className:`${c.container}  text-[13px] font-semibold px-[6px] py-[3px] rounded-[4px]`,ref:s.setFloating,style:{...a},...o(n),children:t})})}const e1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function PX({vinylRef:t}){const{playStatus:{isPlaying:e}}=Q(Vn);f.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function NX({isOpenFullScreen:t,admin:e}){const n=f.useRef(null),{currentSong:r}=Q(Ae);PX({vinylRef:n});const i={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row"};return u.jsx("div",{className:`${i.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${i.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[46px]":"w-[56px]",children:u.jsx("img",{ref:n,src:r.image_url||e1,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-2 flex-grow",children:[u.jsx("div",{className:"h-[26px]",children:u.jsx(ff,{className:"text-[14px] font-playwriteCU font-[600]",content:r.name||"Name"})}),u.jsx("div",{className:"h-[20px]",children:u.jsx(ff,{autoScroll:!0,className:"text-[15px] font-[600] opacity-70",content:r.singer||"..."})})]})]})})}function DX({audioEle:t}){const e=f.useRef(!1),{playStatus:{isPlaying:n}}=Q(Vn),[r,i]=f.useState(0),[s,o]=f.useState(0),a=f.useRef(),l=c=>{i(0),en("timer",0),clearInterval(a.current),c&&o(0)};return f.useEffect(()=>{if(e.current&&(console.log("check cd",s,r,n),!!r)){if(!s)o(r),n||t.play();else if(!n)return;return a.current=setInterval(()=>o(c=>c===1?(t.pause(),l(),0):((c===r||c%5===0)&&en("timer",c-1),c-1)),1e3),()=>{clearInterval(a.current)}}},[n,r]),f.useEffect(()=>{if(!e.current){e.current=!0;const c=ii().timer||0;o(c),i(c)}},[]),{countDown:s,isActive:r,handleEndTimer:l,setIsActive:i}}function kN({audioEle:t,variant:e="desktop"}){const{theme:n}=te(),[r,i]=f.useState(!1),{countDown:s,isActive:o,handleEndTimer:a,setIsActive:l}=DX({audioEle:t}),c=()=>i(!1),d=y=>l(y),h=()=>{o?a(!0):i(!0)},m={container:"w-[50px] flex justify-center",button:`rounded-[99px]  hover:bg-${n.alpha} p-[5px]`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-base text-[#ccc]"},p=()=>{switch(e){case"desktop":return u.jsx("div",{className:m.container,children:o?u.jsxs(Ba,{placement:"top",children:[u.jsx(za,{onClick:h,children:u.jsxs("div",{className:"group",children:[u.jsx("div",{className:"text-sm group-hover:hidden",children:Ia(s)}),u.jsx("div",{className:`hidden group-hover:block ${m.button}`,children:u.jsx(js,{className:"w-6"})})]})}),u.jsx(Va,{children:"Clear timer"})]}):u.jsxs(Ba,{placement:"top",children:[u.jsx(za,{onClick:h,className:m.button,children:u.jsx(yI,{className:"w-6"})}),u.jsx(Va,{children:"Sleep timer"})]})});case"mobile":return u.jsxs("div",{className:`${m.itemContainer}`,children:[u.jsx("p",{className:m.text,children:o?Ia(s):"Sleep timer"}),u.jsx(of,{size:"thin",className:"bg-white/10",active:!!o,cb:h})]})}};return u.jsxs(u.Fragment,{children:[p(),r&&u.jsx(Ur,{closeModal:c,children:u.jsx(xQ,{active:d,close:c})})]})}function OX({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:i,isOpenSongQueue:s,setIsOpenSongQueue:o}){const{theme:a}=te(),{currentSong:l}=Q(Ae),{playStatus:{isPlaying:c,isWaiting:d}}=Q(Vn),h=f.useRef(null),m=$n(),{handleSetVolume:p,isMute:y,handleMute:x,handleWheel:_}=eK(h,e),v=f.useMemo(()=>m.pathname.includes("edit"),[m]),g=()=>{s&&o(!1),i(!0)},w={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-center",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,right:`${n?"w-1/4":"w-1/4 "} flex items-center justify-end`,volumeLineBase:"ml-1 w-full relative h-[4px] cursor-pointer rounded-full",volumeLineCurrent:"absolute left-0 top-0 h-full w-full ",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${w.wrapper} ${r&&"border-transparent"} ${v&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${w.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${w.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(NX,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${w.controlWrapper} ${n?"":w.controlWrapperChild_1}  ${w.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(TN,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${w.right}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[120px] mr-2",children:[u.jsx("button",{onWheel:_,onClick:()=>x(),children:y?u.jsx(lj,{className:"w-6"}):u.jsx(sj,{className:"w-6"})}),u.jsx("div",{onClick:E=>p(E),ref:h,className:`${w.volumeLineBase} ${w.before}`,style:{background:"#e1e1e1"}})]}),!n&&u.jsxs("div",{className:"flex items-center",children:[u.jsxs(Ba,{placement:"top",children:[u.jsx(za,{onClick:g,className:` ml-1 rounded-[99px]  hover:bg-${a.alpha}  p-[5px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(cO,{className:"w-6"})}),u.jsx(Va,{children:"Fullscreen mode"})]}),u.jsxs(Ba,{placement:"top",children:[u.jsx(za,{onClick:()=>o(!s),className:` hover:bg-${a.alpha}   p-[5px]  rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(nj,{className:"w-6"})}),u.jsx(Va,{children:"Queue"})]}),u.jsx("div",{className:`w-[2px] h-[26px] mx-3 bg-${a.alpha}`}),u.jsx(kN,{variant:"desktop",audioEle:e})]})]})]})]})}const jX=f.memo(OX);function MX(t,e){f.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}function LX({audioEle:t,isOpenFullScreen:e,timelineRef:n,currentTimeRef:r,remainingTimeRef:i}){const s=We(),{theme:o}=te(),{user:a}=mt(),{queueSongs:l}=Q(vi),{playStatus:{isPlaying:c,isRepeat:d,isShuffle:h,isCrossFade:m}}=Q(Vn),{currentSong:p}=Q(Ae),{currentPlaylist:y}=Q(xi),[x,_]=f.useState(!1),[v,g]=f.useState(0),w=f.useRef(!0),E=f.useRef(0),S=f.useRef(0),T=f.useRef(),b=f.useRef(0),k=f.useRef(0),R=f.useRef(0),O=f.useRef(o.content_code),j=f.useRef(!1),K=f.useRef(!0),L=f.useRef(),B=$n(),{setErrorToast:q}=vn(),G=f.useMemo(()=>B.pathname.includes("edit"),[B]);MX(()=>{var me;T.current=(me=n.current)==null?void 0:me.offsetWidth},[e]);const I=()=>{try{if(t==null||t.play(),!a)return;K.current&&(m&&(t.volume=0),K.current=!1)}catch{}},$=()=>{t==null||t.pause()},V=me=>l[me],D=()=>{s(sr({isPlaying:!1})),L.current&&clearInterval(L.current)},H=()=>{w.current=!1,s(sr({isPlaying:!0,isWaiting:!1,isError:!1}))},ee=()=>{_(!1),w.current||en("duration",0),n.current&&r.current&&i.current&&(r.current.innerText="0:00",i.current.innerText="0:00",n.current.style.background="#e1e1e1")},ie=f.useCallback(me=>{const Xe=me.target;if(T.current&&S.current){const pt=Xe.getBoundingClientRect(),Io=(me.clientX-pt.left)/T.current,al=Math.ceil(Io*S.current);if(t){const Cu=t.currentTime;if(b.current&&Math.abs(Cu-b.current)<1&&Math.abs(al-b.current)<1){console.log("no seek");return}t.currentTime=al,b.current=al}}},[e,p,c]),De=f.useCallback(()=>{let me=E.current+1,Xe;me<l.length?Xe=l[me]:(me=0,Xe=l[0]),s(Pn({...Xe,currentIndex:me,song_in:p.song_in}))},[p,l]),pe=f.useCallback(()=>{let me=E.current-1,Xe;me>=0?Xe=l[me]:(Xe=l[l.length-1],me=l.length-1),s(Pn({...Xe,currentIndex:me,song_in:p.song_in}))},[p,l]),tt=me=>{const pt=ii().volume||1;if(me<=2){const xn=me/2*pt;t.volume=xn}else if(me<k.current){t.volume!=pt&&(t.volume=pt);return}if(me>=k.current){const xn=(S.current-me)/2*pt;t.volume=xn}},lt=()=>{if(!t){console.log("auto ele is undefined when update time");return}const me=t==null?void 0:t.currentTime,Xe=n.current;if(S.current&&me&&Xe){const pt=me/(S.current/100);Xe.style.background=`linear-gradient(to right, ${O.current} ${pt}%, #e1e1e1 ${pt}%, #e1e1e1 100%)`}r.current&&(r.current.innerText=Ia(me)||"00:00"),m&&tt(me)},Wr=()=>{const Xe=ii().volume||1;if(t.volume=Xe,d==="one")return I();if(h){let pt=E.current;for(;pt===E.current;)pt=Math.floor(Math.random()*l.length);const xn=V(pt);return s(Pn({...xn,currentIndex:pt,song_in:p.song_in}))}return E.current===l.length-1&&(d==="all"?j.current=!1:j.current=!0),De()},To=()=>{var Io;if(!t)return;const me=i.current,Xe=t.duration;_(!0);const pt=ii(),xn=pt.current;if(S.current=Xe,me.innerText=Ia(Xe),T.current=(Io=n.current)==null?void 0:Io.offsetWidth,k.current=Xe-3,(!w.current||!xn)&&en("current",p),j.current){j.current=!1,s(sr({isWaiting:!1,isPlaying:!1}));return}if((G||w.current)&&(s(sr({isWaiting:!1,isPlaying:!1})),w.current)){if(w.current=!1,xn&&xn.id===p.id){t.currentTime=pt.duration||0,lt();return}console.log("play"),I()}I()},Iu=()=>{g(Math.random())};return f.useEffect(()=>{if(!t){console.log("Audio element is undefined in use control");return}return t.addEventListener("error",Iu),t.addEventListener("pause",D),t.addEventListener("playing",H),()=>{t.removeEventListener("error",Iu),t.removeEventListener("pause",D),t.removeEventListener("playing",H)}},[]),f.useEffect(()=>{v&&(w.current||p.name&&(l.length>1?(De(),q({message:"C li do ng truyn mng"})):s(sr({isWaiting:!1,isError:!0}))))},[v]),f.useEffect(()=>{if(!t||!p.name){s(sr({isWaiting:!1,isPlaying:!1}));return}return $(),s(sr({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=p.song_url,E.current=p.currentIndex,p.name&&(document.title=`${p.name} - ${p.singer}`),()=>{ee(),clearInterval(L.current),K.current=!0}},[p.id+p.song_in+p.currentIndex]),f.useEffect(()=>{if(!p.name)return;let me=`${p.name} - ${p.singer}`;!c&&y.name&&p.song_in.includes(y.id)&&(me=`${y.name}`),document.title=me},[c]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Wr),()=>t==null?void 0:t.removeEventListener("ended",Wr)},[d,h,p.song_in,l]),f.useEffect(()=>(t.addEventListener("timeupdate",lt),()=>t.removeEventListener("timeupdate",lt)),[m]),f.useEffect(()=>{O.current=o.content_code,c||lt()},[o]),f.useEffect(()=>{if(t)return G&&c&&$(),t.addEventListener("loadedmetadata",To),()=>{t.removeEventListener("loadedmetadata",To)}},[G,p.id,m]),f.useEffect(()=>(R.current=t.volume,c&&(L.current=setInterval(()=>{en("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(L.current)),[c]),{handleNext:De,handlePrevious:pe,handleSeek:ie,play:I,pause:$,isLoaded:x}}function TN({audioEle:t,admin:e,isOpenFullScreen:n}){const r=We(),{theme:i}=te(),{queueSongs:s}=Q(vi),{playStatus:{isPlaying:o,isRepeat:a,isShuffle:l,isError:c}}=Q(Vn),{currentSong:d}=Q(Ae),h=f.useRef(null),m=f.useRef(null),p=f.useRef(null),{handleNext:y,handlePrevious:x,handleSeek:_,play:v,pause:g,isLoaded:w}=LX({audioEle:t,isOpenFullScreen:n,admin:e,timelineRef:h,currentTimeRef:m,remainingTimeRef:p}),E=f.useCallback(()=>{o?g():v()},[o]),S=()=>{let k;switch(a){case"no":k="one";break;case"one":k="all";break;case"all":k="no";break;default:k="no"}en("isRepeat",k),r(sr({isRepeat:k}))},T=()=>{const k=!l;r(sr({isShuffle:k})),en("isShuffle",k)},b={button:"p-1",buttonsContainer:"w-full flex justify-between sm:justify-center items-center gap-x-[20px] ",progressContainer:`flex w-full flex-row items-center mb-2 ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${i.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-7",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${b.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{disabled:s.length<=1,className:`relative ${b.button} ${a!=="no"&&i.content_text}`,onClick:S,children:[u.jsx(AD,{className:b.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] font-playwriteCU top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:d.name&&(a==="one"?"1":a==="all"?"--":"")})]}),u.jsx("button",{disabled:s.length<=1,className:b.button,onClick:()=>x(),children:u.jsx(VD,{className:b.icon})}),u.jsx(Eb,{handlePlayPause:E}),u.jsx("button",{disabled:s.length<=1,className:`${b.button}`,onClick:()=>y(),children:u.jsx(xI,{className:b.icon})}),u.jsx("button",{disabled:s.length<=1,className:`${b.button} ${l&&i.content_text}`,onClick:T,children:u.jsx(MD,{className:b.icon})})]})}),u.jsxs("div",{className:`${b.progressContainer} ${c?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[36px]",children:t&&u.jsx("span",{ref:m,className:`${b.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:h,onClick:k=>_(k),className:`${b.processLineBase} ${!w&&"pointer-events-none"}  ${b.before}`}),u.jsx("div",{className:"w-[36px] text-right pl-[5px]",children:t&&u.jsx("span",{ref:p,className:b.duration,children:"00:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(Eb,{handlePlayPause:E})})]})]})}function Bb(t,e){const n=f.useRef(),[r,i]=f.useState(0),[s,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[s,Uc]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>i(Math.random()*10)}function FX({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,i]=f.useState(!1),{context:s,floatingStyles:o,refs:a}=xN({placement:t,open:e||r,onOpenChange:n||i,whileElementsMounted:nN,middleware:[KP(6)]}),l=EX(s),c=vN(s,{escapeKey:!1}),d=_N(s),{isMounted:h,styles:m}=AX(s,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:x})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[x]})}),{getFloatingProps:p,getReferenceProps:y}=wN([l,c,d]);return{isOpen:e||r,setIsOpen:n||i,getFloatingProps:p,getReferenceProps:y,floatingStyles:o,refs:a,context:s,styles:m,isMounted:h}}const IN=f.createContext(null),CN=()=>{const t=f.useContext(IN);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function ho({children:t,...e}){const n=FX({...e});return u.jsx(IN.Provider,{value:n,children:t})}function fo({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:i,refs:s,isOpen:o}=CN();return n&&f.isValidElement(t)?f.cloneElement(t,i({ref:s.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:s.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...i(r),children:t})}function mo({children:t,className:e,...n}){const{context:r,refs:i,getFloatingProps:s,floatingStyles:o,styles:a}=CN(),{isMounted:l,status:c}=EN(r);return u.jsx(u.Fragment,{children:l&&u.jsx(yN,{context:r,modal:!1,children:u.jsx("div",{ref:i.setFloating,className:`${e||"z-[20]"}`,style:{...o},...s(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function AN({audioEle:t}){const{theme:e,isOnMobile:n}=te(),r=We(),{playStatus:{lyricSize:i,songBackground:s,songImage:o}}=Q(Vn),a=c=>{r(sr({lyricSize:c})),en("lyricSize",c)},l={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${e.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-base text-[#ccc]"};return u.jsx(u.Fragment,{children:u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(xo,{variant:"default",color:"black",className:"space-y-[6px] text-white",theme:e,children:[u.jsxs("div",{className:l.itemContainer,children:[u.jsx("p",{className:l.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(X,{onClick:()=>a("small"),variant:"circle",size:"clear",className:`${i==="small"?e.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(X,{onClick:()=>a("medium"),variant:"circle",size:"clear",className:`${i==="medium"?e.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(X,{onClick:()=>a("large"),variant:"circle",size:"clear",className:`${i==="large"?e.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${l.itemContainer}`,children:[u.jsx("p",{className:l.text,children:"Song background"}),u.jsx(of,{size:"thin",className:"bg-white/10",active:s,cb:()=>r(_b({variant:"songBackground"}))})]}),!n&&u.jsxs("div",{className:`${l.itemContainer}`,children:[u.jsx("p",{className:l.text,children:"Song image"}),u.jsx(of,{size:"thin",className:"bg-white/10",active:o,cb:()=>r(_b({variant:"songImage"}))})]}),u.jsx(kN,{audioEle:t,variant:"mobile"})]})})})}function $X({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const i=We(),{theme:s}=te(),{currentSong:o}=Q(Ae),{queueSongs:a}=Q(vi),{playStatus:{songImage:l}}=Q(Vn),[c,d]=f.useState("Lyric"),h=f.useRef(null),m=f.useRef(null),p=f.useRef(null),y=yn();BP({bgRef:h,currentSong:o}),HG({containerRef:m,songItemRef:p,isOpenFullScreen:t,idle:n});const x=Bb(()=>g("next"),200),_=Bb(()=>g("previous"),200),v=(b,k)=>{o.id!==b.id&&i(Pn({...b,currentIndex:k,song_in:o.song_in}))},g=(b="next")=>{const k=m.current;k.style.scrollBehavior="smooth",b==="next"?k.scrollLeft+=500:b==="previous"&&(k.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{y(`/mysongs/edit/${o.id}`)},300)},E={button:`h-[35px] w-[35px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${s.content_hover_bg}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px]",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-120px)] relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${s.content_hover_bg}`,songNameSinger:"relative text-center",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},S=f.useMemo(()=>{if(o.id&&a.length)return a.map((b,k)=>{const R=k===o.currentIndex;return R?u.jsx(Rg,{ref:p,classNames:"active",hasTitle:!0,onClick:()=>v(b,k),active:R,data:b},k):u.jsx(Rg,{idleClass:`${!R&&n?E.fadeTransition:""}`,hasTitle:!0,active:R,data:b,onClick:()=>v(b,k)},k)})},[o,a,n]),T=u.jsxs("div",{className:E.lyricTabContainer,children:[l&&u.jsx(Rg,{active:!0,data:o}),u.jsx(PN,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:h,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:`${E.logo}`,src:e1,alt:""}),c==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]}),u.jsx(LN,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:b=>b}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!=="admin"&&c==="Lyric"&&u.jsxs(Ba,{placement:"bottom",children:[u.jsx(za,{onClick:()=>w(),className:`p-[8px] ${E.button}`,children:u.jsx(PG,{})}),u.jsx(Va,{children:"Lyric"})]}),u.jsxs(ho,{placement:"bottom-end",children:[u.jsx(fo,{className:`${E.button} p-[8px]`,children:u.jsx(CG,{})}),u.jsx(mo,{className:"z-[99]",children:u.jsx(AN,{audioEle:r})})]}),u.jsxs(Ba,{placement:"bottom",children:[u.jsx(za,{onClick:()=>e(!1),className:`p-[4px] ${E.button}`,children:u.jsx(wG,{})}),u.jsx(Va,{children:"Close"})]})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:m,className:`song-list-container ${E.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx(X,{hover:"scale",size:"clear",onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(LP,{className:"w-[30px]"})}),u.jsx(X,{hover:"scale",size:"clear",onClick:()=>x(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(kG,{className:"w-[30px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:T}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&c==="Lyric"&&!n&&u.jsxs("p",{className:`pt-[20px] ${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]})]})}const BX=f.memo($X),zX="/HD-MP3/assets/tutorial1-1bb11af6.png",VX="/HD-MP3/assets/tutorial2-2363d450.png";function RN({audioRef:t,theme:e,song:n,admin:r,lyric:i}){const{userSongs:s,setUserSongs:o}=at(),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(i?i.base:""),[p,y]=f.useState([]),[x,_]=f.useState(i?i.real_time:[]),[v,g]=f.useState(!1),[w,E]=f.useState(1),[S,T]=f.useState(!1),[b,k]=f.useState(""),[R,O]=f.useState(x?x.length:0),[j,K]=f.useState(h||""),[L,B]=f.useState(!1),q=f.useRef(!0),G=f.useRef(null),fe=f.useRef(0),I=f.useRef(0),$=f.useRef("smooth"),{setSuccessToast:V,setErrorToast:D}=vn(),H=yn(),ee=f.useMemo(()=>x.length>=p.length,[p,x,c]),ie=f.useMemo(()=>x.length===p.length-1,[p,x,c]),De=f.useMemo(()=>c&&!!p.length&&!ee,[ee,p,c]),pe=()=>k(""),tt=f.useMemo(()=>!!p.length,[p]),lt=()=>{const oe=t.current;oe&&(oe.play(),l(!0),d(!0))},Wr=()=>{const oe=t.current;oe&&(oe.pause(),l(!1))},To=oe=>{const be=t.current;be&&(be.playbackRate=oe,E(oe)),g(!1)},Iu=()=>{m(j),pe()},me=oe=>{const be=t.current;be&&(be.currentTime=oe)},Xe=f.useCallback(()=>{if(!p.length)return;const oe=t.current;if(!oe||ee||I.current==+oe.currentTime.toFixed(1))return;ie?fe.current=+oe.duration.toFixed(1):fe.current=+oe.currentTime.toFixed(1);const be=p[R],Au={start:I.current,text:be,end:fe.current};I.current=fe.current,_([...x,Au]),O(R+1)},[p,R]),pt=()=>{if(R<=0)return;if(t.current){I.current=x[R-1].start,fe.current=0;const be=x.slice(0,R-1);_(be),O(R-1)}},xn=oe=>{const be=[...s],Au=M6(oe,be);if(Au==null){D({message:"No song found"}),T(!1);return}return o(be),console.log("setActuallySongs"),Au},Io=async()=>{try{T(!0),Wr(),await Yn({collection:"lyrics",data:{real_time:x,base:h},id:n.id}),await Yn({collection:"songs",data:{lyric_id:n.id},id:n.id}),V({message:"Add lyrics successful"}),B(!1)}catch(oe){console.log({message:oe})}finally{T(!1)}},al=async()=>{try{T(!0),await Yn({collection:"songs",data:{lyric_id:""},id:n.id}),await Vc({collection:"lyrics",id:n.lyric_id}),V({message:"Delete lyric successful"});const oe={...n,lyric_id:""};if(!xn(oe))return;tp()}catch(oe){console.log(oe)}finally{T(!1)}},Cu=()=>{Wr(),Xe()},s1=oe=>{const be=t.current;oe==="next"?be.currentTime+=2:be.currentTime-=2},VN=()=>{L?k("confirm-navigate"):tp()},tp=()=>H(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(h){const oe=h.split(/\r?\n/).filter(be=>be);y(oe)}p.length&&q.current&&(q.current=!1),console.log("check firstTimeRender",q.current)},[h]),f.useEffect(()=>{const oe=t.current;if(oe){if(x.length){const be=x[x.length-1].end;oe&&(oe.currentTime=be,I.current=be)}return oe.addEventListener("ended",Cu),()=>{oe.removeEventListener("ended",Cu)}}},[]),f.useEffect(()=>{if(!L){if(!i){B(!0);return}(i.real_time!==x||i.base!=h)&&B(!0)}},[h,x]),f.useEffect(()=>{if(!L)return;const oe=be=>{be.preventDefault()};return window.addEventListener("beforeunload",oe),()=>{window.removeEventListener("beforeunload",oe)}},[L]);const UN=`${e.type==="light"?"text-[#333]":"text-white"}`,Oe={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:oe=>oe?e.content_bg:`bg-${e.alpha}`},WN=f.useMemo(()=>{switch(b){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(_s,{title:"Tutorial",close:pe}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phm chc nng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:VX,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cch thm li bi ht:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:zX,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:G,value:j,onChange:oe=>K(oe.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(X,{variant:"primary",onClick:Iu,className:Oe.button,children:"Ok"})]});case"delete-lyric":return u.jsx($r,{loading:S,label:"Delete playlist ?",theme:e,callback:al,close:pe});case"confirm-navigate":return u.jsx($r,{loading:S,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:tp,close:pe})}},[b,j]),HN=u.jsxs("div",{className:`${Oe.ctaContainer} ${UN}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>k("add-base-lyric"),className:Oe.button,children:h?"Change lyric":"Add lyric"}),u.jsxs(ho,{isOpenFromParent:v,setIsOpenFromParent:g,placement:"bottom-start",children:[u.jsxs(fo,{className:`${Oe.button} ${Oe.changeSpeedBtn}`,children:[w,"x"]}),u.jsx(mo,{children:u.jsx(xo,{variant:"thin",theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(X,{variant:"circle",onClick:()=>To(1),className:`${Oe.getActiveClass(w===1)} ${Oe.listItem}`,children:"1x"}),u.jsx(X,{variant:"circle",onClick:()=>To(1.2),className:`${Oe.getActiveClass(w===1.2)} ${Oe.listItem}`,children:"1.2x"}),u.jsx(X,{variant:"circle",onClick:()=>To(1.5),className:`${Oe.getActiveClass(w===1.5)} ${Oe.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(X,{variant:"primary",onClick:Wr,className:Oe.button+(c?"":Oe.disable),children:"Pause"}):u.jsx(X,{variant:"primary",onClick:lt,className:Oe.button+(a||!tt?Oe.disable:""),children:"Play"}),u.jsx(X,{variant:"primary",onClick:Xe,className:Oe.button+(!De&&Oe.disable),children:u.jsx($i,{className:"w-[16px]"})}),u.jsx(X,{variant:"primary",onClick:pt,className:Oe.button+(!x.length||!p.length?Oe.disable:""),children:u.jsx(EI,{className:"w-[16px]"})}),u.jsxs(X,{variant:"primary",onClick:()=>s1("prev"),className:Oe.button+(!c||!p.length?Oe.disable:""),children:[u.jsx(XD,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(X,{variant:"primary",onClick:()=>s1("next"),className:Oe.button+(!c||!p.length?Oe.disable:""),children:["2s",u.jsx(JD,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>k("tutorial"),children:u.jsx(ZO,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${S?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:VN,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(iO,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),HN,u.jsxs("div",{className:`${Oe.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:Oe.lyricBox+"w-[50%]",children:p.length?u.jsx(u.Fragment,{children:p.map((oe,be)=>u.jsx(FP,{inUpload:!0,scrollBehavior:$,className:"pb-[30px] leading-[1.2] mr-[24px]",active:be===R,done:be!=R,children:oe},be))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:Oe.lyricBox+" border-none w-[50%]",children:!!(x!=null&&x.length)&&x.map((oe,be)=>u.jsx(aK,{handleSetTime:me,lyric:oe,theme:e,index:be,realTimeLyrics:x,setRealTimeLyrics:_},be))})]}),u.jsx(X,{className:`${e.content_bg} ${L?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:Io,children:"Save"}),u.jsx(X,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>k("delete-lyric"),children:"Delete"}),!!b&&u.jsx(Ur,{closeModal:pe,classNames:"w-[700px] max-w-[calc(100vw-40px)]",children:WN})]})}const PN=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:i}}=Q(Vn),[s,o]=f.useState(0),a=f.useRef("instant"),l=f.useRef(null),{currentSong:c}=Q(Ae),d=f.useRef(0),{loading:h,songLyric:m}=VG({audioEle:t,isOpenFullScreen:n}),p=f.useCallback(()=>{const v=t.currentTime;if(o(v),Math.abs(v-d.current)>5){a.current="instant",d.current=v;return}d.current=v},[]),y={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},x=()=>m.real_time.map((v,g)=>{const E=s>=v.start-.5&&s<v.end-.5;return u.jsx(FP,{done:!E&&s>v.end-.5,active:E,scrollBehavior:a,className:`${y[i||"medium"]} ${E?"active":""} mb-[30px]`,children:v.text},g)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",p),()=>{t&&t.removeEventListener("timeupdate",p)}},[]),f.useEffect(()=>{const v=document.querySelector(".active.lyric");v&&v.scrollIntoView({behavior:"instant",block:"center"})},[r]),f.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[20px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${_.container} ${e||""}`,children:[h&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(is,{className:_.loadingIcon})})}),!h&&u.jsx(u.Fragment,{children:m.real_time.length?x():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},UX=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=We(),{currentSong:i}=Q(Ae),{playStatus:{isPlaying:s,isError:o,isWaiting:a}}=Q(Vn),{userSongs:l}=at(),{theme:c}=te(),d=$n(),h=f.useMemo(()=>d.pathname.includes("edit"),[d]),m=()=>{t==null||t.play()},p=()=>{t==null||t.pause()},y=()=>{s?p():m()},x=()=>{let g=i.currentIndex+1,w;g<l.length?w=l[g]:(w=l[0],g=0),r(Pn({...w,currentIndex:g,song_in:i.song_in}))},_=f.useMemo(()=>a?u.jsx(is,{className:"w-[36px] animate-spin"}):o&&i.name?u.jsx(Hv,{className:"w-[36px] "}):s?u.jsx(Df,{className:"w-[36px] "}):u.jsx(qv,{className:"w-[36px]"}),[a,o,s]),v={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[46px] h-[46px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${v.wrapper} ${h?"translate-y-full":""}`,children:[u.jsx("div",{className:`${v.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:v.songImageWrapper,children:[u.jsx("div",{className:v.image,children:u.jsx(yi,{src:i.image_url||e1,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:i.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] relative overflow-hidden",children:u.jsx("div",{className:"absolute left-0 whitespace-nowrap font-playwriteCU leading-[1.5]",children:i.name||"name"})}),u.jsx("p",{className:"text-[14px] opacity-70 line-clamp-1",children:i.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${v.cta} ${!i.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>y(),children:_}),u.jsx("button",{onClick:x,className:" p-[4px]",children:u.jsx(xI,{className:"w-[35px]"})})]})]})]})};function WX({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};f.useEffect(()=>{e()},[t])}function HX(){const[t,e]=f.useState(!1);return f.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function qX({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=We(),{theme:i}=te(),{currentSong:s}=Q(Ae),{playStatus:{isPlaying:o}}=Q(Vn),{queueSongs:a}=Q(vi),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),m=f.useRef(null),p=f.useRef(null),y=f.useRef(null),x=f.useRef(null);WX({isOpenFullScreen:e}),BP({bgRef:p,currentSong:s});const{isLandscape:_}=HX(),v=b=>{let k=0,R=b.parentElement;for(;!R.classList.contains("item-container")&&k<5;)R=R.parentElement,k++;return R},g={opacity:"0"},w=b=>{let k=0,R=b.previousElementSibling;for(;R&&k<100;)Object.assign(R.style,g),k++,R=R.previousElementSibling},E=(b,k,R)=>{const O=b.target,j=v(O);w(j),Object.assign(j.style,g),setTimeout(()=>{r(Pn({...k,currentIndex:R,song_in:s.song_in}))},250)},S=f.useMemo(()=>u.jsx(u.Fragment,{children:s&&u.jsx(u.Fragment,{children:s.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((b,k)=>{if(k>s.currentIndex)return u.jsx(S2,{theme:i,data:b,onClick:R=>E(R,b,k),active:!1},k)})})})}),[s,a]);f.useEffect(()=>{const b=m.current;b&&(e?(b.style.transform="translate(0)",b.style.zIndex="99"):(b.style.transform="translate(0, 100%)",setTimeout(()=>{b.style.zIndex="-10"},500)))},[e]);const T={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[120px] py-[16px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsx(u.Fragment,{children:u.jsxs("div",{ref:m,className:"fixed inset-0 bg-zinc-900 text-white overflow-hidden   transition-[transform] duration-[.5s] ease-linear",children:[u.jsx("div",{ref:p,className:T.bgImage}),u.jsx("div",{className:T.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:T.headerWrapper,children:u.jsxs("div",{className:T.header,children:[u.jsxs(ho,{placement:"bottom-start",children:[u.jsx(fo,{className:`${T.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(vI,{className:"w-[20px]"})}),u.jsx(mo,{children:u.jsx(AN,{audioEle:t})})]}),u.jsx(LN,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:c,activeTab:l,render:b=>b,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${T.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(tO,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:y,className:T.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||_?"flex":""}`,children:[f.useMemo(()=>u.jsx(hQ,{active:l==="Playing"&&!_,data:s}),[s,o,l,_]),u.jsx("div",{className:`${T.nameAndSinger} ${l!="Playing"||_?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:"h-[34px]",children:u.jsx(ff,{autoScroll:!0,className:`${l==="Playing"||_?"text-lg":"text-base"} leading-[1.5] font-playwriteCU`,content:s.name||"..."})}),u.jsx("div",{className:"h-[33px]",children:u.jsx(ff,{autoScroll:!0,className:`opacity-60 ${l==="Playing"||_?"text-[22px]":"text-[16px]"}`,content:s.singer||"..."})})]})})]}),u.jsx("div",{ref:x,className:`${T.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(PN,{active:l==="Lyric",className:"h-[100%]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,_])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:S})]})}),u.jsx("div",{className:`${T.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"h-[120px]",children:f.useMemo(()=>u.jsx(TN,{audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]})})}function GX(){const{theme:t}=te(),{loading:e,user:n}=mt(),{logIn:r}=bu(),i=async()=>{try{await r()}catch(o){console.log(o)}finally{}},s={icon:"w-6 h-6 mr-2 inline",linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Library"}),u.jsx("div",{className:"flex flex-col space-y-3 items-start ",children:e?[...Array(3).keys()].map(()=>g2):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(Gp,{className:s.linkItem,to:Nt.MySongs,icon:u.jsx(Sa,{className:s.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(Ap,{className:"w-5 h-5 text-gray-500"})}),u.jsx(Gp,{className:s.linkItem,to:Nt.MySongs,icon:u.jsx(wI,{className:s.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(Ap,{className:"w-5 h-5 text-gray-500"})}),u.jsx(Gp,{className:s.linkItem,to:Nt.MySongs,icon:u.jsx(yI,{className:s.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(Ap,{className:"w-5 h-5 text-gray-500"})})]}):u.jsxs(X,{onClick:i,className:`${t.content_bg} rounded-md space-x-1`,children:[u.jsx(Wv,{className:"w-6"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2] text-sm",children:"Login"})]})})})]})}function KX(){const{theme:t}=te(),{loading:e,user:n}=mt(),{logOut:r}=bu(),[i,s]=f.useState(""),o=()=>s(""),a=async()=>{try{await r()}catch(d){console.log("signOut error",{messsage:d})}finally{o()}},l=f.useMemo(()=>{switch(i){case"theme":return u.jsx($N,{close:o});case"info":return u.jsx(i1,{close:o});case"logout":return u.jsx($r,{close:o,callback:a,loading:!1,theme:t,label:"Log out ?"})}},[i]),c={linkItem:`py-[10px] w-full border-b border-${t.alpha} space-x-2 last:border-none flex items-center`,icon:"w-6"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Setting"}),n&&u.jsxs("div",{className:`bg-${t.alpha} p-3 rounded-md flex mb-2`,children:[u.jsx(Wy,{className:"h-[65px] w-[65px]"}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-lg font-[500]",children:n?n.display_name:"Guest"}),u.jsx("p",{className:"opacity-70 font-[500]",children:"Vip member "})]})]}),e?[...Array(3).keys()].map(()=>g2):u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:c.linkItem,onClick:()=>s("theme"),children:[u.jsx(SI,{className:c.icon}),u.jsx("span",{children:"Theme"})]}),u.jsxs("button",{className:c.linkItem,onClick:()=>s("info"),children:[u.jsx(_I,{className:c.icon}),u.jsx("span",{children:"Info"})]}),n&&u.jsxs("button",{className:c.linkItem,onClick:()=>s("logout"),children:[u.jsx(Wv,{className:c.icon}),u.jsx("span",{children:"Logout"})]})]})]}),i&&u.jsx(Ur,{closeModal:o,children:l})]})}const Ur=({children:t,closeModal:e,classNames:n})=>{const{theme:r}=te();return u.jsx(u.Fragment,{children:qa.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e()},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(xo,{className:n||"",theme:r,children:t})})]}),document.getElementById("portals"))})};function XX({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=We(),{theme:r}=te(),{user:i}=mt(),{queueSongs:s}=Q(vi),{currentSong:o}=Q(Ae),[a,l]=f.useState("Queue"),c=f.useCallback((m,p)=>{p!==o.currentIndex&&n(Pn({...m,currentIndex:p}))},[o]),d=f.useCallback(()=>{e(!1),n(CP()),n(lo()),en("duration",0)},[]);f.useEffect(()=>{i&&(i.email||(e(!1),l("Queue")))},[i]),f.useEffect(()=>{setTimeout(()=>{t||l("Queue")},1e3)},[t]);const h={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] flex flex-col bottom-[80px] right-[0] top-[0] z-20 px-3 pt-4 ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`,songListContainer:"flex-grow overflow-y-auto pb-[10px] overflow-x-hidden no-scrollbar"};return u.jsxs("div",{className:`${h.textColor} ${h.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsx("div",{className:"leading-[2.2] font-playwriteCU mb-2",children:"Song queue"}),u.jsx("div",{className:h.songListContainer,children:a==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(ps,{variant:"queue",songs:s,handleSetSong:c}),u.jsx("div",{className:"text-center",children:!!s.length&&u.jsxs(X,{onClick:d,size:"small",className:`${r.content_bg} rounded-full my-5 space-x-1`,children:[u.jsx(yc,{className:"w-6"}),u.jsx("span",{className:"font-playwriteCU text-sm leading-[2.2]",children:"Clear"})]})})]})})]})}const QX=f.memo(XX);function YX(t,e,n){const{currentSong:r}=Q(Ae),[i,s]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{s(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},m=async()=>{if(!n)return;const p=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(p&&y){const x=UP(p,y,!0);let _=Uc.focusDelay;x||(_=0),l.current=setTimeout(()=>{s(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(c.current=setTimeout(()=>{m()},t),()=>{h()}),[o]),n?i:!1}const NN=({admin:t})=>{const{currentSong:e}=Q(Ae),{isOnMobile:n}=te(),[r,i]=f.useState(!1),[s,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=YX(Uc.focusDelay,n,r),h=u.jsxs(u.Fragment,{children:[!t&&u.jsx(BX,{audioEle:c.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:i}),u.jsx(QX,{isOpenSongQueue:s,setIsOpenSongQueue:o}),u.jsx(jX,{admin:t,audioEle:c.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:s,setIsOpenSongQueue:o,setIsOpenFullScreen:i})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(qX,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:i}),u.jsx(UX,{audioEle:c.current,idle:d&&r,isOpenFullScreen:r,setIsOpenFullScreen:i})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:e.song_url,className:"hd-mp3 hidden"}),a?n?m:h:""]})},t1="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Uy=({data:t,inDetail:e,theme:n,active:r,link:i})=>{const s={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:s.imageContainer,children:[u.jsx(yi,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${s.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:s.overlay}),r&&u.jsx("div",{className:s.buttonWrapper,children:u.jsx("img",{src:t1,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(Qi,{to:`${i||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[20px] font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function JX({content:t,className:e}){const n=f.useRef(null),r=f.useRef(null);return qG({textRef:r,textWrapperRef:n,content:t}),u.jsx("div",{ref:n,className:"overflow-hidden relative h-full ",children:u.jsx("div",{ref:r,className:`absolute left-0 whitespace-nowrap ${e}`,children:t||"..."})})}const ff=f.memo(JX);function DN({setIsOpenModal:t}){const{theme:e}=te(),n=We(),r=l=>{t(l)},[i,s]=zP("isCrossFade",!1),o=()=>{s(!i),n(sr({isCrossFade:!i}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-[4px] font-[500] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(xo,{variant:"thin",color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(qv,{className:a.icon}),"Cross fade"]}),u.jsx(of,{active:i,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(SI,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(_I,{className:a.icon}),"Info"]})]})})})}function ZX({className:t}){const[e,n]=f.useState(!1),{theme:r}=te(),i=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},s=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",i),()=>{o.removeEventListener("scroll",i)}},[]),u.jsx(X,{onClick:s,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(hG,{className:"w-full"})})}function eQ(){const t=We(),{theme:e}=te(),{user:n,loading:r}=mt(),{resetSongPlaylistStore:i}=at(),s=$n(),o=yn(),a=()=>{t(lo()),t(Kw()),i()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(h=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(bt,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(bt,{className:"w-[80px] h-[19px] ml-[5px]"})]},h)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[600] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full font-playwriteCU  border-l-[4px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center justify-center",children:u.jsxs(Qi,{to:"/",className:"text-[24px] font-bold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(Qi,{className:`${d.menuItem} ${s.pathname==="/"?d.activeMenu:"border-transparent"}`,to:Nt.Home,children:u.jsxs(X,{className:d.button,children:[u.jsx(CO,{className:d.icon}),"Discover"]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(Qi,{className:`${d.menuItem}  ${s.pathname.includes("mysongs")?d.activeMenu:"border-transparent"}`,to:Nt.MySongs,children:u.jsxs(X,{className:d.button,children:[u.jsx(Sa,{className:d.icon}),"My Song"]})}),n.role==="ADMIN"&&u.jsxs(X,{onClick:l,className:`${d.menuItem} ${d.button} border-transparent`,children:[u.jsx(gO,{className:d.icon}),"Dashboard"]})]})]})]}),u.jsx(ZX,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function tQ({contentRef:t}){const{theme:e}=te(),[n,r]=f.useState(0),[i,s]=Su(us),[o,a]=f.useState(""),{logOut:l,logIn:c}=bu(),d=()=>a(""),h=async()=>{try{await l()}catch(v){console.log("signOut error",{messsage:v})}finally{d()}},m=async()=>{try{const v=document.querySelector(".login-trigger");await c(),v&&v.click()}catch(v){console.log(v)}},p=()=>{var g;const v=((g=t.current)==null?void 0:g.scrollTop)||0;r(v)},y=u.jsx(bt,{className:"w-[35px] h-[35px] rounded-full"}),x=f.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx($N,{close:d});case"info":return u.jsx(i1,{close:d});case"confirm":return u.jsx($r,{close:d,callback:h,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);f.useEffect(()=>{var v;return(v=t.current)==null||v.addEventListener("scroll",p),()=>{document.removeEventListener("scroll",p)}},[]);const _={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[35px] w-[35px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(ho,{placement:"bottom-end",children:[u.jsx(fo,{className:`flex px-[6px] items-center ${_.button} bg-${e.alpha} ${e.content_hover_bg}`,children:u.jsx(pI,{className:"w-full"})}),u.jsx(mo,{children:u.jsx(DN,{setIsOpenModal:a,loggedIn:!1})})]}),u.jsxs(ho,{placement:"bottom-end",children:[u.jsx(fo,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:s?y:u.jsx(Wy,{})}),u.jsx(mo,{children:u.jsx(xo,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[i&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Wy,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:i==null?void 0:i.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(Wv,{className:_.icon}),"Log out"]})]}),!i&&u.jsxs("button",{className:`${_.menuItem}`,onClick:m,children:[u.jsx(TD,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsx(Ur,{closeModal:d,children:x})]})}function nQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const rQ=f.forwardRef(nQ),iQ=rQ;function sQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const oQ=f.forwardRef(sQ),aQ=oQ;function gd({song:t,closeMenu:e,...n}){const r=We(),{user:i}=mt(),{theme:s,isOnMobile:o}=te(),{setSuccessToast:a}=vn(),{userPlaylists:l}=at(),c=()=>{r(Gw({songs:[t]})),e(),a({message:"Song added to queue"})},d={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${s.alpha} font-[500] ${s.content_hover_text} max-[549px]:!bg-transparent pl-[8px] rounded-[4px]`,menuIcon:"w-[18px] mr-[10px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},h=f.useMemo(()=>{if(!i)return u.jsx(u.Fragment,{});switch(n.variant){case"home":case"my-songs":case"dashboard-songs":return o?u.jsxs(X,{className:`group relative ${d.menuItem}  ${s.content_hover_text} ${d.before}`,variant:"list",onClick:()=>n.handleOpenModal("add-to-playlist"),children:[u.jsx(gh,{className:d.menuIcon}),"Add to playlist"]}):u.jsxs(X,{className:`group/add-playlist hover:!brightness-100 relative ${d.menuItem}  ${s.content_hover_text} ${d.before}`,variant:"list",children:[u.jsx(gh,{className:d.menuIcon}),"Add to playlist",u.jsx(xo,{variant:"thin",className:`${d.level2Menu} z-[99] 
                  
                     `,color:"sidebar",theme:s,children:u.jsx("ul",{className:"w-full",children:l!=null&&l.length?u.jsx(u.Fragment,{children:l.map((y,x)=>{const _=y.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!_&&n.handleAddSongToPlaylist(y),className:`list-none w-full flex rounded-[4px] p-[5px] ${_&&"opacity-60 pointer-events-none"} ${d.menuItem}`,children:[u.jsx("span",{children:u.jsx(Sa,{className:d.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[y.name," ",_&&"(Added)"]})]},x)})}):u.jsx("p",{children:"No playlist jet..."})})})]})}},[l]),m=f.useMemo(()=>{switch(n.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(X,{onClick:c,className:` ${d.menuItem}`,variant:"list",children:[u.jsx($i,{className:d.menuIcon}),"Add to queue"]}),h]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(X,{className:d.menuItem,variant:"list",onClick:n.handleRemoveSongFromPlaylist,children:[u.jsx(k_,{className:d.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[n.variant!=="dashboard-songs"&&u.jsxs(X,{onClick:c,className:` ${d.menuItem}`,variant:"list",children:[u.jsx($i,{className:d.menuIcon}),"Add to queue"]}),h,u.jsxs(X,{onClick:()=>n.handleOpenModal("edit"),className:` ${d.menuItem} `,variant:"list",children:[u.jsx(pI,{className:d.menuIcon}),"Edit"]}),u.jsx(Qi,{to:`edit/${t.id}`,children:u.jsxs(X,{className:` ${d.menuItem} `,variant:"list",children:[u.jsx(xO,{className:d.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(X,{onClick:()=>n.handleOpenModal("delete"),className:` ${d.menuItem} `,variant:"list",children:[u.jsx(yc,{className:d.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(X,{onClick:n.handleRemoveSongFromQueue,className:` ${d.menuItem}`,variant:"list",children:[u.jsx(k_,{className:d.menuIcon}),"Remove"]}),h]})}},[n]),p=f.useMemo(()=>{switch(n.variant){case"queue":return u.jsx(u.Fragment,{});default:return u.jsxs("div",{className:"pl-[10px] py-[6px]",children:[u.jsx("h5",{className:"line-clamp-1 font-[500]",children:t.name}),u.jsx("p",{className:"text-[14px] opacity-50 line-clamp-1",children:t.singer})]})}},[t]);return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${n.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[p,m,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${d.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(SD,{className:"w-[18px] mr-[10px]"}),"Download"]}),n.variant!=="queue"&&!o&&u.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}const ON={isChecked:!1,isSelectAll:!1,selectedSongs:[]},lQ=(t,e)=>{switch(e.type){case 0:{const{song:n}=e.payload,r=[...t.selectedSongs],i=r.findIndex(s=>s.id===n.id);return i===-1?r.push(n):r.splice(i,1),{...t,selectedSongs:r,isChecked:!!r.length}}case 2:return ON;case 3:return t;case 4:{const{songs:n}=e.payload;return{...t,selectedSongs:n,isChecked:!0,isSelectAll:!0}}}return t},cQ=()=>{const[t,e]=f.useReducer(lQ,ON),n=f.useCallback(()=>{e({type:3})},[]),r=f.useCallback(()=>{e({type:2})},[]),i=f.useCallback(o=>{e({type:0,payload:{song:o}})},[]),s=f.useCallback(o=>{e({type:4,payload:{songs:o}})},[]);return{state:t,setChecked:n,selectSong:i,selectAll:s,resetSelect:r}},uQ={state:{isChecked:!1,isSelectAll:!1,selectedSongs:[]},resetSelect:()=>{},selectAll:()=>{},selectSong:()=>{},setChecked:()=>{}},jN=f.createContext(uQ),n1=()=>{const t=f.useContext(jN),{state:{...e},...n}=t;return{...e,...n}};function ep({children:t}){return u.jsx(jN.Provider,{value:cQ(),children:t})}function yd({song:t,onClick:e,active:n=!0,index:r,className:i,...s}){const o=We(),{theme:a,isOnMobile:l}=te(),{user:c}=mt(),{isChecked:d,selectedSongs:h,selectSong:m}=n1(),{userPlaylists:p}=at(),[y,x]=f.useState(!1),[_,v]=f.useState(!1),[g,w]=f.useState(""),{setErrorToast:E}=vn(),S=()=>w(""),T=()=>v(!1),{handleDeleteSong:b,handleAddSongToPlaylistMobile:k,handleAddSongToPlaylist:R,handleRemoveSongFromPlaylist:O,loading:j}=GG({song:t,closeModal:S,setIsOpenPopup:v}),K=lt=>{w(lt),T()},L=f.useMemo(()=>h?h.indexOf(t)!=-1:!1,[h]),B=f.useMemo(()=>c?c.like_song_ids.includes(t.id):!1,[c==null?void 0:c.like_song_ids,t]),q=()=>{r!==void 0&&o(Gq({index:r}))},G=async()=>{if(c)try{}catch(lt){console.log(lt),E({message:"Error when liked song"})}finally{x(!1)}},fe=lt=>{d!==void 0&&m(lt)},I={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b 
    border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${s.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},$=()=>{switch(s.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${I.songListButton}`,children:u.jsx(Sa,{className:"w-[18px]"})});default:return l?u.jsx("button",{onClick:()=>fe(t),className:`${I.songListButton} text-[inherit]`,children:L?u.jsx($y,{className:"w-[18px]"}):u.jsx(gc,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>fe(t),className:`${I.songListButton} ${!L&&"hidden"} group-hover/main:block`,children:L?u.jsx($y,{className:"w-[18px]"}):u.jsx(gc,{className:"w-[18px]"})}),u.jsx("button",{className:`${I.songListButton} ${L&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:u.jsx(Sa,{className:"w-[18px]"})})]})}},V=f.useMemo(()=>{switch(s.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:`${I.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:t1,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(aQ,{className:"w-[24px] text-white"})})})}},[n,e]),D=u.jsxs(u.Fragment,{children:[$(),u.jsxs("div",{className:"flex-grow flex",onClick:l&&s.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${I.imageFrame}`,children:[u.jsx(yi,{src:t.image_url,blurHashEncode:t.blurhash_encode}),V]}),u.jsxs("div",{className:`ml-[10px]  ${s.variant==="queue",""}`,children:[u.jsx("h5",{className:`line-clamp-1 font-medium overflow-hidden ${s.variant==="queue"?"text-sm":"text-base"}`,children:t.name}),u.jsx("p",{className:"text-sm opacity-[.7] line-clamp-1",children:t.singer})]})]})]}),H=()=>{switch(s.variant){case"uploading":return u.jsx("div",{className:"opacity-[.7]",children:D});case"queue":return D;default:return u.jsx("div",{className:"flex flex-grow",children:D})}},ee=f.useMemo(()=>{if(y)return u.jsx(is,{className:"w-[20px] animate-spin"});switch(s.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return c?u.jsxs("button",{onClick:G,className:`${I.button} max-[549px]:!bg-transparent group`,children:[u.jsx(iQ,{className:`w-[20px]  ${B?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(wI,{className:`w-[20px] ${B?"hidden group-hover:block":"block group-hover:hidden"}`})]}):u.jsx(u.Fragment,{})}},[G,B]),ie=f.useMemo(()=>{switch(s.variant){case"home":case"dashboard-songs":return u.jsx(gd,{closeMenu:T,variant:s.variant,handleAddSongToPlaylist:R,handleOpenModal:K,song:t});case"my-songs":case"favorite":return u.jsx(gd,{closeMenu:T,variant:"my-songs",handleAddSongToPlaylist:R,handleOpenModal:K,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(gd,{closeMenu:T,variant:"playlist",handleRemoveSongFromPlaylist:O,handleOpenModal:K,song:t});case"queue":return u.jsx(gd,{closeMenu:T,handleRemoveSongFromQueue:q,variant:"queue",handleOpenModal:K,song:t});default:return u.jsx(u.Fragment,{})}},[s.variant,t,_]),De=f.useMemo(()=>{switch(g){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(sK,{close:S,song:t});case"delete":return u.jsx($r,{loading:j,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:b,close:S});case"add-to-playlist":return u.jsx(vQ,{loading:j,handleAddSongToPlaylist:k,close,song:t,userPlaylists:p})}},[g,j]),pe=()=>{switch(s.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(is,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:I.ctaWrapper,children:[ee,u.jsxs("div",{className:I.menuBtnWrapper,children:[u.jsxs(ho,{isOpenFromParent:_,setIsOpenFromParent:v,placement:s.variant==="queue"?"bottom-end":"left",children:[u.jsx(fo,{asChild:!0,children:u.jsx("button",{className:`block group-hover/main:block ${I.button} ${_||s.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(pG,{className:"w-[20px]"})})}),u.jsx(mo,{children:u.jsxs(xo,{className:`${j?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:a,children:[ie,j&&u.jsx("div",{className:I.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] font-[500] hidden  group-hover/main:hidden ${_||s.variant==="queue"?"hidden":"md:block"}`,children:Ia(t.duration)})]})]})}},tt=()=>{switch(s.variant){case"uploading":return u.jsxs("div",{className:`${I.itemContainer} ${i||""} `,children:[H(),pe()]});case"queue":return u.jsxs("div",{className:`${I.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[H(),pe()]});default:return u.jsxs("div",{className:`${I.itemContainer} ${i||""} 
               group/main ${n||L?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}
               `,children:[H(),pe()]})}};return u.jsxs(u.Fragment,{children:[tt(),g&&u.jsx(Ur,{closeModal:S,children:De})]})}const dQ=({data:t,active:e,onClick:n,hasTitle:r,classNames:i,idleClass:s},o)=>{const{theme:a}=te(),l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:o,className:`${l.container} ${s||""}`,children:[u.jsx("div",{className:`song-thumb ${i??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(yi,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(X,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:`h-[50px] w-[50px] ${a.content_hover_text}`,children:u.jsx(Df,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:t1,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Rg=f.forwardRef(dQ);function hQ({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(yi,{src:t.image_url,classNames:"w-full"})})})}function ps({songs:t,...e}){const{theme:n}=te(),{currentSong:r}=Q(Ae),{queueSongs:i}=Q(vi),s=f.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(yd,{variant:"uploading",className:"temp-song",...d}):u.jsx(yd,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... \\_()_/"}),a=f.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,h)=>{let m=c&&r.id===d.id;e.variant==="queue"&&(m=m&&r.currentIndex===h);const p=r.currentIndex===i.length-1;return e.variant==="queue"&&m&&!p?u.jsxs("div",{children:[u.jsx(yd,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h}),u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+h):u.jsx(yd,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h},d.id+d.name.length+h)})},[r,e,i,n]);return u.jsxs(u.Fragment,{children:[a,s]})}function _l({children:t,...e}){const{isSelectAll:n,resetSelect:r}=n1();switch(e.variant){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(X,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(js,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?u.jsx($y,{className:"w-[20px]"}):u.jsx(gc,{className:"w-[20px]"})}),t,u.jsx(X,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(js,{className:"w-[20px]"})})]})}}function qc({children:t,...e}){const n=We(),{theme:r}=te(),{user:i}=mt(),{isChecked:s,selectedSongs:o,selectAll:a,resetSelect:l}=n1(),{playlistSongs:c}=Q(xi),{userSongs:d,setUserSongs:h}=at(),[m,p]=f.useState(!1),[y,x]=f.useState(""),{setErrorToast:_,setSuccessToast:v}=vn(),{deleteSongsFromPlaylist:g,isFetching:w}=ko(),E=()=>{x("")},S=()=>{o.length<d.length?a(d):l()},T=()=>{o.length<c.length?a(c):l()},b=()=>{n(Gw({songs:o})),v({message:"songs added to queue"}),l()},k=async()=>{if(i)try{p(!0);const L=o.map(q=>q.id);for(let q of o)await jP(q);const B=d.filter(q=>!L.includes(q.id));h(B),v({message:`${o.length} songs deleted`})}catch(L){console.log({message:L}),_({})}finally{l(),p(!1),E()}},R=async()=>{try{await g(o)}catch(L){console.log(L),_({message:"Error when delete song"})}finally{E(),l()}},O={outlineButton:`border-${r.alpha} ${r.side_bar_bg} space-x-1`,icon:"w-[20px]"},j=f.useMemo(()=>{if(y)switch(y){case"delete-selected-songs":return u.jsx($r,{loading:m,label:`Delete ${o.length} songs ?`,theme:r,callback:k,close:E});case"remove-selects-songs":return u.jsx($r,{loading:w,label:`Remove ${o.length} songs ?`,theme:r,callback:R,close:E})}},[y,w,m]),K=f.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[!s&&u.jsx("h3",{className:"text-xl font-playwriteCU !mr-[14px]",children:"Songs"}),s&&u.jsxs(_l,{variant:e.variant,children:[u.jsx("p",{className:"font-playwriteCU mr-1",children:o.length}),u.jsxs(X,{onClick:b,variant:"outline",size:"small",className:O.outlineButton,children:[u.jsx($i,{className:O.icon}),u.jsx("span",{className:"hidden sm:block",children:"Add to queue"})]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(_l,{variant:e.variant,children:[u.jsx("p",{className:"font-playwriteCU",children:o.length}),u.jsxs(X,{variant:"outline",size:"small",onClick:()=>console.log("confirm modal"),className:O.outlineButton,children:[u.jsx(yc,{className:O.icon}),u.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(_l,{selectAll:S,variant:e.variant,children:[u.jsx("p",{className:"font-playwriteCU !mr-[14px]",children:o.length}),u.jsxs(X,{variant:"outline",size:"small",onClick:b,className:O.outlineButton,children:[u.jsx($i,{className:O.icon}),u.jsx("span",{className:"hidden sm:block",children:"Add to queue"})]}),u.jsxs(X,{variant:"outline",size:"small",onClick:()=>x("delete-selected-songs"),className:O.outlineButton,children:[u.jsx(yc,{className:O.icon}),u.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(_l,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-playwriteCU !mr-[14px]",children:o.length}),e.variant!=="dashboard-playlist"&&u.jsxs(X,{variant:"outline",size:"small",onClick:b,className:O.outlineButton,children:[u.jsx($i,{className:O.icon}),"Add to songs queue"]}),u.jsxs(X,{variant:"outline",size:"small",onClick:()=>x("remove-selects-songs"),className:O.outlineButton,children:[u.jsx(EI,{className:O.icon}),"Remove"]})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!s&&u.jsx("h3",{className:"font-playwriteCU text-xl !mr-[14px]",children:"Songs"}),s&&u.jsxs(_l,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(X,{variant:"outline",size:"small",onClick:b,className:O.outlineButton,children:[u.jsx($i,{className:O.icon}),"Add to songs queue"]})]})]})}},[s,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center space-x-2 h-[40px]",children:K}),y&&u.jsx(Ur,{closeModal:E,children:j})]})}function fQ({loading:t}){const e=We(),{adminSongs:n}=at(),{from:r}=Q(vi),{currentSong:i}=Q(Ae),s=(o,a)=>{(i.id!==o.id||i.song_in!=="admin")&&(e(Pn({...o,currentIndex:a})),(r.length>1||r[0]!=o.song_in)&&e(Xm({songs:n})))};return u.jsxs(ep,{children:[u.jsx(qc,{variant:"home"}),t&&Wf,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(ps,{variant:"home",handleSetSong:s,activeExtend:i.song_in==="admin"||i.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function MN(){const t=We(),{userPlaylists:e,setUserPlaylists:n}=at(),{currentPlaylist:r}=Q(xi),{currentSong:i}=Q(Ae),[s,o]=f.useState(!1),a=yn(),{setErrorToast:l}=vn();return{isFetching:s,addAdminPlaylist:async h=>{try{if(!h)throw new Error("playlist name invalid");const m=ux(h)+"_admin",p=hx({id:m,by:"admin",name:h});o(!0);const y=[...e,p];await Yn({collection:"playlist",data:p,id:m,msg:">>> api: set playlist doc"}),n(y)}catch(m){console.log({message:m}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await Vc({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const h=e.filter(m=>m.id!==r.id);n(h),t(Kw()),i.song_in===`playlist_${r.id}`&&t(lo()),o(!1),a("/dashboard")}}}function r1({playlist:t,loading:e,activeCondition:n=!0,className:r,...i}){const{theme:s}=te(),{currentSong:o}=Q(Ae),[a,l]=f.useState(!1),{addPlaylist:c,isFetching:d}=ko(),{addAdminPlaylist:h,isFetching:m}=MN(),p=()=>l(!1),y={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&U6,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((x,_)=>{const v=n&&o.song_in.includes(x.id);switch(i.location){case"home":case"my-songs":return u.jsx("div",{className:y.playlistItem,children:u.jsx(Uy,{active:v,theme:s,data:x})},_);case"dashboard":return u.jsx("div",{className:y.playlistItem,children:u.jsx(Uy,{active:v,theme:s,data:x,link:`/dashboard/playlist/${x.id}`})},_)}}):i.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),i.location!=="home"&&u.jsx("div",{className:`${y.playlistItem} mb-[25px]`,children:u.jsx(n$,{theme:s,className:"pt-[100%]",onClick:()=>l(!0)})})]})]}),i.location!=="home"&&a&&u.jsxs(Ur,{closeModal:p,children:[i.location==="my-songs"&&u.jsx(Vb,{addPlaylist:c,isFetching:d,close:p}),i.location==="dashboard"&&u.jsx(Vb,{addPlaylist:h,isFetching:m,close:p})]})]})}function LN({tabs:t,activeTab:e,setActiveTab:n,className:r,render:i,inFullScreen:s}){const{theme:o}=te();return u.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${s?"mx-auto":""} rounded-full ${s?"bg-white/10":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${s?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-[15px] ${s?"":o.content_hover_text} ${e===a?s?"bg-white/20":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:i(a)})},l))})}function FN({to:t}){const{theme:e}=te(),n=yn(),r=$n(),i=o=>{typeof t=="string"&&B3(t),o==="back"&&n(-1)},s={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>i("back"),className:`${s.button} ${r.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(LP,{})})})}const mQ=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=vn(),{theme:i}=te(),[s,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{s&&n(c=>c.filter(d=>d.id!=s))},[s]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:qa.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(oK,{onClick:a,theme:i,toast:c},d))})}),document.getElementById("portals"))})};function pQ({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(pQ);function gQ(){const{theme:t}=te(),[e]=Su(us),[n,r]=f.useState(""),{logOut:i}=bu(),s=()=>r(""),o=async()=>{try{await i()}catch(c){console.log("signOut error",{messsage:c})}finally{s()}},a=f.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx($r,{callback:o,close:s,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(i1,{close:s});case"theme":return}},[n]),l={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${l.header}`,children:u.jsxs("div",{className:l.container,children:[u.jsxs(Qi,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${l.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(ho,{placement:"bottom-end",children:[u.jsx(fo,{className:`${l.avatarFrame} ${l.settingBtn}`,children:u.jsx(vI,{className:"w-[24px]"})}),u.jsx(mo,{children:u.jsx(DN,{loggedIn:!1,setIsOpenModal:()=>{}})})]})]})]})}),!!n&&u.jsx(Ur,{closeModal:s,children:a})]})}const yQ="/HD-MP3/assets/user-default-971f59df.png";function Wy({className:t}){const[e]=Su(us),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(yi,{src:(e==null?void 0:e.photoURL)||yQ,classNames:"w-full"})})}function i1({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(_s,{close:t,title:"HD MP3"}),u.jsxs("p",{children:[u.jsx("span",{className:"font-[500]",children:"Technologies: "})," React, Tailwind Css, Google firebase"]})]})}function zb({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-2 mt-3 max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(gI,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-base font-[500] mt-1",children:e.name})]})})}function $N({close:t}){const{theme:e,setTheme:n}=te(),r=a=>{en("theme",a.id),n(a)},i={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-2 -mt-3 flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},s=yh.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(zb,{active:l,theme:a,onClick:r},a.id)}),o=yh.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(zb,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:i.popupWrapper,children:[u.jsx(_s,{close:t,title:"Themes"}),u.jsxs("div",{className:i.themeContainer,children:[u.jsx("h2",{className:"text-lg font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:i.themeList,children:o}),u.jsx("h2",{className:"text-lg font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:i.themeList,children:s})]})]})}function $r({loading:t,theme:e,callback:n,label:r,close:i,buttonLabel:s,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2]",children:r||"Wait a minute"}),o&&u.jsx("p",{className:"font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex space-x-3 mt-5",children:[u.jsx(X,{onClick:i,className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(X,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:s||"Yes please"})]})]})}function Vb({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=te(),[i,s]=f.useState(""),o=f.useRef(null),a=async l=>{l.preventDefault(),i&&(await e(i),t())};return f.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(_s,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:i,onChange:l=>s(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(X,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${i?"":"opacity-[.6] pointer-events-none"}`,children:"Save"})})]})]})}function vQ({close:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:i}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${i?"opacity-60 pointer-events-none":""}`,children:[u.jsx(_s,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((s,o)=>{const a=s.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(s),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(Sa,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[s.name," ",a&&"(added)"]})]},o)})})})})]})}function xQ({close:t,active:e}){const{theme:n}=te(),r={button:`bg-${n.alpha} ${n.content_hover_bg} text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]`,input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},i=s=>{e(s),t()};return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(_s,{close:t,title:"Sleep timer"}),u.jsx("div",{children:u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:()=>i(15),className:`${r.button} `,children:"15 min"}),u.jsx("button",{type:"button",onClick:()=>i(20),className:`${r.button} `,children:"20 min"}),u.jsx("button",{type:"button",onClick:()=>i(30),className:`${r.button} `,children:"30 min"})]})})]})}function BN({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:i}=ZG({audioRef:e,testImageRef:r,inputRef:n,admin:t}),s={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:qa.createPortal(u.jsxs("div",{className:s.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:i,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Pg({children:t}){const{theme:e}=te();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(gQ,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(NN,{admin:!0}),u.jsx(BN,{admin:!0})]})})}function wQ(){const{loading:t}=mt(),{adminPlaylists:e}=at(),{isOnMobile:n}=te(),{loading:r}=Ym({});return u.jsxs(u.Fragment,{children:[n&&u.jsx(GX,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-xl leading-[2.2] font-playwriteCU mb-3",children:"Popular"}),u.jsx(r1,{loading:r||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(fQ,{loading:r})}),n&&u.jsx(KX,{})]})}function _Q(){const{theme:t}=te(),{currentSong:e}=Q(Ae),{userSongs:n}=at(),[r,i]=f.useState(),[s,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!1),{errorMsg:h,loading:m,initial:p}=Ym({}),y=yn(),x=Nf(),_=f.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await $a({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),v=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===x.id)e.by==="admin"?y(Nt.Home):(i(e),await _(e));else{const g=n.find(w=>w.id===x.id);g?(i(g),await _(g)):y(Nt.Home)}},[e,n]);return f.useEffect(()=>{p&&(d.current||(d.current=!0,r||v()))},[p]),m||l?u.jsx("h1",{children:u.jsx(is,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(RN,{lyric:s,audioRef:a,theme:t,song:r})})]})}function EQ({initialLoading:t}){const e=We(),{userSongs:n}=at(),{currentSong:r}=Q(Ae),{tempSongs:i}=Qm(),s=f.useMemo(()=>i.length+n.length,[i,n]),o=(a,l)=>{r.id!==a.id&&e(Pn({...a,currentIndex:l}))};return u.jsxs(ep,{children:[u.jsx(qc,{variant:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(bt,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[s," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&Wf,!t&&u.jsx(u.Fragment,{children:s?u.jsxs(u.Fragment,{children:[u.jsx(ps,{variant:"dashboard-songs",tempSongs:i,activeExtend:!0,songs:n,handleSetSong:o}),u.jsx(ps,{variant:"uploading",songs:i})]}):u.jsx("p",{className:"text-center",children:"\\_()_/"})})]})]})}function SQ(){const{theme:t}=te(),{user:e,loading:n}=mt(),{currentSong:r}=Q(Ae),{userPlaylists:i}=at(),[s,o]=f.useState(!0),[a,l]=f.useState([]),[c,d]=f.useState("userSongs"),{loading:h,errorMsg:m}=Ym({admin:!0}),p=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=rl(bm(bo,"users"),il("email","!=",e.email)),v=await sl(_);if(v.docs){const g=v.docs.map(w=>w.data());l(g)}}catch(_){console.log(_)}finally{o(!1)}},y=()=>a.map((_,v)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:x.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(yi,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:x.td,children:_.display_name}),u.jsx("td",{className:x.td,children:_.email}),u.jsx("td",{className:x.td,children:O6(_==null?void 0:_.latest_seen)})]},v));f.useEffect(()=>{n||c==="users"&&!a.length&&p()},[c]);const x={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(X,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?x.activeBtn:x.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(X,{onClick:()=>d("users"),className:` ${c==="users"?x.activeBtn:x.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(r1,{activeCondition:!!r.song_in,loading:h,playlist:i,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||h?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(gh,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),m&&u.jsx("p",{children:"Some thing went wrong"}),!m&&u.jsx(EQ,{initialLoading:h})]}),c==="users"&&u.jsx("div",{className:x.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:y()})]})})]})]})})}function bQ({playlist:t,close:e}){const{theme:n}=te(),r=f.useRef(null),[i,s]=f.useState(""),[o,a]=f.useState(!1),{editPlaylist:l,isFetching:c}=ko(),d=async m=>{if(m.preventDefault(),!!o)try{await l(i,t)}catch(p){console.log(p)}finally{e()}},h={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{const m=r.current;m==null||m.focus(),s(t.name)},[]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?a(!0):a(!1)},[i]),u.jsxs(u.Fragment,{children:[u.jsx(_s,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${h.editContainer} ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:r,value:i,onChange:m=>s(m.target.value),type:"text",className:`${h.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(X,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"opacity-60 pointer-events-none"}`,children:"Save"})]})]})}function Ng({loading:t,type:e}){const n=We(),{theme:r,isOnMobile:i}=te(),{currentSong:s}=Q(Ae),{currentPlaylist:o,playlistSongs:a}=Q(xi),[l,c]=f.useState(""),d=Nf(),{deletePlaylist:h,isFetching:m}=ko(),{deleteAdminPlaylist:p,isFetching:y}=MN(),x=f.useMemo(()=>a.reduce((k,R)=>k+R.duration,0),[a]),_=()=>c(""),v=(k,R)=>{const O=`playlist_${o.id}`;(s.id!==k.id||s.song_in!==O)&&(n(Pn({...k,currentIndex:R,song_in:O})),s.song_in!==O&&(n(Xm({songs:a})),console.log("setActuallySongs when playlist list")))},g=()=>{const k=a[0];s.song_in.includes(d.name)||v(k,0)},w=u.jsxs(u.Fragment,{children:[u.jsx(bt,{className:"h-[38px] mb-[6px] w-[200px]"}),u.jsx(bt,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(bt,{className:"hidden md:block h-[16px] w-[200px]"})]}),E=f.useMemo(()=>t?w:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:o.name}),!i&&u.jsx("p",{className:"text-lg leading-[1] font-[500]",children:Ia(x)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",o.by]})]}),[t,o]),S=f.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(X,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(T_,{className:"w-[22px]"}),u.jsx("span",{className:"font-playwriteCU",children:"Play"})]}),u.jsx(X,{onClick:()=>c("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(yc,{className:"w-[22px]"})}),u.jsx(X,{onClick:()=>c("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(bI,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(X,{onClick:g,className:`rounded-full px-[20px] space-x-1 py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(T_,{className:"w-[22px]"}),u.jsx("span",{className:"font-playwriteCU",children:"Play"})]})}},[t,a]),T=f.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(bQ,{close:_,playlist:o});case"delete":if(e==="my-playlist")return u.jsx($r,{loading:m,label:"Delete playlist ?",theme:r,callback:h,close:_});if(e==="dashboard-playlist")return u.jsx($r,{loading:y,label:"Delete playlist ?",theme:r,callback:p,close:_})}},[l,m,y]),b={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:b.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(bt,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Uy,{data:o,active:s.song_in===`playlist_${o.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:b.playlistInfoContainer,children:[u.jsx("div",{className:b.infoTop,children:E}),u.jsx("div",{className:`${b.ctaContainer} `,children:S})]})]}),!!l&&u.jsx(Ur,{closeModal:_,children:T})]})}function Dg({variant:t}){const e=We(),{theme:n}=te(),{currentSong:r}=Q(Ae),{from:i,queueSongs:s}=Q(vi),{currentPlaylist:o,playlistSongs:a}=Q(xi),[l,c]=f.useState(""),{setErrorToast:d}=vn(),{deleteSongFromPlaylist:h}=ko(),m=()=>c(""),p=(g,w)=>{const E=`playlist_${o.id}`;(r.id!==g.id||r.song_in!==E)&&(e(Pn({...g,currentIndex:w,song_in:E})),(i.length>1||i[0]!=E||a.length!==s.length)&&e(Xm({songs:a})))},y=async g=>{try{await h(g)}catch(w){console.log(w),d({})}},x=f.useMemo(()=>{if(!a.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(qc,{variant:"admin-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[a.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(qc,{variant:"my-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[a.length," Songs"]})})}},[o,a]),_=f.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(ps,{variant:"admin-playlist",songs:a,handleSetSong:p,activeExtend:r.song_in.includes(o.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(ps,{variant:t,songs:a,handleSetSong:p,activeExtend:r.song_in.includes(o.id),deleteFromPlaylist:y}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(X,{onClick:()=>c("add-song"),className:`${n.content_bg} rounded-full`,variant:"primary",size:"clear",children:[u.jsx($i,{className:"w-6 mr-[5px]"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2] text-sm",children:"Add song"})]})})]})}},[o,a,r]),v=f.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"add-song":return u.jsx(FG,{close:m,playlistSongs:a})}},[l,a,o]);return u.jsxs(ep,{children:[x,_,!!l&&u.jsx(Ur,{closeModal:m,children:v})]})}function zN(){const{currentPlaylist:t}=Q(xi),{loading:e}=WG(),n=$n(),r=f.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),i=f.useMemo(()=>r?u.jsx(Ng,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(Ng,{loading:e,type:"admin-playlist"}):u.jsx(Ng,{loading:e,type:"my-playlist"}),[e]),s=f.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(bt,{className:"h-[20px] w-[90px]"})}),Wf]}):r?u.jsx(Dg,{variant:"dashboard-playlist"}):t.by==="admin"?u.jsx(Dg,{variant:"admin-playlist"}):u.jsx(Dg,{variant:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(FN,{}),i,u.jsx("div",{className:"pb-[50px] mt-[20px]",children:s})]})}const kQ=["mine","favorite"];function TQ({initialLoading:t}){const e=We(),{theme:n}=te(),{user:r}=mt(),{userSongs:i}=at(),{currentSong:s}=Q(Ae),{from:o,queueSongs:a}=Q(vi),[l,c]=f.useState("mine"),[d,h]=f.useState(!1),{tempSongs:m}=Qm(),p=f.useMemo(()=>t?0:m.length+i.length,[m,i,t]),y=async()=>{if(r)return await X0(300),h(!1)},x=async v=>{c(v),h(!0),v==="favorite"?await y():(await X0(300),h(!1))},_=(v,g)=>{(o.length>1||i.length!==a.length||o[0]!="user")&&e(Xm({songs:i})),(s.id!==v.id||s.song_in!=="user")&&e(Pn({...v,currentIndex:g}))};return u.jsxs(u.Fragment,{children:[u.jsx(qc,{variant:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(bt,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[p," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] py-[10px]",children:kQ.map((v,g)=>{const w=l===v;return u.jsx("button",{onClick:()=>x(v),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${w?n.content_bg:""}
                    `,children:v==="mine"?"My songs":"Favorite"},g)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||d)&&Wf,!t&&!d&&u.jsxs(u.Fragment,{children:[l==="mine"&&!!p&&u.jsxs(u.Fragment,{children:[u.jsx(ps,{variant:"my-songs",handleSetSong:_,activeExtend:s.song_in==="user"||s.song_in==="favorite",songs:i,tempSongs:m}),u.jsx(ps,{songs:m,variant:"uploading"})]}),l==="favorite"&&u.jsx("img",{className:"mx-auto my-5",src:"https://d4t06.github.io/Vue-Mobile/assets/search-empty-ChRLxitn.png",alt:""})]})]})]})}function IQ(){const{theme:t}=te(),{loading:e,user:n}=mt(),{currentSong:r}=Q(Ae),{userPlaylists:i}=at(),{status:s}=Qm(),o=yn(),{loading:a,errorMsg:l,initial:c}=Ym({});return f.useEffect(()=>{e||n&&(n.email||(o(Nt.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(FN,{to:""}),u.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Playlist"}),u.jsx(r1,{activeCondition:!!r.song_in,loading:a,playlist:i,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${s==="uploading"||a?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-3 cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(OG,{className:"w-6 mr-[5px]"}),u.jsx("span",{className:" font-playwriteCU leading-[2.2]",children:"Upload"})]})]}),u.jsxs(ep,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(TQ,{initialLoading:a})]})]})]})}function CQ(){const{theme:t}=te(),{user:e,loading:n}=mt(),[r,i]=f.useState(),[s,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),l=f.useRef(!1),c=Nf(),d=yn(),h=async()=>{try{const m=await $a({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!m.exists()){d("/dashboard");return}const p=m.data();if(p.lyric_id){const y=await $a({collection:"lyrics",id:p.lyric_id});if(y.exists()){const x=y.data();o(x)}}i(p)}catch(m){console.log({message:m})}};return f.useEffect(()=>{if(!n){if(!e)return d(Nt.Home);l.current||(l.current=!0,h())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(RN,{admin:!0,lyric:s,audioRef:a,theme:t,song:r})})]})}function AQ(){const{theme:t}=te();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(Qi,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function RQ(){const{theme:t}=te(),e=yn(),n=async()=>{await rC(us),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(X,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function PQ(){var a,l;const[t]=Su(us),{logIn:e}=bu(),{theme:n}=te(),r=yn(),i=$n(),s=((l=(a=i==null?void 0:i.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(s,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(X,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const Nt={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},NQ=[{path:Nt.Home,component:wQ,layout:""},{path:Nt.MySongs,component:IQ,layout:""},{path:Nt.Playlist,component:zN,layout:""},{path:Nt.Edit,component:_Q,layout:""}],DQ=[{path:Nt.Dashboard,component:SQ,layout:Pg},{path:Nt.DashboardPlaylist,component:zN,layout:Pg},{path:Nt.DashboardEdit,component:CQ,layout:Pg}];function OQ(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with  by d4t06 ",u.jsx("br",{}),"  All rights no reserved \\_()_/"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Ub=({children:t})=>{const{theme:e}=te(),n=$n(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),i=f.useRef(null),s={container:` main-container sm:overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:s.page,children:[window.innerWidth>=800&&u.jsx(eQ,{}),u.jsxs("div",{ref:i,className:s.container,children:[window.innerWidth>=800&&u.jsx(tQ,{contentRef:i}),u.jsxs("div",{className:s.content,children:[t,u.jsx(OQ,{})]})]}),u.jsx(NN,{})]}),u.jsx(BN,{})]})},jQ="/HD-MP3/assets/loading-b1210647.gif";function MQ({allowedRole:t}){const{user:e,loading:n}=mt(),{theme:r}=te();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:jQ,alt:""})}):e&&(t!=null&&t.find(i=>e.role===i))||!t.length?u.jsx(hI,{}):u.jsx(oD,{replace:!0,to:"/login"})}function LQ(){const{setUser:t}=mt(),[e,n]=Su(us);return f.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const s=(await $a({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(s,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:s.like_song_ids||[],playlist_ids:s.playlist_ids||[],play_history:s.play_history||[]}),t({type:"set-user",user:s})}catch(i){console.log({message:i})}})()},[n,e]),u.jsx(hI,{})}function FQ(){return u.jsxs(u.Fragment,{children:[u.jsx(mD,{children:u.jsxs(lD,{children:[u.jsx(ki,{path:"/login",element:u.jsx(PQ,{})}),u.jsx(ki,{path:"/unauthorized",element:u.jsx(RQ,{})}),u.jsx(ki,{path:"*",element:u.jsx(AQ,{})}),u.jsxs(ki,{element:u.jsx(LQ,{}),children:[NQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Ub,u.jsx(ki,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(ki,{element:u.jsx(MQ,{allowedRole:["ADMIN"]}),children:DQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Ub,u.jsx(ki,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(mQ,{autoClose:!0})]})}const $Q=Pq({reducer:{currentSong:Wq,currentPlaylist:cG,playStatus:BG,songQueue:Kq}});Og.createRoot(document.getElementById("root")).render(u.jsx(ek.StrictMode,{children:u.jsx(Jq,{children:u.jsx(V6,{children:u.jsx(a$,{children:u.jsx(tG,{children:u.jsx(sG,{children:u.jsx(YH,{store:$Q,children:u.jsx(FQ,{})})})})})})})}));
